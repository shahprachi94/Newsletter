(window.webpackJsonptheoWebApp=window.webpackJsonptheoWebApp||[]).push([[42],{"+gTl":function(t,e,r){var n,o;n=[r("UFvF"),r("YLtl"),r("ndZK"),r("Shoh"),r("U44B"),r("MGCh"),r("a8ov"),r("a65H"),r("RdGa"),r("9AdD")],void 0===(o=function(t,e,r,n,o,a,i,s,c,l){const u=a.channel("brandkit-utils"),d=i.default,h="headline-font",g="body-font",p={};function f(t){return t.getLogoWithUniqueRole("primary-logo").then(e=>p.brandKitLogoToCoreBrandLogo(t,e)).catch(t=>{const e=t?t.message:"";u.error("getPrimaryBrandLogo error: ".concat(e),t)})}function m(t){return t.getColors().then(t=>(function(t){return e.map(t,t=>p.brandKitColorToCoreBrandColor(t))})(t))}function v(e,r){return t.fcall(()=>e.getFontWithRole(r)||e.getFontWithUniqueRole(r)).then(p.fontThingToFontInfo)}function y(r){return r?t.all(e.map([h,g],t=>v(r,t).then(p.fontInfoToCoreBrandFont))):t.resolve()}function b(e){return v(e,h).then(e=>{for(let r=0;r<n.length;r++){const o=n[r].feel;for(let a=0;a<n[r].fontCards.length;a++)for(let i=0;i<n[r].fontCards[a].fonts.length;i++)if(e.lookupKey===n[r].fontCards[a].fonts[i].lookupKey&&n[r].fontCards[a].fonts[i].role===h)return t.resolve([o])}return t.resolve([])})}return p.fontThingToFontInfo=function(e){return e?"function"==typeof e.getMetrics?t.fcall(()=>e.getMetrics()||e.getMetricsAsync()).then(t=>({id:e.getId&&e.getId(),metrics:t,acRoles:t.acRoles||e.getRoles&&e.getRoles()||[],lookupKey:e.lookupKey(),fontFace:e})):"function"==typeof e.getInfo?e.getInfo().then(t=>r.getFont(t.lookupKey)).then(t=>({id:e.getId(),metrics:t.face.metrics,acRoles:t.face.metrics.acRoles||e.getRoles&&e.getRoles()||[],lookupKey:t.face.lookupKey,fontData:t})):t.reject("fontThingToFontInfo: font is not a recognized type"):t.reject("fontThingToFontInfo: no font to inspect")},p.fontInfoToCoreBrandFont=function(t){if(!t)return;const e=t.metrics||t;let r=e.postScriptName,n=o.fontProvider.descriptorForPostScriptName(r);return n&&n.postScriptName===r||(u.error("fontInfoToCoreBrandFont: did not find font with psname ".concat(r)),r="PTSans-Regular",n=o.fontProvider.descriptorForPostScriptName(r)),new c({id:t.id||t.sparkElementId,acRoles:t.acRoles||e.acRoles,descriptor:n,lookupKey:t.lookupKey})},p.brandKitLogoToCoreBrandLogo=function(e,r){const n=r.getHrefAsync(),o=r.getData(),a=e.composite.getDCXComposite().current.getComponentsOf(o)[0],i=d.encodeAuthoringContextUrl(e.getId(),a.id,a.etag.replace(/"/g,""),a.type);return n.then(e=>t.Promise(t=>{const n=new Image;n.onload=function(){t(new s({id:r.getId(),acRoles:r.getRoles(),acName:r.getName(),url:i,fullResUrl:e,pixelWidth:n.width,pixelHeight:n.height,mimeType:a.type}))},n.src=e}))},p.brandKitColorToCoreBrandColor=function(t){return new l({id:t.getId(),acRoles:t.getRoles(),rgb:t.rgb(),hex:t.hex(),isBaseColor:t.isBaseColor(),isDerived:t.isDerived()})},p.getCoreBrandFromAuthoringContextElements=function(t){const e={id:t.id,name:t.name,activated:t.activated,isDefault:t.isDefault,ownedByCurrentUser:t.belongsToUser,colors:t.colors,logos:t.logos||[],fonts:[]};return t.fonts&&(e.fonts=t.fonts.map(p.fontInfoToCoreBrandFont)),e},p.getCoreBrandForTemplateGeneration=function(e){return t.resolve().then(()=>t.all([m(e),y(e),f(e),b(e)])).spread((t,r,n,o)=>({id:e.getId(),name:e.getName(),logos:[n],colors:t,fonts:r,fontCategories:o})).catch(t=>{const e=t?t.message:"";u.error("getCoreBrandForTemplateGeneration error: ".concat(e),t)})},p.getLiteCoreBrand=function(r){return r&&r.primaryLogoPromise?r.primaryLogoPromise.then(()=>{const t=r.primaryLogoPromise.isFulfilled()&&r.primaryLogoPromise.valueOf(),n=e.cloneDeep(r);return n.logos=t?[t]:[],p.getCoreBrandFromAuthoringContextElements(n)}):t.resolve()},p}.apply(e,n))||(t.exports=o)},"2ofD":function(t,e,r){var n,o;n=[r("YLtl"),r("UFvF"),r("MOGj"),r("vw5A"),r("Uwho"),r("EQbI"),r("chD/"),r("Ctaw"),r("+Ltv"),r("QX4k")],void 0===(o=function(t,e,r,n,o,a,i,s,c,l){const u=new a({name:"Post"}),d=l.default;return new(n.extend({getConfig:()=>({syncGroup:"adobe-theo",scope:"theo",newDocName:"theo-document",doctype:"application/vnd.adobe.theo.document+dcx"}),seedNewDoc(t){this.currentDoc.attributes.name=c.newPostNameCode},createDocFromConfig(t,e,o){switch(e.operation){case"new-from-template":this._createDocNew(t,e,o);break;case"edit-template":case"new-template-from-template":s.loadBrandKit(e.contextId).then(function(t){this.currentDoc=t.composite,r.setSyncMode(r.MODE_EDITOR,this.currentDoc),o.resolve(this.currentDoc)}.bind(this));break;case"remix":this._createDocNew(t,e,o);break;default:n.prototype.createDocFromConfig.apply(this,arguments)}},_remixCPAsset(t,n){const a=e.defer();n=n||o.cps;const s=new d({cpServiceDomain:n});return s.trackRepeatableActivity(t,"remix_count"),s.getAssetMetadata(t).done((function(t){const e=t._links.dcx_base.href,n=r.AdobeDCXUtil.generateUuid(),o="/assets/adobe-theo/"+n,s=new Date;r.dcx.compositeXfer.remixComposite(e,"",o,n,"Spark Post",r.dcxSession,(function(t,r){if(t)u.error("[Post] remixComposite failed",{error:t,cpCompositeHref:e}),a.reject("[Post] remixComposite failed "+t);else{const t=new Date-s;i.trackEvent("PostRemixApiCall",{duration:t,contextData:["remixableAssetId","contextString"]},"post:remix"),a.resolve(n)}}))})).catch((function(e){u.error("[Post] getAssetMetadata failed",{error:e,assetId:t}),a.reject("[Post] getAssetMetadata failed "+e)})),a.promise},doRemix(t,e,r){return this._remixCPAsset(e,r).then(function(e){return this.createDocument({assetType:t,assetId:e})}.bind(this))},community:window.marvel.settings.theoc,communityCategory:"theos",avatarComponentPath:"/avatar",getData(t,e,r){if(!(e=e||this.currentDoc))return void console.error("no doc for getData");const n=e.getDCXRoot().getValue("doc#data");return n?r?n[r]&&n[r][t]:n[t]:void 0},setData(t,e,r,n){if(!(r=r||this.currentDoc))return void console.error("no doc for setData");const o=r.getDCXRoot(),a=o.getValue("doc#data")||{};let i=a;if(n&&(i=a[n],i||(i={},a[n]=i)),"object"==typeof t)for(const e in t)t.hasOwnProperty(e)&&(i[e]=t[e]);else i[t]=e;o.setValue("doc#data",a)}}))}.apply(e,n))||(t.exports=o)},"4dd5":function(t,e,r){var n;void 0===(n=function(){
/*!
 * Color Thief v2.0
 * by Lokesh Dhakar - http://www.lokeshdhakar.com
 *
 * License
 * -------
 * Creative Commons Attribution 2.5 License:
 * http://creativecommons.org/licenses/by/2.5/
 *
 * Thanks
 * ------
 * Nick Rabinowitz - For creating quantize.js.
 * John Schulz - For clean up and optimization. @JFSIII
 * Nathan Spady - For adding drag and drop support to the demo page.
 *
 */
var t=function(t){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),document.body.appendChild(this.canvas),this.width=this.canvas.width=t.width,this.height=this.canvas.height=t.height,this.context.drawImage(t,0,0,this.width,this.height)};t.prototype.clear=function(){this.context.clearRect(0,0,this.width,this.height)},t.prototype.update=function(t){this.context.putImageData(t,0,0)},t.prototype.getPixelCount=function(){return this.width*this.height},t.prototype.getImageData=function(){return this.context.getImageData(0,0,this.width,this.height)},t.prototype.removeCanvas=function(){this.canvas.parentNode.removeChild(this.canvas)};var e=function(){};
/*!
 * quantize.js Copyright 2008 Nick Rabinowitz.
 * Licensed under the MIT license: http://www.opensource.org/licenses/mit-license.php
 */
/*!
 * Block below copied from Protovis: http://mbostock.github.com/protovis/
 * Copyright 2010 Stanford Visualization Group
 * Licensed under the BSD License: http://www.opensource.org/licenses/bsd-license.php
 */if(e.prototype.getColor=function(t,e){return this.getPalette(t,5,e)[0]},e.prototype.getPalette=function(e,r,o){void 0===r&&(r=10),void 0===o&&(o=10);for(var a,i,s,c,l=new t(e),u=l.getImageData().data,d=l.getPixelCount(),h=[],g=0;d>g;g+=o)i=u[(a=4*g)+0],s=u[a+1],c=u[a+2],u[a+3]>=125&&(i>250&&s>250&&c>250||h.push([i,s,c]));var p=n.quantize(h,r).palette();return l.removeCanvas(),p},!r)var r={map:function(t,e){var r={};return e?t.map((function(t,n){return r.index=n,e.call(r,t)})):t.slice()},naturalOrder:function(t,e){return e>t?-1:t>e?1:0},sum:function(t,e){var r={};return t.reduce(e?function(t,n,o){return r.index=o,t+e.call(r,n)}:function(t,e){return t+e},0)},max:function(t,e){return Math.max.apply(null,e?r.map(t,e):t)}};var n=function(){function t(t,e,r){return(t<<2*c)+(e<<c)+r}function e(t){function e(){r.sort(t),n=!0}var r=[],n=!1;return{push:function(t){r.push(t),n=!1},peek:function(t){return n||e(),void 0===t&&(t=r.length-1),r[t]},pop:function(){return n||e(),r.pop()},size:function(){return r.length},map:function(t){return r.map(t)},debug:function(){return n||e(),r}}}function n(t,e,r,n,o,a,i){var s=this;s.r1=t,s.r2=e,s.g1=r,s.g2=n,s.b1=o,s.b2=a,s.histo=i}function o(){this.vboxes=new e((function(t,e){return r.naturalOrder(t.vbox.count()*t.vbox.volume(),e.vbox.count()*e.vbox.volume())}))}function a(e){var r,n,o,a,i=new Array(1<<3*c);return e.forEach((function(e){n=e[0]>>l,o=e[1]>>l,a=e[2]>>l,r=t(n,o,a),i[r]=(i[r]||0)+1})),i}function i(t,e){var r,o,a,i=1e6,s=0,c=1e6,u=0,d=1e6,h=0;return t.forEach((function(t){r=t[0]>>l,o=t[1]>>l,a=t[2]>>l,i>r?i=r:r>s&&(s=r),c>o?c=o:o>u&&(u=o),d>a?d=a:a>h&&(h=a)})),new n(i,s,c,u,d,h,e)}function s(e,n){if(n.count()){var o=n.r2-n.r1+1,a=n.g2-n.g1+1,i=n.b2-n.b1+1,s=r.max([o,a,i]);if(1==n.count())return[n.copy()];var c,l,u,d,h=0,g=[],p=[];if(s==o)for(c=n.r1;c<=n.r2;c++){for(d=0,l=n.g1;l<=n.g2;l++)for(u=n.b1;u<=n.b2;u++)d+=e[t(c,l,u)]||0;h+=d,g[c]=h}else if(s==a)for(c=n.g1;c<=n.g2;c++){for(d=0,l=n.r1;l<=n.r2;l++)for(u=n.b1;u<=n.b2;u++)d+=e[t(l,c,u)]||0;h+=d,g[c]=h}else for(c=n.b1;c<=n.b2;c++){for(d=0,l=n.r1;l<=n.r2;l++)for(u=n.g1;u<=n.g2;u++)d+=e[t(l,u,c)]||0;h+=d,g[c]=h}return g.forEach((function(t,e){p[e]=h-t})),function(t){var e,r,o,a,i,s=t+"1",l=t+"2",u=0;for(c=n[s];c<=n[l];c++)if(g[c]>h/2){for(o=n.copy(),a=n.copy(),e=c-n[s],i=(r=n[l]-c)>=e?Math.min(n[l]-1,~~(c+r/2)):Math.max(n[s],~~(c-1-e/2));!g[i];)i++;for(u=p[i];!u&&g[i-1];)u=p[--i];return o[l]=i,a[s]=o[l]+1,[o,a]}}(s==o?"r":s==a?"g":"b")}}var c=5,l=8-c,u=1e3,d=.75;return n.prototype={volume:function(t){var e=this;return(!e._volume||t)&&(e._volume=(e.r2-e.r1+1)*(e.g2-e.g1+1)*(e.b2-e.b1+1)),e._volume},count:function(e){var r=this,n=r.histo;if(!r._count_set||e){var o,a,i,s=0;for(o=r.r1;o<=r.r2;o++)for(a=r.g1;a<=r.g2;a++)for(i=r.b1;i<=r.b2;i++)index=t(o,a,i),s+=n[index]||0;r._count=s,r._count_set=!0}return r._count},copy:function(){var t=this;return new n(t.r1,t.r2,t.g1,t.g2,t.b1,t.b2,t.histo)},avg:function(e){var r=this,n=r.histo;if(!r._avg||e){var o,a,i,s,l=0,u=1<<8-c,d=0,h=0,g=0;for(a=r.r1;a<=r.r2;a++)for(i=r.g1;i<=r.g2;i++)for(s=r.b1;s<=r.b2;s++)l+=o=n[t(a,i,s)]||0,d+=o*(a+.5)*u,h+=o*(i+.5)*u,g+=o*(s+.5)*u;r._avg=l?[~~(d/l),~~(h/l),~~(g/l)]:[~~(u*(r.r1+r.r2+1)/2),~~(u*(r.g1+r.g2+1)/2),~~(u*(r.b1+r.b2+1)/2)]}return r._avg},contains:function(t){var e=this,r=t[0]>>l;return gval=t[1]>>l,bval=t[2]>>l,r>=e.r1&&r<=e.r2&&gval>=e.g1&&gval<=e.g2&&bval>=e.b1&&bval<=e.b2}},o.prototype={push:function(t){this.vboxes.push({vbox:t,color:t.avg()})},palette:function(){return this.vboxes.map((function(t){return t.color}))},size:function(){return this.vboxes.size()},map:function(t){for(var e=this.vboxes,r=0;r<e.size();r++)if(e.peek(r).vbox.contains(t))return e.peek(r).color;return this.nearest(t)},nearest:function(t){for(var e,r,n,o=this.vboxes,a=0;a<o.size();a++)(e>(r=Math.sqrt(Math.pow(t[0]-o.peek(a).color[0],2)+Math.pow(t[1]-o.peek(a).color[1],2)+Math.pow(t[2]-o.peek(a).color[2],2)))||void 0===e)&&(e=r,n=o.peek(a).color);return n},forcebw:function(){var t=this.vboxes;t.sort((function(t,e){return r.naturalOrder(r.sum(t.color),r.sum(e.color))}));var e=t[0].color;e[0]<5&&e[1]<5&&e[2]<5&&(t[0].color=[0,0,0]);var n=t.length-1,o=t[n].color;o[0]>251&&o[1]>251&&o[2]>251&&(t[n].color=[255,255,255])}},{quantize:function(t,n){function c(t,e){for(var r,n=1,o=0;u>o;)if((r=t.pop()).count()){var a=s(l,r),i=a[0],c=a[1];if(!i)return;if(t.push(i),c&&(t.push(c),n++),n>=e)return;if(o++>u)return}else t.push(r),o++}if(!t.length||2>n||n>256)return!1;var l=a(t);l.forEach((function(){0}));var h=i(t,l),g=new e((function(t,e){return r.naturalOrder(t.count(),e.count())}));g.push(h),c(g,d*n);for(var p=new e((function(t,e){return r.naturalOrder(t.count()*t.volume(),e.count()*e.volume())}));g.size();)p.push(g.pop());c(p,n-p.size());for(var f=new o;p.size();)f.push(p.pop());return f}}}();return e}.apply(e,[]))||(t.exports=n)},"9AdD":function(t,e,r){var n;void 0===(n=function(){return function(t){var e={id:t.id,acRoles:t.acRoles,red:t.rgb.red||t.rgb.r,green:t.rgb.green||t.rgb.g,blue:t.rgb.blue||t.rgb.b,alpha:t.rgb.alpha||t.rgb.a||1,hex:t.hex,isBaseColor:t.isBaseColor,isDerived:t.isDerived,rgb:function(){return{red:e.red,green:e.green,blue:e.blue,alpha:e.alpha}},getRoles:function(){return e.acRoles},getId:function(){return e.id}};return e}}.apply(e,[]))||(t.exports=n)},"A+mC":function(t,e,r){"use strict";r.r(e),r.d(e,"HostPersistUtilsImpl",(function(){return i}));var n=r("UzQk"),o=r("lulf");function a(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}class i{constructor(){a(this,"tmpFiles",{}),a(this,"postFeatureController",void 0),this.postFeatureController=new o.default}mimeTypeForFileAtPath(t){let e=this.tmpFiles[t];return e?e.mimeType:null}writeJsonContentToTempFile(t){let e="tmp/".concat(n.GUIDUtils.makeGUID());return this.tmpFiles[e]={path:e,content:t,mimeType:"application/json"},e}readJsonContentFromFile(t){let e=this.tmpFiles[t];return e?e.content:null}deleteTempFile(t){delete this.tmpFiles[t]}fileUrlForPath(t){return t}fileExists(t){return!!this.tmpFiles[t]}useJsonDocumentEncoding(){return!0}}},CTED:function(t,e,r){var n,o;n=[r("MGCh")],void 0===(o=function(t){return function(e){var r=t.channel("LFUCache"),n={},o=e,a={};return n.get=function(t){return t in a?(a[t].hits+=1,a[t].value):null},n.set=function(t,e){if(Object.keys(a).length>o){var r=Number.MAX_VALUE,n=null;for(var i in a)a[i].hits<r&&(r=a[i].hits,n=i);this.remove(n)}a[t]={value:e,hits:0}},n.remove=function(t){r.assert(t in a,"Failed to remove missing key from cache."),delete a[t]},n}}.apply(e,n))||(t.exports=o)},Ctaw:function(t,e,r){var n,o;n=[r("UFvF"),r("gBAB"),r("kNaX"),r("MGCh"),r("+gTl"),r("a65H"),r("RdGa"),r("9AdD"),r("O0ct")],void 0===(o=function(t,e,r,n,o,a,i,s,c){const l=n.channel("brandkit-wrapper"),u={};let d,h,g;function p(n,o,a){return n&&o?o instanceof Blob?function(t,n,o){const a=o?"primary-logo":"secondary-logo";return t.uploadImageAsset(r(),e.LOGOS_PARENT,n,a)}(n,o,a):function(t,n,o){const a=n.original||n.preview||n.thumbnail,i=o?"primary-logo":"secondary-logo";return t.updateImageAsset(r(),e.LOGOS_PARENT,a.link,n.type||"image/jpeg",function(t){let e=t.source.toLowerCase();return"creative cloud"===e&&(e="cc"),e}(n),i)}(n,o,a):t.resolve()}function f(){if(!d)return t.resolve();const e={id:d.getId(),name:d.getName()};return d.getColors().then(t=>(e.colors=t.map(t=>new s({id:t.getId(),acRoles:t.getRoles(),rgb:t.rgb(),hex:t.hex(),isBaseColor:t.isBaseColor(),isDerived:t.isDerived()})),e)).catch(e=>{const r=e?e.message:"";return l.error("getColorsInActiveBrand error: ".concat(r),e),t.resolve([])})}function m(e){const r={id:e.getId(),name:e.getName(),activated:e.activated(),belongsToUser:e.belongsToUser(),isDefault:e.isDefault()},n=f(),a=function(){if(!d)return t.resolve();const e={name:d.getName()};return d.getAuthoringContextLogos().then(t=>(e.logos=t,e))}();return t.all([n,a]).spread((e,n)=>{r.loadedPromise=t(),e&&(r.colors=e.colors);const a=n?n.logos:null;if(a&&a.length){const e=a.findIndex(t=>t.getRoles().includes("primary-logo")),n=a.splice(e,1)[0];r.primaryLogoPromise=o.brandKitLogoToCoreBrandLogo(d,n),r.secondaryLogoPromises=a.map(t=>o.brandKitLogoToCoreBrandLogo(d,t));const i=[r.primaryLogoPromise].concat(r.secondaryLogoPromises);r.fonts=[],c.getCachedFonts().forEach(t=>{const e=c.getFontData(t);e.isBKFont&&r.fonts.push(e)}),r.loadedPromise=r.loadedPromise.then(()=>t.allSettled(i).then(t=>{r.logos=t.filter(t=>"fulfilled"===t.state&&t.value).map(t=>t.value)}))}const i=t.defer();return r.coreBrandPromise=i.promise,r.loadedPromise.done(()=>{r.coreBrand=o.getCoreBrandFromAuthoringContextElements(r),i.resolve(r.coreBrand)}),r}).catch(e=>{const r=e?e.message:"";return l.error("extractBrandElementsForCache error: ".concat(r),e),t.resolve(null)})}function v(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return d=t,g=e,d}return u.addLogoToCurrentBrand=function(e,r){return e&&d?p(d,e,r).catch(e=>{const r=e?e.message:"";return l.error("addLogoToCurrentBrand error: ".concat(r),e),t.reject(e)}):t.resolve()},u.appendHexColorToBrand=function(e,r){return d?d.getColors().then(n=>{const o=[];for(let t=0;t<e.length;++t){let r=!1;for(let o=0;o<n.length;++o)if(n[o].hex.replace("#","")===e[t]){r=!0;break}r||o.push(e[t])}return t.all(o.map(t=>r.addColorHex(t)))}):t.resolve()},u.getBrandKitById=function(t){return e.getController().then(e=>e.getContextById(t))},u.loadDefaultBrandKit=function(){let r,n=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],o=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return r=o?e.getOrCreateDefaultBrand:"function"==typeof e.getDefaultBrand?e.getDefaultBrand:e.acquireDefaultBrand,r().then(r=>!r&&o?e.getOrCreateDefaultBrand():t.resolve(r)).then(t=>v(t,n)).catch(e=>{const r=e?e.message:"";return l.error("loadDefaultBrandKitError: ".concat(r),e),t.reject(e)})},u.loadBrandKit=function(e,r){if((r=r||{}).skipReload&&d&&d.getId()===e)return t.resolve(d);const n=!!r.belongsToUser;return"string"!=typeof e||e.length<=0?u.loadDefaultBrandKit(n,r.isEntitledUser):u.getBrandKitById(e).then(t=>null!==t?v(t):u.loadDefaultBrandKit(n,r.isEntitledUser)).catch(t=>(l.error("loadBrandKit: Unable to find authoring context with id ".concat(e),t),u.loadDefaultBrandKit(n,r.isEntitledUser)))},u.refreshBrandColors=function(){return f().then(t=>{return u.currentBrandKit()&&t&&t.colors.length&&(h||(h={}),h.colors=t.colors),h})},u.refreshCachedCurrentBrandElements=function(){return d?m(d).then(t=>(t.showBrandInUI="boolean"!=typeof g||g,h=t,h&&!h.name&&(h.name="Brand"),h)).catch(t=>{const e=t?t.message:"";l.error("refreshCurrentBrandElementsCache error: ".concat(e),t)}):t.resolve()},u.switchCurrentAuthoringContext=function(e){if(!e)return t.resolve(h);const r="string"==typeof e?e:e.getId();return d&&d.getId()===r?t.resolve(h):u.loadBrandKit(r,!1).then(c.switchBrandContext).then(u.refreshCachedCurrentBrandElements)},u.currentBrandKit=function(){return d},u.currentBrandElements=function(){return h},u.resetBrandCaches=function(){h=null},u.checkForRestrictedFonts=function(){if(!h)return t.resolve([]);const r=h.coreBrand;if(!r)return t.resolve([]);const n=[];for(const t in r.fonts)t.acRoles&&t.acRoles.includes(t.acRoles,"custom")&&t.descriptor&&t.descriptor.postScriptName&&n.push({source:"user-uploaded",postScriptName:t.descriptor.postScriptName});return n.length?e.verifyFontsUsed(n,d):t.resolve([])},u}.apply(e,n))||(t.exports=o)},O0ct:function(t,e,r){var n,o;n=[r("xeH2"),r("UFvF"),r("YLtl"),r("Uwho"),r("e46Y"),r("ApVh"),r("tY4j"),r("Fb2u"),r("ndZK"),r("omhI"),r("Idax"),r("MGCh"),r("UzQk"),r("bBG2")],void 0===(o=function(t,e,r,n,o,a,i,s,c,l,u,d,h,g){const p=g.default,f=d.channel("util/fonts.js"),m={},v={},y={},b=["Local Brewery","Voltage","Wanderlust","Bellfort Script"],w={};let C,x;const F={edge:0,standardTypekit:0,brandkitTypekit:0,uploaded:0},T="spark-provided",S="user-uploaded",I="faux-font",k="headline-font";m.typekitId="ujm6jju",m.edgeWebFonts={"source-sans-pro":["n9"],"amatic-sc":["n4"],"cabin-sketch":["n7"],"cantata-one":[],economica:["n4"],"germania-one":[],graduate:[],"jolly-lodger":[],"josefin-slab":["n3"],"kaushan-script":[],lora:["n4"],megrim:[],monoton:[],montserrat:[],pacifico:[],"permanent-marker":[],"playfair-display":["n4"],"pt-mono":[],quicksand:["n7"],"seaweed-script":[],"sirin-stencil":[],"stint-ultra-expanded":[],ultra:[],"vast-shadow":[],voltaire:[],yellowtail:[]},r.forEach(u.fonts,t=>{t.isPostFont=!0});const A=r.reduce(u.fonts,(t,e)=>{const r=e.postScriptName;return f.assert(!(r in t),"Did not expect to add the same key twice to STANDARD_FONT_FACES_DICT dictionary."),t[r]=e,t},{}),P=A["SourceSansPro-Black"],E={typekitSubgroupKitId:m.typekitId,faces:r.map(r.filter(u.fonts,t=>!(t.family.toLowerCase()in m.edgeWebFonts)),t=>({metrics:t}))};function R(t){const e=document.createElement("span");return e.innerHTML="giItT1WQy@!-/#",e.style.position="absolute",e.style.left="-10000px",e.style.top="-10000px",e.style.fontSize="300px",e.style.fontFamily=t,document.body.appendChild(e),e}function N(t,e,n){const o=R("unknown-font-mci3jfoq2y"),a=o.offsetWidth,i=r.map(t,t=>R(t));let s,c=0;document.body.removeChild(o),s=setInterval((function(){c++;for(let t=i.length-1;t>=0;t--)i[t].offsetWidth!==a&&(document.body.removeChild(i[t]),i.splice(t,1));(0===i.length||c>150)&&(i.length>0&&f.warn("Not all fonts were successfully loaded after 150 attempts."),clearInterval(s),n())}),50)}function D(t,e,r,n,o){t.source=h.FontSource.USER_UPLOAD,t.isBKFont=!0,t.family=e,t.acRoles=Array.isArray(r)&&[].concat(r)||[],t.sparkElementId=n,t.brandkitName=o,t.cssName=e}function M(t){if(!t)return e();const n=t===E||t.isEdgeFont;let o;return n||t.faces.forEach(t=>{const e=t.metrics||t.getMetrics();if(f.assert(e&&e.postScriptName,"Invalid metrics instance."),e.postScriptName in v){const t=v[e.postScriptName];t.acRoles&&e.acRoles?(t.isBKFont=!0,t.acRoles=e.acRoles):(t.isBKFont=!0,t.brandkitName=e.brandkitName,t.acRoles=e.acRoles,t.sparkElementId=e.sparkElementId,t.baseFont=e.baseFont,t.label=e.label)}else v[e.postScriptName]=e}),o=t.faces.length>0&&"function"==typeof t.faces[0].isCustomFont&&t.faces[0].isCustomFont()?function(t){const n=t.faces.map(t=>{return(t.metrics||t.getMetrics()).fullName});f.info('Start loading uploaded font(s): "'+n.join('", "')+'"');const o=Date.now(),a=e.defer();try{const e=t.cssName,n=t.cssFontFace,o=document.createElement("style");o.type="text/css",o.innerHTML=n,o.className=e;const i=document.head.querySelectorAll("style."+e);i&&r.each(i,t=>{t.parentNode.removeChild(t)}),document.getElementsByTagName("head")[0].appendChild(o),N([e],0,()=>{a.resolve(!0)})}catch(t){f.error("Error loading uploaded font",t),a.resolve(!1)}return a.promise.finally(()=>{const t=Date.now()-o;f.info('Done loading uploaded font(s): "'+n.join('", "')+'" in '+t+"ms."),F.uploaded+=t}),a.promise}(t):t.isEdgeFont?m.loadEdgeFonts(t):m.loadTypekitFonts(t),t.faces&&t.faces.forEach(t=>{const e=t.metrics||t.getMetrics();w[e.postScriptName]=o.then(t=>{if(t)return!e.isPostFont||e.source&&e.source!==h.FontSource.UNKNOWN_SOURCE||(e.source=h.FontSource.EMBEDDED),h.Host.fontProvider.loadOneFont(e),e;n||delete v[e.postScriptName],delete w[e.postScriptName]})}),o}function L(t){return t.family.toLowerCase()in m.edgeWebFonts?M({isEdgeFont:!0,faces:[{metrics:t}]}):M(E)}function U(t){const e=t.getMetrics(),r=t.cssName();return D(e,r,t.getRoles(),t.getId(),t.name),t.getCSSFontFaceAsync().then(e=>M({cssName:r,cssFontFace:e,faces:[t]}))}function B(r,n){return(a=n,(o=function(t){return function(t,e){if(t){const r={name:t.getName()},n=e&&e.length?t.getFontsWithRoles(e):t.getAllFonts();return n.length?(r.fontFaces=n,[r]):[]}return[]}(x,t)}(a),function(r){const n={};return n[T]={},n[T].subgroups=[],c.getFontRegistry().then(o=>{var a=[];return r.forEach(e=>{e.fontFaces.forEach(r=>{let i,s,c,l,u;const d=r.getValue().source;if(d===T){const a=t.extend(!0,{},o.facesByKey[r.lookupKey()].face);a.metrics.source=h.FontSource.SPARK_PROVIDED,i=o.facesByKey[r.lookupKey()].subgroup.name,s=t.extend(!0,{},o.facesByKey[r.lookupKey()].subgroup);for(var g=0;g<n[T].subgroups.length&&!l;g++)c=n[T].subgroups[g],c.name===i&&(l=c);l||(u={name:i,data:s},u.data.faces=[],n[T].subgroups.push(u),l=u),function(t,e,r,n,o,a){t.metrics.original_family=t.metrics.family,t.metrics.family=e,a&&(t.metrics.brandkitName=a),t.metrics.label=r+" "+t.name,t.metrics.baseFont=r,t.metrics.isPublic="true",t.metrics.isBKFont=!0,t.metrics.cssName=e,t.metrics.lookupKey=t.lookupKey,t.metrics.allCapsAllowed=!b.includes(r),t.metrics.acRoles=Array.isArray(n)&&[].concat(n)||[],t.metrics.sparkElementId=o,t.metrics.weight>900&&(t.metrics.weight=900)}(a,s.cssName,i,r.getRoles(),r.getId(),e.name),l.data.faces.push(a)}else if(d===S){const t=r.getMetrics(),o=r.cssName();i=t.familyName,D(t,o,r.getRoles(),r.getId(),e.name),s={name:void 0===t.preferredFamilyName?t.familyName:t.preferredFamilyName,cssName:o,typekitPreviewId:!1,paragraphRecommended:!1,serif:t.serif,calligraphic:t.calligraphic},a.push(r.getCSSFontFaceAsync().then((function(t){s.cssFontFace=t})));const d={gingerName:t.postScriptName,lookupKey:r.lookupKey(),metrics:t,name:r.subgroupName,path:"",typekitKey:"",getMetrics:()=>r.getMetrics(),getCSSFontFaceAsync:()=>r.getCSSFontFaceAsync(),getRoles:()=>r.getRoles(),getId:()=>r.getId(),cssName:()=>r.cssName(),isCustomFont:()=>r.isCustomFont()};for(g=0;g<n[T].subgroups.length&&!l;g++)if(c=n[T].subgroups[g],c.name===i){l=c;break}l||(u={name:i,data:s},u.data.faces=[],n[T].subgroups.push(u),l=u),l.data.faces.push(d)}else d===I||f.error("Skipping font from brandkit with invalid source: "+r.cssName())})}),e.allSettled(a).then((function(){return n}))})}(o).then(t=>t[T].subgroups).catch(t=>{f.error("Error processing brand fonts",t)})).catch(t=>{f.error("Error getting spark fonts",t)})).then(t=>{const n={},o={};for(let e=0;e<t.length;e++){const r=t[e].data.faces;o[t[e].name]=t[e].data;for(let t=0;t<r.length;t++){n[r[t].metrics.postScriptName]=r[t]}}const a={},i=[];r=r||Object.keys(n);for(let t=0;t<r.length;t++){const s=r[t];if(s in w){if(n[s]&&n[s].metrics){const t=n[s].metrics;v[s]=t,w[s]=e.resolve(t)}else i.push(w[s].then(t=>{if(!v[t.postScriptName])return v[t.postScriptName]=t,t}));continue}const c=m.getSparkFontsSubgroupNameForPostScriptName(s);void 0!==c?(c in o||(o[c]=m.getSparkFontDataForSubgroup(c)),c in a||(a[c]=!0,i.push(M(o[c])),o[c].faces.forEach(t=>{const e=v[t.metrics.postScriptName];e&&(e.acRoles&&t.metrics.acRoles?(e.isBKFont=!0,t.metrics.acRoles.forEach(t=>{-1===e.acRoles.indexOf(t)&&e.acRoles.push(t)})):(e.isBKFont=!0,e.brandkitName=t.metrics.brandkitName,e.acRoles=t.metrics.acRoles,e.sparkElementId=t.metrics.sparkElementId,e.baseFont=t.metrics.baseFont,e.label=t.metrics.label))}))):s in n?i.push(U(n[s])):i.push(V(s))}return e.allSettled(i)});var o,a}function _(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[k];return m.setAuthoringContext(t),B(null,e)}function O(){for(const t in v)v[t].isBKFont&&delete v[t];r.forEach(u.fonts,t=>{v[t.postScriptName]=r.clone(t)})}function H(t){const r=e.defer();return a.getAccessToken().then(e=>{const o=n.cid,a=new XMLHttpRequest,i=n.adobeFontsApiEndpoint+"/v1/variations/"+t+"?include=full";a.open("GET",i,!0),a.onload=()=>{if(4===a.readyState)if(200===a.status){const t=JSON.parse(a.responseText),e=t.font.sync.required_action;e&&e.length>0?r.reject("No access to premium font"):r.resolve(t)}else f.error("getTKFontVariation request encountered an error",{status:a.status,statusText:a.statusText,typekitFontId:t}),r.reject(a.statusText)},a.onerror=()=>{f.error("getTKFontVariation request encountered an error",{status:a.status,statusText:a.statusText,typekitFontId:t}),r.reject(a.statusText)},a.setRequestHeader("X-Api-Key",o),a.setRequestHeader("Authorization","Bearer "+e),a.send(null)}),r.promise}function j(t){const r=e.defer();return a.getAccessToken().then(e=>{const o=n.cid,a=new XMLHttpRequest,i=n.adobeFontsApiEndpoint+"/v1/selections",s='["'+t+'"]';a.open("POST",i,!0),a.onload=()=>{if(4===a.readyState)if(200===a.status){const t=JSON.parse(a.responseText);r.resolve(t)}else f.error("activateTypekitFont request encountered an error",{status:a.status,statusText:a.statusText,typekitFontId:t}),r.reject(a.statusText)},a.onerror=()=>{f.error("activateTypekitFont request encountered an error",{status:a.status,statusText:a.statusText,typekitFontId:t}),r.reject(a.statusText)},a.setRequestHeader("X-Api-Key",o),a.setRequestHeader("Authorization","Bearer "+e),a.setRequestHeader("Content-Type","application/json"),a.send(s)}),r.promise}function K(r){const o=e.defer(),a=n.adobeFontsMetricsService+"/"+r+".json";return t.ajax({url:a,type:"GET",dataType:"json",success:t=>{o.resolve(t)},error:()=>{o.reject("Error getting metrics from TypeKit service.")}}),o.promise}function W(t,r){if(!t)return e.reject("Attempted to get null variationId");const n=v[r]?v[r]:v[y[t]];return n?e(n):i(K,{maxAttempts:3,delay:200})(t).then(e=>(o.addPageAction("post_web_typekit_metrics",{status:"succeeded",postScriptName:r,typekitFontId:t}),y[t]||(y[t]=e.postScriptName),e),e=>{throw o.addPageAction("post_web_typekit_metrics",{status:"failed",postScriptName:r,typekitFontId:t}),e})}function V(t){const r=e.defer();let n;var o;return w[t]=r.promise,(o=t,o?i(H,{maxAttempts:3,delay:200})(o):e.reject("Attempted to get a null tkFontVariationIdOrPSName.")).then(t=>{return n=t,function(t){return t?i(j,{maxAttempts:3,delay:200})(t):e.reject("Error: attempted to activate a null tkSyncFontId")}(n.font.sync.font_id||"")}).then(()=>{return window.TypekitPreview?e():c.inject()}).then(()=>{return W(n.id,t)}).then(t=>{return m.registerTypekitFont(t),function(t){const r=e.defer();return TypekitPreview.load([t],{active:()=>{r.resolve()},inactive:()=>{r.reject("inactive font")}}),r.promise}({id:t.familyId,variations:[t.tkVariation],css_name:t.cssName})}).catch(e=>{f.error("Error loading missing typekit font with postScriptName "+t,e),delete w[t],delete v[t],r.reject(e)}).done(()=>{r.resolve(!0)}),r.promise}return m.loadEdgeFonts=function(n){const o=r.reduce(n.faces,(t,e)=>{const r=(e.metrics||e.getMetrics()).family.toLowerCase();return t[r]=m.edgeWebFonts[r],t},{});f.info("Start loading "+Object.keys(o).length+" edge fonts.");const a=Date.now(),i=e.defer(),s=function(t){let e="";for(const r in t){e+=r+":";const n=t[r];if(n.length)for(let t=0;t<n.length;t++)t>0&&(e+=","),e+=n[t];else e+="n4";e+=":all;"}return e.substr(0,e.length-1)}(o);return t.ajax({url:"https://use.edgefonts.net/"+s+".js",dataType:"script",cache:!0,success:(t,e)=>{N(Object.keys(o),0,()=>{i.resolve(!0)})},error:(t,e,r)=>{f.error("getScript error loading edge web fonts",r),i.resolve(!1)}}),i.promise.finally(()=>{const t=Date.now()-a;f.info("Done loading "+Object.keys(o).length+" edge fonts in "+t+"ms."),F.edge+=t}),i.promise},m.loadTypekitFonts=function(r){const n=r.typekitSubgroupKitId;f.info("Start loading TypeKit fontID: "+n);const o=e.defer(),a=Date.now();return t.ajax({url:"https://ajax.googleapis.com/ajax/libs/webfont/1.6.26/webfont.js",dataType:"script",cache:!0,success:(t,e)=>{WebFont.load({typekit:{id:n},active:()=>{o.resolve(!0)},inactive:()=>{o.resolve(!0)}})},error:(t,e,r)=>{f.error("getScript error loading webfont typekit kit",r),o.resolve(!1)}}),o.promise.finally(()=>{const t=Date.now()-a;f.info("Done loading TypeKit fontID: "+n+" in "+t+"ms."),n===m.typekitId?F.standardTypekit+=t:F.brandkitTypekit+=t}),o.promise},m.getSparkFontsSubgroupNameForPostScriptName=function(t){for(const e in s.sparkfonts){const r=s.sparkfonts[e];for(let n=0;n<r.faces.length;n++)if(r.faces[n].metrics.postScriptName===t)return e}},m.getSparkFontDataForSubgroup=function(t){return s.sparkfonts[t]},m.loadNewUploadedFont=function(t){return U(t)},m.loadMissingFonts=function(t){const n=[];for(let e=0;e<t.length;e++){const r=t[e];r in w||(r in A?L(A[r]):n.push(r))}let o;return o=0===n.length?e.resolve():B(n,null),o.then(()=>{const n=r.map(t,t=>(f.assert(t in w,"Failed to find loading promise for font: "+t),w[t]));return e.allSettled(n)})},m.loadCurrentBrandFonts=function(){return B()},m.loadAllStandardFonts=function(){const t=r.map(u.fonts,t=>t.postScriptName);return this.loadMissingFonts(t)},m.getFontData=function(t){return v[t]},m.getDefaultFont=function(){return P},m.getCachedFonts=function(){return Object.keys(v)},m.fontLoaded=function(t){f.assert(t&&t.metrics,"Invalid fontInfo instance.");const r=t.metrics.postScriptName;let n;return n=r in w?e.resolve():m.loadMissingFonts([r]),n.then(()=>(f.assert(r in w,"Font loading mechanism should have added pending promises for every font face."),w[r]))},m.getCurrentLoadFontsPromise=function(){return C},m.resetLoadingTimes=function(){for(const t in F)F[t]=0},m.logLoadingTimes=function(){p.publish("post:fontsLoadEnd",{contextualData1:"edgeFontsElapsedMs:"+F.edge,contextualData2:"standardTypekitFontsElapsedMs:"+F.standardTypekit,contextualData3:"brandkitTypekitFontsElapsedMs:"+F.brandkitTypekit,contextualData4:"brandkitUploadedFontsElapsedMs:"+F.uploaded})},m.load=function(t){t=t||{},O(),r.forEach(Object.keys(w),t=>{delete w[t]});const n=h.Host.fontProvider.getIncludedFonts();for(;n.count>0;)n.remove(n.fontAt(0));const o=h.Host.fontProvider.getSuggestableFonts();for(;o.count>0;)o.remove(o.fontAt(0));C=e.defer();const a=[];return t.loadForEditor&&(a.push(L(P)),a.push(_(t.authoringContext))),e.allSettled(a).done(C.resolve),C.promise},m.setAuthoringContext=function(t){x=t},m.switchBrandContext=function(t){return O(),_(t,[k,"body-font"])},m.registerDownloadedTypekitFontByACFontFace=function(t){const r=t.tkVariationId()||"",n=t.friendlyName(),o=e.defer();return W(r,n).then(t=>{const e=m.registerTypekitFont(t);o.resolve(e)},t=>{o.reject("registerDownloadedTypekitFontByACFontFace: failed to get typekit font metrics",t)}),o.promise},m.registerTypekitFont=function(t){if(!t)return null;const e=t.postScriptName;return e?(t.source=t.syncAvailability.trial?h.FontSource.TYPEKIT_FREE:h.FontSource.TYPEKIT_PREMIUM,h.Host.fontProvider.loadOneFont(t),v[e]=t,h.Host.fontProvider.descriptorForPostScriptName(e)):null},m.getRegisteredTypekitFontPostScriptName=function(t){return y[t]},m}.apply(e,n))||(t.exports=o)},QX4k:function(t,e,r){"use strict";r.r(e),r.d(e,"default",(function(){return l}));var n=r("Uwho"),o=r.n(n),a=r("tY4j"),i=r.n(a),s=r("MGCh");const c=r.n(s).a.channel("util/cp.js");class l{constructor(t){let{cpServiceDomain:e}=t;var r,n,a;a=void 0,(n="cpServiceDomain")in(r=this)?Object.defineProperty(r,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):r[n]=a,this.cpServiceDomain=e||o.a.cps}trackRepeatableActivity(t,e){const r={method:"POST",headers:{"Content-Type":"application/json;charset=UTF-8","X-Api-Key":o.a.cpkey},body:'{ "verb": "'.concat(e,'" }')},n="https://".concat(this.cpServiceDomain,"/api/v2/").concat(o.a.theoc,"/assets/").concat(t,"/activities");window.fetch(n,r).catch(t=>{const e="trackRepeatableActivity: ".concat(t.message," for ").concat(n);c.error(e,t);const r=new Error(e);return Promise.reject(r)})}getAssetMetadata(t){const e="https://".concat(this.cpServiceDomain,"/api/v2/").concat(o.a.theoc,"/assets/").concat(t),r={method:"GET",headers:{"X-Api-Key":o.a.cpkey}};return window.fetch(e,r).then(t=>{if(!t.ok)throw new Error("Error getting CP metadata: [".concat(t.status,"] ").concat(t.statusText));return t.json()}).catch(t=>{c.error("getAssetMetadata: ".concat(t.message," and cpkey is ").concat(o.a.cpkey),t);const r=new Error("getAssetMetadata: ".concat(t.message," for ").concat(e));return Promise.reject(r)})}getAssetMetadataWithRetry(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;return i()(this.getAssetMetadata.bind(this),{maxAttempts:e})(t)}}},RdGa:function(t,e,r){var n;void 0===(n=function(){return function(t){var e={id:t.id,acRoles:t.acRoles,descriptor:t.descriptor,lookupKey:t.lookupKey,getRoles:function(){return e.acRoles},getId:function(){return e.id}};return e}}.apply(e,[]))||(t.exports=n)},T6kn:function(t,e,r){var n,o;n=[r("ApVh"),r("Uwho")],void 0===(o=function(t,e){var r={getBoundingBoxAndMask:function(r,n){return t.getAccessToken().then(t=>{const o={method:"POST",headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json","X-Api-Key":e.cid,"X-Request-Id":n},body:JSON.stringify({source:{bytes:r},saliency:{boundingBoxRectangles:!0,mask:!0}})};return fetch("".concat(e.saliencyServiceEndpoint,"/imageAnalysis"),o).then(t=>{if(!t.ok)throw new Error("Error getting Saliency BoundingBoxAndMask: [".concat(t.status,"] ").concat(t.statusText));return t.json()})})}};return r}.apply(e,n))||(t.exports=o)},TdwW:function(t,e,r){var n,o;n=[r("UzQk")],void 0===(o=function(t){var e={},r=/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/;function n(t){var e=(t=Math.round(t)).toString(16);return 1===e.length?"0"+e:e}e.hex2rgb=function(t){if(t){var e=r.exec(t);return{r:parseInt(e[1],16),g:parseInt(e[2],16),b:parseInt(e[3],16)}}},e.hex2rgba=function(t){var r=e.hex2rgb(t);return r.a=1,r},e.hex2hsv=function(t){return e.rgb2hsv(e.hex2rgb(t))},e.hex2SolidColor=function(r){var n=e.hex2rgba(r);return t.SolidColor.decodeJson({red:n.r/255,green:n.g/255,blue:n.b/255,alpha:n.a||1})},e.hsv2rgb=function(t){var e,r,n,o,a,i,s,c,l=t.h/360,u=t.s/100,d=t.v/100;switch(i=d*(1-u),s=d*(1-(a=6*l-(o=Math.floor(6*l)))*u),c=d*(1-(1-a)*u),o%6){case 0:e=d,r=c,n=i;break;case 1:e=s,r=d,n=i;break;case 2:e=i,r=d,n=c;break;case 3:e=i,r=s,n=d;break;case 4:e=c,r=i,n=d;break;case 5:e=d,r=i,n=s}return{r:Math.floor(255*e),g:Math.floor(255*r),b:Math.floor(255*n)}},e.hsv2hex=function(t){var r=e.hsv2rgb(t);return e.rgb2hex(r)},e.hsl2rgb=function(t){function e(t,e,r){return t>1?t-=1:t<0&&(t+=1),6*t<1?r+6*(e-r)*t:2*t<1?e:3*t<2?r+(e-r)*(2/3-t)*6:r}var r,n,o,a=t.h/360,i=t.s,s=t.l;if(0===i)r=n=o=255*s;else{var c,l,u=a,d=a-1/3;r=255*e(a+1/3,c=s<.5?s*(1+i):s+i-s*i,l=2*s-c),n=255*e(u,c,l),o=255*e(d,c,l)}return{r:r,g:n,b:o}},e.rgb2hex=function(t){return n(t.r)+n(t.g)+n(t.b)},e.rgb2hsl=function(t){var e,r,n=t.r/255,o=t.g/255,a=t.b/255,i=Math.min(n,o,a),s=Math.max(n,o,a),c=(i+s)/2;if(i===s)r=0,e=0;else{var l=s-i;r=c>.5?l/(2-s-i):l/(s+i),e=s===n?(o-a)/l:s===o?2+(a-n)/l:4+(n-o)/l,(e*=60)<0&&(e+=360)}return{h:e,s:r,l:c}},e.rgb2hsv=function(t){var e,r,n,o,a,i=t.r/255,s=t.g/255,c=t.b/255,l=Math.max(i,s,c),u=l-Math.min(i,s,c),d=function(t){return(l-t)/6/u+.5};return 0===u?o=a=0:(a=u/l,e=d(i),r=d(s),n=d(c),i===l?o=n-r:s===l?o=1/3+e-n:c===l&&(o=2/3+r-e),o<0?o+=1:o>1&&(o-=1)),{h:Math.round(360*o),s:Math.round(100*a),v:Math.round(100*l)}},e.rgb2SolidColor=function(e){return t.SolidColor.decodeJson({red:e.red/255,green:e.green/255,blue:e.blue/255,alpha:e&&e.hasOwnProperty&&e.hasOwnProperty("alpha")?e.alpha:1})},e.solidColor2Rgba=function(t){return t?{r:Math.floor(255*t.red),g:Math.floor(255*t.green),b:Math.floor(255*t.blue),a:t.alpha}:t},e.solidColor2TheoColor=function(e,r,n){return t.TheoColor.init_5344(e,r,n)},e.rgb2ValidCSSValues=function(t){return{red:Math.round(t.red),green:Math.round(t.green),blue:Math.round(t.blue),alpha:t.alpha||1}},e.toCSS=function(t){if(!t)return"#000000";if(void 0!==t.red||void 0!==t.r){var r=void 0!==t.red?t.red:t.r,n=void 0!==t.green?t.green:t.g,o=void 0!==t.blue?t.blue:t.b,a=void 0!==t.alpha?t.alpha:t.a,i=e.rgb2ValidCSSValues({red:r,green:n,blue:o,alpha:a});return"rgba("+i.red+","+i.green+","+i.blue+","+(void 0===a?1:a)+")"}return"string"==typeof t&&6===t.length?"#"+t:"#000000"},e.darken=function(t,e){var r=e/100;return t.r=t.r-t.r*r,t.g=t.g-t.g*r,t.b=t.b-t.b*r,t},e.lighten=function(t,e){var r=e/100;return t.r=t.r+(255-t.r)*r,t.g=t.g+(255-t.g)*r,t.b=t.b+(255-t.b)*r,t},e.mixRgb=function(t,e,r){r=0===r?0:r||50,t.a=t.a||1,e.a=e.a||1;var n,o=r/100,a=2*o-1,i=e.a-t.a,s=1-(n=((n=a*i==-1?a:(a+i)/(1+a*i))+1)/2);return{r:Math.floor(e.r*n+t.r*s),g:Math.floor(e.g*n+t.g*s),b:Math.floor(e.b*n+t.b*s),a:e.a*o+t.a*(1-o)}};var o=function(t,e){return 255-(255-t)*(255-e)/255};return e.blendRgb=function(t,e){return{r:o(t.r,e.r),g:o(t.g,e.g),b:o(t.b,e.b)}},e}.apply(e,n))||(t.exports=o)},U44B:function(t,e,r){var n,o;n=[r("xeH2"),r("YLtl"),r("UFvF"),r("e46Y"),r("Uwho"),r("UzQk"),r("oWUw"),r("O0ct"),r("4dd5"),r("TdwW"),r("l+ZV"),r("bBG2"),r("4tSb"),r("T6kn"),r("MGCh"),r("a8ov"),r("N16J"),r("o03S"),r("bnn1"),r("7z7j"),r("Oll2"),r("BmlF"),r("ZVDg"),r("h4Rv"),r("A+mC"),r("pqGD"),r("UNXS"),r("V11p"),r("e733"),r("hbJq"),r("gSEU"),r("kipm"),r("3xm6"),r("mS02")],void 0===(o=function(t,e,n,o,a,i,s,c,l,u,d,h,g,p,f,m,v,y,b,w,C,x,F,T,S,I,k,A,P,E,R,N,D,M){var L,U,B,_,O=m.default,H=h.default,j=d.default,K=i.Host,W=new l,V=f.channel("host"),X=f.channel("core");i.$C.setLog(X);var G,Y=0,q=(new Date).getTime();function z(){try{throw new Error}catch(t){return t.stack}}K.setCoreWrapper=function(t){return K.network.setCoreWrapper(t),U=t},K.setFeatureController=function(t){return L=t},K.isFeatureEnabled=function(t,e){return L?!!L.featureEnabled(t):!!e},K.setPosterView=function(t){return B=t},K.setAuthoringContext=function(t){return _=t},K.logging={newLog:t=>{const e=f.channel(t);return new i.CoreLog(t,{info:(t,r)=>{e.info(r)},warning:(t,r)=>{e.warn(r)},error:(t,r,n,o,a)=>{if(!i.CoreAssert.disableAssertionFailuresForTestingPurposesOnly){const t=o.split("/").pop();e.error("".concat(r," ").concat(t,":").concat(a,":").concat(n))}}})},info:X.info.bind(X),error:X.error.bind(X),warning:X.warn.bind(X),assertFailure:function(t){Y<500&&("not expecting NaN as a coordinate value"===t?this.error("ASSERT FAILED: "+t,{stack:z()}):this.error("ASSERT FAILED: "+t),Y++)},beginTrace:function(t){X.info("beginTrace: ".concat(t))},endTrace:function(){X.info("endTrace")},timeStamp:function(){return(new Date).toISOString()},getCurrentTime:function(){return Date.now()/1e3},platformID:function(){return"web"},additionalPlatformInfo:function(){return s.name+" "+s.fullVersion},getObjectClassNameForSingletonTracking:function(t){return t&&t.constructor&&t.constructor.name?t.constructor.name:"??"},logToAnalytics:function(t,e){H.publish(t,e)},logToNewRelic:function(t,e){o&&o.addPageAction("".concat("post_web_").concat(t),e)}},K.persistUtils=new S.HostPersistUtilsImpl,K.resourceUtils=new I.HostResourceUtilsImpl,K.network=new k.HostNetworkImpl,K.dataFactory=new R.HostDataFactoryImpl,K.featureFlags={isPremiumThemesUnlocked:function(){return!0}};var J,Q,Z,$,tt,et,rt,nt,ot=[];function at(t,e){this.corePromise=t,this.timeout=e,this.message="ASYNC_TEST_CASE"}return K.pathUtils={cacheArtworkForURL:function(t,e){return ot.length>10&&ot.pop(),ot.splice(0,0,{url:t,artwork:e}),e},artworkFromURL:function(t,e){var r=ot.find(e=>e.url===t);if(r)return ot.splice(ot.indexOf(r),1),ot.splice(0,0,r),r.artwork;var n=new XMLHttpRequest;n.open("GET",t,!1),n.send();try{var o=i.SVGParserUtils.theoArtworkFromSVGData(n.responseText,e);return o?(this.cacheArtworkForURL(t,o),o):(i.CoreAssert.fail("SVGParserUtils.theoArtworkFromSVGData returned null for ".concat(t)),null)}catch(e){return i.CoreAssert.fail("SVGParserUtils.theoArtworkFromSVGData threw. Url - ".concat(t)),null}},parseSVGXMLData:function(t,e){var r=new DOMParser,n=r.parseFromString(t,"text/xml");n.rootElement||(n=r.parseFromString(t,"image/svg+xml")),function t(r){for(var n=r.localName.toLowerCase(),o={},a=0;a<r.attributes.length;++a){var i=r.attributes[a];i.specified&&(o[i.name]=i.value)}e.beginElement(n,o);var s=r.textContent;s&&e.handleStringValue(s);for(var c=0;c<r.childNodes.length;c++)r.childNodes[c].nodeType===Node.ELEMENT_NODE&&t(r.childNodes[c]);e.endElement(n)}(n.rootElement)},parseStringToDouble:function(t){const e=parseFloat(t);return isNaN(e)&&i.CoreAssert.fail("parsing string ".concat(t," resulted in NaN")),e},matchesForRegexInString:function(t,e){var r=new RegExp(t,"g");return e.match(r)||[]},firstMatchForRegexInString:function(t,e){var r=new RegExp(t,"g").exec(e);return r?r[0]:""},absolutePathFromURL:function(t){return t},lastPathComponentFromURL:function(t){const e=t.split("/");return e[e.length-1]}},K.learning={statics:{cache:{}},loadLayoutSuggestionModel:function(){var t=g,e=new i.TheoMatrix([t.featureScalingMean]),r=new i.TheoMatrix([t.featureScalingStd]),n=t.labels,o=[];for(var a in t.layoutModels)if(t.layoutModels.hasOwnProperty(a)){var s=t.layoutModels[a],c=s.range,l=new i.TheoMatrix(s.coef),u=new i.TheoMatrix([s.intercept]);o.push(new i.RangedLayoutLinearModel(c[0],c[1],l,u))}return new i.LayoutSuggestionsLinearModel(e,r,n,o)},loadNNJSON:function(t){var e;return"Font"===t?e=v:"Shape"===t?e=y:"TextRole"===t?e=b:"ShapeRole"===t?e=w:"VisualGrouping"===t&&(e=C),e},loadFontSuggestionLinearModel:function(){},updateFontSuggestionLinearModel:function(t){},updateFontSuggestionNNModel:function(t){},loadSuggestionNNModel:function(){return null}},K.fontProvider=(J=new i.FontDescriptor(c.getDefaultFont()),Q=new i.OrderedFontSet,Z=new i.OrderedFontSet,{loadOneFont:function(t){V.assert(!!t,"Invalid fontData."),Q.find((function(e){return e.postScriptName===t.postScriptName}))&&V.info("Font is already loaded.",{font:t.postScriptName});var e=new i.FontDescriptor(t);e.availability=i.FontAvailability.LOADED,Q.append(e),(!0===t.isPublic||L.featureEnabled("post-new-fonts"))&&Z.append(e)},descriptorForPostScriptName:function(t,e){var r=Q.find((function(e){return e.postScriptName===t}));return r||(t===J.postScriptName?J:K.textModelUtils.defaultFont())},getIncludedFonts:function(t){return Q},getSuggestableFonts:function(t){return Z},loadFont:function(t,e,r){},refreshBrandkitFonts:()=>{},registerBrandFonts:()=>{}}),K.textModelUtils=($=K.fontProvider,tt=document.createElement("canvas").getContext("2d"),{defaultColor:function(){return i.SolidColor.BLACK},defaultFont:function(){return $.descriptorForPostScriptName("SourceSansPro-Black")},defaultFontSize:function(){return 12},measureInkBounds:function(t,e,r){if("\n"===t)return i.TheoRect.Zero;var n=c.getFontData(e.postScriptName)||this.defaultFont();tt.font=(n.style||"")+" "+(n.weight||"normal")+" "+r+"px "+(n.cssName||n.family);var o=tt.measureText(t).width,a=r*n.capRatio;return new i.TheoRect(0,0,o,a)},measureInkBoundsWithTracking:function(t,e,r,n){if("\n"===t)return i.TheoRect.Zero;var o=c.getFontData(e.postScriptName)||this.defaultFont();tt.font=(o.style||"")+" "+(o.weight||"normal")+" "+r+"px "+(o.cssName||o.family);var a=tt.measureText(t).width,s=t.length-1;"â€«"===t.charAt(0)&&(s-=1),a+=s*n*r;var l=r*o.capRatio;return new i.TheoRect(0,0,a,l)},getGlyphPositions:function(t,e,r){var n=c.getFontData(e.postScriptName)||this.defaultFont();tt.font=(n.style||"")+" "+(n.weight||"normal")+" "+r+"px "+(n.cssName||n.family);for(var o=tt.measureText(t).width,a=t,i=[0],s=0;s<t.length;s++){a=a.substr(1);var l=o-tt.measureText(a).width;i.push(l)}return i},fontHasClockwiseOutlines:function(t){return!0},textOutlines:function(){return null},rewindPath:function(t){return null},useOutlinesForKnockouts:function(t){return!1},usePGMRenderer:function(t){return!0},measureBaselineBounds:function(t,e,r,n){return this.measureInkBoundsWithTracking(t,e,r,n)},calcFontMetrics:function(t,e,r){const n=document.createElement("canvas");document.body.appendChild(n);const o=n.getContext("2d"),a=r.font,s=r.fontSize,l=c.getFontData(a.postScriptName);o.font="".concat(l.style||""," ").concat(l.weight||"normal"," ").concat(s,"px ").concat(l.cssName||l.family),n.style.font=o.font;const u=o.measureTextMetrics(t),d=o.measureText(i.AutoTextLayoutStrategy.SPACER_CHAR).width,h=o.measureTextMetrics("acemnorsuvwxz").ascent,g=o.measureTextMetrics("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789");return n.parentNode.removeChild(n),new i.TextToken(t,e,new i.TheoRect(0,0,u.width,u.height),u.ascent-h/2,d,u.ascent,u.descent,1.2*g.height,u.ascent-s*(l.capRatio-l.baselineOffsetRatio),0)},isTextRightToLeft:function(t){return!1},splitOnWhiteSpace:function(t){for(var e=t.split(" "),r=[],n=0,o=0;o<e.length;o++){var a=e[o];if(0!==a.length){for(var i,s=t.indexOf(a),c=/\r|\n/g,l=-1,u=-1;null!=(i=c.exec(a));)l>-1?i.index!==u&&(r.push({start:s+n+l,length:u-l}),r.push({start:s+n+u,length:i.index-u}),l=i.index):(l=i.index)>0&&r.push({start:s+n,length:l}),u=c.lastIndex;l>-1?(r.push({start:s+l+n,length:u-l}),u<a.length&&r.push({start:s+u+n,length:a.length-u})):r.push({start:s+n,length:a.length}),n+=s+a.length,t=t.substr(s+a.length)}}return r},getWordClassRanges:function(){return[]}}),K.imageAnalysis=(et={},rt=!1,(nt=function(t,e,r){this.url=t,this.origUrl=r,this.isLoaded=!1,this.containsAlpha=e,this.uploadImgWidth=176,this.uploadImgHeight=176,this.img=null,this.image_scale_x_ratio=0,this.image_scale_y_ratio=0,this.saliencyImage=null,this.saliencyIntegral=[],this.saliencyLoaded=!1,this.imageIntegral=null,this.trimmedBounds=null,t&&(this.imageLoadedPromise=j.load(t).then(function(t){if(this.img=t,this.image_scale_x_ratio=t.width/this.uploadImgWidth,this.image_scale_y_ratio=t.height/this.uploadImgHeight,t instanceof HTMLImageElement){var e=this.getRGBAIntegralImageAndTrimmedBounds(t,this.uploadImgWidth,this.uploadImgHeight);this.imageIntegral=e.imageAverages,this.trimmedBounds=e.trimmedBounds}this.focus=null,this.isLoaded=!0}.bind(this)))})._implements=t=>"HostImage"===t,nt.prototype.computeSaliency=function(){if(rt){const t={saliency:{boundingBoxRectangles:[]}};n.all([this.setFocusRegion(t.saliency.boundingBoxRectangles),this.setSaliencyImage(t.saliency.mask)]).finally(function(){this.saliencyLoaded=!0}.bind(this))}else void 0===this.saliencyLoadedPromise&&void 0!==this.imageLoadedPromise&&(this.saliencyLoadedPromise=this.imageLoadedPromise.then(function(){var t=document.createElement("canvas"),e=t.getContext("2d");t.width=this.uploadImgWidth,t.height=this.uploadImgHeight,e.drawImage(this.img,0,0,this.img.width,this.img.height,0,0,this.uploadImgWidth,this.uploadImgHeight);var r=t.toDataURL("image/png").replace("data:image/png;base64,",""),o=K.resourceUtils.makeGUID();return p.getBoundingBoxAndMask(r,o).timeout(5e3,"SALIENCY_TIMEOUT").catch((function(t){return"SALIENCY_TIMEOUT"===t.message?V.warn("Saliency.getBoundingBoxAndMask Timed out in 5000ms",{requestId:o}):V.warn("Saliency.getBoundingBoxAndMask error:",{err:t,requestId:o}),{saliency:{boundingBoxRectangles:[]}}})).then(function(t){return n.all([this.setFocusRegion(t.saliency.boundingBoxRectangles),this.setSaliencyImage(t.saliency.mask)])}.bind(this)).finally(function(){this.saliencyLoaded=!0}.bind(this))}.bind(this)))},nt.prototype.getBoxAverage=function(t,e){Number.isInteger(t.minX)&&Number.isInteger(t.minY)&&Number.isInteger(t.maxX)&&Number.isInteger(t.maxY)||(t.minX=Math.round(t.minX),t.minY=Math.round(t.minY),t.maxX=Math.round(t.maxX),t.maxY=Math.round(t.maxY));var r=this.saliencyIntegral[0].length,n=this.saliencyIntegral.length;if(t.minX>r-2||t.minY>n-2)return 0;t.maxX>=r&&(t.maxX=r-1),t.maxY>=n&&(t.maxY=n-1);var o=(t.maxX-t.minX)*(t.maxY-t.minY),a=this.saliencyIntegral[t.minY][t.minX],i=this.saliencyIntegral[t.minY][t.maxX],s=this.saliencyIntegral[t.maxY][t.minX],c=[this.saliencyIntegral[t.maxY][t.maxX]-s-i+a];return e?c[0]/o:c[0]/255/o},nt.prototype.getIntegralImage=function(t,e,r){var n=document.createElement("canvas"),o=n.getContext("2d");n.width=e,n.height=r,o.drawImage(t,0,0,t.width,t.height,0,0,e,r);var a=[];function i(t,e,r,n,o){var a=r*e+n,i=t[a-e]||0,s=t[a-1]||0,c=t[a-e-1]||0;a%e==0&&(s=0,c=0);var l=i+s+o-c;t[a]=l}!function(t,e,r,n){if(arguments.length<4)throw new Error("You should specify one output array: sum");for(var o=0;o<r;o++)for(var a=0;a<e;a++){var s=t[o*e*4+4*a];n&&i(n,e,o,a,s)}}(o.getImageData(0,0,e,r).data,e,r,a);for(var s=[],c=0;c<r;c++){s[c]=[];for(var l=0;l<e;l++){var u=c*e+l;s[c][l]=a[u]}}return s},nt.prototype.getRGBAIntegralImageAndTrimmedBounds=function(t,e,r){var n=document.createElement("canvas"),o=n.getContext("2d");n.width=e,n.height=r,o.drawImage(t,0,0,t.width,t.height,0,0,e,r);for(var a=o.getImageData(0,0,e,r).data,s=[],c=e,l=0,u=r,d=0,h=0;h<e;h++)for(var g=0;g<r;g++)for(var p=0;p<4;p++){var f=h>0&&g>0?s[(g-1)*e*4+4*(h-1)+p]:0,m=g>0?s[(g-1)*e*4+4*h+p]:0,v=h>0?s[g*e*4+4*(h-1)+p]:0,y=a[g*e*4+4*h+p];s[g*e*4+4*h+p]=y+m+v-f,y>20&&p<3&&(c=Math.min(c,h),l=Math.max(l,h),u=Math.min(u,g),d=Math.max(d,g))}var b=null;return c<l&&u<d&&(b=i.TheoRect.fromXYXY(Math.round(c*this.image_scale_x_ratio),u*this.image_scale_y_ratio,l*this.image_scale_x_ratio,d*this.image_scale_y_ratio).rounded()),{imageAverages:s,trimmedBounds:b}},nt.prototype.convertBase64ToImageElement=function(t,e){for(var r=n.defer(),o=atob(t),a=o.length,i=Math.ceil(a/1024),s=[],c=0;c<i;++c){for(var l=1024*c,u=Math.min(l+1024,a),d=[],h=l;h<u;++h)d.push(o[h].charCodeAt(0));s.push(new Uint8Array(d))}var g=new Blob(s,{type:e||""}),p=(window.URL||window.webkitURL).createObjectURL(g),f=new Image;return f.src=p,f.onload=function(){r.resolve(f)},f.onerror=function(t){r.reject(t)},r.promise},nt.prototype.setFocusRegion=function(t){if(t&&t.length>0){var e=t[0];this.focus=i.TheoRect.fromXYWH(e.x/this.uploadImgWidth,e.y/this.uploadImgHeight,e.width/this.uploadImgWidth,e.height/this.uploadImgHeight)}else{V.warn("Did not find a salient region. Using fallback focus.");var r=this.uploadImgWidth*this.image_scale_x_ratio,n=this.uploadImgHeight*this.image_scale_y_ratio;this.focus=r>n?i.TheoRect.fromXYWH((r-n)/2/r,0,n/r,1):i.TheoRect.fromXYWH(0,(n-r)/2/n,1,r/n)}},nt.prototype.setSaliencyImage=function(t){return t&&""!==t?this.convertBase64ToImageElement(t,"image/png").then(function(t){this.saliencyImage=t,this.saliencyIntegral=this.getIntegralImage(t,t.width,t.height)}.bind(this)):n.resolve()},nt.prototype.loaded=function(t){return this.isLoaded},nt.prototype.whenLoaded=function(t){this.isLoaded?t():this.imageLoadedPromise&&this.imageLoadedPromise.then(function(){!1===this.isLoaded&&V.error("ERROR: imageLoadedPromise resolved but image hasn't finished loading."),t()}.bind(this))},nt.prototype.whenAsyncFeaturesLoaded=function(t){this.saliencyLoaded?t():void 0===this.saliencyLoadedPromise?this.computeSaliency():this.saliencyLoadedPromise.then(function(){!1===this.saliencyLoaded&&V.error("ERROR: saliencyLoadedPromise resolved but image hasn't finished loading."),t()}.bind(this))},nt.prototype.getFocus=function(){return this.focus},nt.prototype.getTrimmedBounds=function(){return this.trimmedBounds},nt.prototype.getWidth=function(){return this.img?this.img.width:0},nt.prototype.getHeight=function(){return this.img?this.img.height:0},nt.prototype.getUrl=function(){return this.url},nt.prototype.getImageLoadedPromise=function(){return this.imageLoadedPromise},nt.prototype.getSaliencyLoadedPromise=function(){return this.saliencyLoadedPromise},nt.prototype.getSaliencyData=function(t,e){if(null!=this.saliencyImage){var r=document.createElement("canvas"),n=r.getContext("2d");r.width=t,r.height=e,n.drawImage(this.saliencyImage,0,0,this.saliencyImage.width,this.saliencyImage.height,0,0,t,e);for(var o=n.getImageData(0,0,t,e).data,a=[],i=0;i<o.length;i+=4)a.push(o[i]);return a}return[]},nt.prototype.getEdgeData=function(t,e){return[]},nt.prototype.getImageRepresentationData=function(t,e){if(this.img){const o=e>0?e/Math.max(e,this.img.width,this.img.height):1,a=this.img.width*o,s=this.img.height*o;var r=document.createElement("canvas"),n=r.getContext("2d");return r.width=a,r.height=s,n.drawImage(this.img,0,0,this.img.width,this.img.height,0,0,a,s),new i.CorePromise(e=>{r.toBlob((function(r){e(new A.HostDataImpl(r,t))}),t)})}return i.CorePromise.resolve(null)},nt.prototype.getStoragePath=function(t){const e=t.document.parent;return e?"assets/adobe-theo/".concat(e.id,"/").concat(t.id):null},nt.prototype.hasAlpha=function(){return this.containsAlpha},nt.prototype.getImageColorData=function(t){return[]},nt.prototype.getImageColors=function(t){if(!this.img||!this.img.src)return[i.SolidColor.BLACK,i.SolidColor.WHITE];var e;try{e=W.getPalette(this.img,t)}catch(t){return V.error("Failed to get image colors using ColorThief: ".concat(t)),[i.SolidColor.BLACK,i.SolidColor.WHITE]}return e.map((function(t){return u.hex2SolidColor(u.rgb2hex({r:t[0],g:t[1],b:t[2]}))}))},nt.prototype.getAverageEdge=function(t){if(t.maxX-t.minX<=0||t.maxY-t.minY<=0)return 0;var e=t.multiplyXY(1/this.image_scale_x_ratio,1/this.image_scale_y_ratio);return this.saliencyIntegral.length>0?this.getBoxAverage(e,!1):0},nt.prototype.getFilterColor=function(t,e){return i.SolidColor.BLACK},nt.prototype.getAverageColorBackup=function(t,e){if(!B)return i.SolidColor.BLACK;if(U){var r=U.getImageFormaForURL(this.origUrl);if(r){for(var n=r.totalPlacement,o=t.transform(n),a=[o.evalXY(.1,.1),o.evalXY(.1,.9),o.evalXY(.3,.3),o.evalXY(.3,.7),o.evalXY(.5,.5),o.evalXY(.7,.3),o.evalXY(.7,.7),o.evalXY(.9,.9),o.evalXY(.9,.1)],s=0,c=0,l=0,u=0,d=0,h=a.length-1;h>=0;h--){var g=a[h],p=B.getImageColorAtPoint(g);p&&p.a>0&&(s++,c+=p.r/255,l+=p.g/255,u+=p.b/255,d+=p.a)}return s<=0?i.SolidColor.BLACK:new i.SolidColor(c/s,l/s,u/s,d/s)}}},nt.prototype.getAverageColor=function(t,e){if(this.imageIntegral){var r=t.multiplyXY(1/this.image_scale_x_ratio,1/this.image_scale_y_ratio);const p=this.uploadImgWidth,f=this.uploadImgHeight;var n=Math.round(Math.min(Math.max(r.minY,0),f-1)),o=Math.round(Math.max(Math.min(r.maxY,f-1),0)),a=Math.round(Math.min(Math.max(r.minX,0),p-1)),s=Math.round(Math.max(Math.min(r.maxX,p-1),0));if(n===o&&(o+1<=f?o+=1:n-1>=0&&(n-=1)),a===s&&(s+1<=p?s+=1:a-1>=0&&(a-=1)),a>=s||n>=o||n<0||a<0||s>=p||o>=f)return this.getAverageColorBackup(t,e);for(var c=[],l=0;l<4;l++){const t=this.imageIntegral[n*p*4+4*a+l],e=this.imageIntegral[n*p*4+4*s+l],r=this.imageIntegral[o*p*4+4*a+l],i=this.imageIntegral[o*p*4+4*s+l];c[l]=i+t-e-r}var u=Math.min(Math.max(c[0]/c[3],0),1),d=Math.min(Math.max(c[1]/c[3],0),1),h=Math.min(Math.max(c[2]/c[3],0),1),g=1;return 0===c[3]&&(g=0,u=0,d=0,h=0),new i.SolidColor(u,d,h,g)}return this.getAverageColorBackup(t,e)},nt.prototype.getFaceIntersections=function(t){return[]},{updateHostImageCacheKey:function(t,e){void 0!==et[t]&&(et[e]=et[t],delete et[t])},createHostImage:function(t,e,r){var n=O.decodeUrl(t);if(void 0!==et[n])return et[n];var o=new nt(n,e,t);return et[n]=o,r&&o.computeSaliency(),o},setShapeFormaTransparencyMask:function(t,e){if("Shape"!==t.kind)return null;var r=document.createElement("canvas"),n=r.getContext("2d"),o=t.page.document.beginTransaction("calculateTransparencyMask");t.style.colors.setColor(i.ColorRole.FieldPrimary,i.SolidColor.WHITE);var a=e/(t.bounds.aspectRatio>1?t.bounds.width:t.bounds.height);t.parent.placement=i.Matrix2D.Identity,t.placement=i.Matrix2D.scalingXY(a,a),t.move(i.Matrix2D.translationXY(-t.finalFrame.origin.x,-t.finalFrame.origin.y));var s=Math.round(t.frame.width),c=Math.round(t.frame.height);r.width=s,r.height=c,new x({documentSize:{width:s,height:c},renderScale:1,data:{forma:t,formaID:t.formaID,isImageBackgroundShape:!1,type:"shape"}}).renderInto(n,1,1,null);for(var l=n.getImageData(0,0,s,c).data,u=[],d=3;d<l.length;d+=4)u.push(l[d]/255);o.rollback(),t.maskImage=i.TheoMatrix.createMatrixFromList(u,s,c)},getSaliencyAPIEndpoint:function(){const t=a.saliencyServiceEndpoint||"";return i.CorePromise.resolve(t)},getSaliencyAPIKey:function(){const t=a.sparkContentSearchApiKey||"";return i.CorePromise.resolve(t)},setRunningActionTests:function(t){rt=t}}),K.brandkitManager={brandkitForDocument:()=>_,brandkitForElement:function(){return this.fakeBrandkitForElementsForTesting?this.fakeBrandkitForElementsForTesting:_},authoringContextManager:{authoringContext:()=>_},isBrandkitEnabled:!0,activateBrand:t=>{i.MultiBrandFacade.setActiveBrandkitID(t),U&&U.handleCurrentBrandChanged(t)},getFilePathForEncodedURL:()=>{},sendDefaultBrandChangedNotification:()=>{},sendActiveBrandChangedNotification:()=>{}},K.async={startTimer:function(t,e){var r=setTimeout(e,1e3*t);return{cancel:function(){clearTimeout(r)}}},postOnMainThread:function(t,e){setTimeout(e,1e3*t)},postOnWorkerThread:function(t,e){setTimeout(e,0)},getSystemUptimeInSeconds:function(){return((new Date).getTime()-q)/1e3},newLock:function(){return{runInLock:function(t){t()}}}},K.factories={constructDocumentStateManager:function(t){return t.database}},K.platform={isWeb:!0,isIOS:!1,isAndroid:!1,isDesktop:!0,isMobile:!1,isService:!1},K.exception=new E.HostExceptionImpl,K.testing={urlForTestAsset:function(t){return t},throwAsyncTestCase:function(t,e){throw new at(t,e)},setNetworkMock:function(t){K.network=t,t.setCoreWrapper||(t.setCoreWrapper=t=>{})}},K.actionTesting=function(){function e(t){return"https://s3.amazonaws.com/post-renderer-prototype/ActionTestMediaAssets/"+function(t){return t.substring(t.lastIndexOf("/")+1)}(t)}return{urlForAsset:function(t){return e(t)},imageDataForAsset:function(t){var r=t.substring(t.lastIndexOf(".")),n=e(t);return".jpg"===r||".jpeg"===r||".png"===r?j.load(n).then(t=>new i.ActionTestImageData(e(t.src),t.width,t.height)).catch(()=>null):null},templateForDocument:function(e){var r=n.defer(),o={aspectRatio:U.getPageAspectRatio(),wordCount:U.getLockupWordCount(),iconCount:U.getIconCount(),imageCount:U.getPotentialBackgroundImageCount()};return t.get("/api/post/v1/designthemes?aspectRatio="+o.aspectRatio+"&wordCount="+o.wordCount.join(",")+"&iconCount="+o.iconCount+"&imageCount="+o.imageCount).done((function(e){var n=e.items[0];t.get(n.manifestUrl,(function(t){U.getTemporaryDocumentWithFontsLoaded(t).then((function(t){r.resolve(t)}))}))})),r.promise},writeJsonToFile:function(t,e){}}}(),K.crypto=new P.HostCryptoImpl,K.schema=function(){var t=/^\.\/schemata\/([0-9]*)\/(.*)\.json/,e={},n={},o={},a={},s=[];function c(t){for(var e=s.length-1;e>=0;e--)if(s[e]<=t)return s[e];return s[0]}function l(t){const n=c(t).toString();var o={};for(var a in e[n])if(e[n].hasOwnProperty(a)){var i=a+".json";o[i]=r("cyUI")("./"+n+"/"+i)}return o}i.$Resources.schema.forEach((function(r){var n=r.path.match(t);if(n&&3===n.length){var o=r.path.replace("./","./js/"),a=n[1],i=n[2];e[a]||(e[a]={},s.push(parseInt(a,10))),e[a][i]=o}})),s.sort((function(t,e){return t-e}));var u=s[s.length-1];for(var d in n[u]=l(u),n[u])if(n[u].hasOwnProperty(d))for(var h in n[u][d].definitions)n[u][d].definitions.hasOwnProperty(h)&&(o[h]=d,a[h]=n[u][d].definitions[h]);return{rootFile:"Root.json",getRoot(t){var e=c(t);return n[e.toString()]||(n[e]=l(e)),n[e.toString()]["Root.json"]},getFiles(t){var e=c(t);return n[e.toString()]||(n[e]=l(e)),n[e.toString()]},matches:(t,e)=>new RegExp(e).test(t)}}(),K.locale={getDecimalSeparator:function(){if(!G||""===G){const e=D.sparkSelectedLocale;var t=1.1.toLocaleString(e).replace(/[0-9]+/g,"");t&&""!==t||(t="."),G=t}return G},formatNumber:function(t,e){var r=i.$C.toString("%."+e+"f",t);const n=this.getDecimalSeparator();return(r=r.replace(".",n)).includes(n)&&(r=r.replace(/0+$/,"")),r.endsWith(n)&&(r=r.substr(0,r.length-1)),r},convertStringToNumber:function(t){const e=this.getDecimalSeparator();var r=t.replace(e,".");return parseFloat(r)}},K.asyncPersist={saveStateAsync:function(t){return U.triggerPlatformSave(t)}},K.videoUtils=new N.HostVideoUtilsImpl,K.initialized(),K}.apply(e,n))||(t.exports=o)},UNXS:function(t,e,r){"use strict";r.r(e),r.d(e,"HostNetworkImpl",(function(){return p}));var n=r("UzQk"),o=r("YLtl"),a=r.n(o),i=r("UFvF"),s=r.n(i),c=r("ApVh"),l=r("V11p"),u=r("e733"),d=r("ZLL8"),h=r.n(d);function g(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}class p{constructor(){g(this,"_crypto",void 0),g(this,"_coreWrapper",void 0),this._crypto=new u.HostCryptoImpl,this._coreWrapper=null}setCoreWrapper(t){this._coreWrapper=t}request(t){const e=s.a.defer();navigator.onLine||e.reject(new n.HostNetworkError(n.HostNetworkErrorType.NoInternetConnection,null,n.ErrorMessageConstants.kNoNetworkConnection,null));const r=this,o=new Map([[n.HostNetworkRequestMethod.post,"POST"],[n.HostNetworkRequestMethod.put,"PUT"],[n.HostNetworkRequestMethod.patch,"PATCH"],[n.HostNetworkRequestMethod.head,"HEAD"],[n.HostNetworkRequestMethod.get,"GET"],[n.HostNetworkRequestMethod.delete,"DELETE"]]),i=new XMLHttpRequest;if(n.CoreAssert.isTrue(o.has(t.method),"Sorry, HostNetwork does not support ".concat(t.method," yet")),i.open(o.get(t.method)||"GET",t.url,!0),a.a.forEach(t.headers,(t,e)=>i.setRequestHeader(e,t)),i.responseType="blob",i.timeout=1e3*t.timeout,i.onload=function(){let t=null;const o=this.getAllResponseHeaders();if(o&&(t=o.trim().split(/[\r\n]+/).reduce((t,e)=>{const[r,...n]=e.split(":");return t[r.trim().toLowerCase()]=n.join(":").trim(),t},{})),this.status>=400)return void e.reject(r.generateErrorResponse(this.status,t));const a=t&&t["content-type"]||"text/html; charset=utf-8",i=new l.HostDataImpl(this.response,a),[s,c]=a.split(/;\s*/g),u=c?c.replace("charset=",""):null;e.resolve(new n.HostNetworkResponse(this.status,s,u,i,t))},i.onerror=t=>{e.reject(new n.HostNetworkError(n.HostNetworkErrorType.Unknown,null,n.ErrorMessageConstants.kUnknownError,null))},i.ontimeout=()=>{e.reject(new n.HostNetworkError(n.HostNetworkErrorType.Timeout,null,n.ErrorMessageConstants.kRequestTimedout,null))},t.method===n.HostNetworkRequestMethod.post||t.method===n.HostNetworkRequestMethod.put||t.method===n.HostNetworkRequestMethod.patch){const e=t.data;e instanceof l.HostDataImpl?i.send(e.data):e instanceof l.HostFormDataImpl?i.send(e.data):e instanceof l.HostStringDataImpl?i.send(e.data):(n.CoreAssert.fail("POST request with unknown data type"),i.send())}else i.send();return new n.CorePromise((t,r)=>{e.promise.then(e=>t(e)).catch(t=>r(t))})}generateErrorResponse(t,e){switch(!0){case 401===t:return new n.HostNetworkError(n.HostNetworkErrorType.Authorization,t,"".concat(t,": ").concat(n.ErrorMessageConstants.kAuthError),e);case 403===t:case 404===t:return new n.HostNetworkError(n.HostNetworkErrorType.NotFound,t,"".concat(t,": ").concat(n.ErrorMessageConstants.kServiceNotFound),e);case t>=500&&t<=520:return new n.HostNetworkError(n.HostNetworkErrorType.ServiceUnavailable,t,"".concat(t,": ").concat(n.ErrorMessageConstants.kServiceUnavailableError),e);default:return new n.HostNetworkError(n.HostNetworkErrorType.Unknown,t,n.ErrorMessageConstants.kUnknownError,e)}}getAuthToken(){return new n.CorePromise((t,e)=>{c.getAccessToken().then(e=>t(e)).catch(t=>e(t))})}async getArrayBufferFrom(t){const e=s.a.defer(),r=new FileReader;return r.onload=()=>{e.resolve(r.result)},r.readAsArrayBuffer(t),e.promise}saveImageComponent(t,e){const{data:r}=t;if(!this._coreWrapper)return n.CoreAssert.isTrue(null!=this._coreWrapper,"Invalid core instance."),n.CorePromise.reject(new Error("Invalid core instance."));const o=this._coreWrapper.saveImageComponent(r,e),a=Promise.all([o,this.getArrayBufferFrom(r)]).then(t=>{const[{component:r,encodedUrl:o},a]=t,{id:i}=r,s=i,c=this._crypto.md5((new TextDecoder).decode(a));return new n.HostComponentResponse(o,i,s,e||"",c,"")});return h.a.toCorePromise(a)}}},V11p:function(t,e,r){"use strict";r.r(e),r.d(e,"HostDataImpl",(function(){return a})),r.d(e,"HostFormDataImpl",(function(){return i})),r.d(e,"HostStringDataImpl",(function(){return s}));var n=r("UzQk");function o(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}class a{static _implements(t){return"HostDataProtocol"===t}constructor(t,e){o(this,"_data",void 0),o(this,"_contentType",void 0),this._data=t,this._contentType=e}get data(){return this._data}get contentType(){return this._contentType}getLength(){return this.data.size}asUTF8String(){return new n.CorePromise((t,e)=>{const r=new FileReader;r.addEventListener("loadend",()=>{t(String(r.result))}),r.addEventListener("error",()=>{e("Failed returning data as UTF-8 string.")}),r.readAsText(this._data,"utf-8")})}asJSON(){return this.asUTF8String().then(t=>{try{return JSON.parse(t)}catch(t){return n.CorePromise.reject("Failed parsing contents as JSON.")}})}}class i{static _implements(t){return"HostDataProtocol"===t}constructor(t,e){o(this,"_data",void 0),o(this,"_contentType",void 0),this._data=t,this._contentType=e}get data(){return this._data}get contentType(){return this._contentType}getLength(){return n.CoreAssert.fail("HostFormDataImpl does not support getLength"),0}asUTF8String(){return n.CorePromise.reject("HostFormDataImpl does not support asUTF8String")}asJSON(){return n.CorePromise.reject("HostFormDataImpl does not support asJSON")}}class s{static _implements(t){return"HostDataProtocol"===t}constructor(t,e){o(this,"_data",void 0),o(this,"_contentType",void 0),this._data=t,this._contentType=e}get data(){return this._data}get contentType(){return this._contentType}getLength(){return this._data.length}asUTF8String(){return n.CorePromise.resolve(this._data)}asJSON(){try{return n.CorePromise.resolve(JSON.parse(this._data))}catch(t){return n.CorePromise.reject("Failed parsing contents as JSON.")}}}},ZLL8:function(t,e,r){var n,o;n=[r("YLtl"),r("UFvF"),r("UzQk")],void 0===(o=function(t,e,r){var n={doSerial:function(t){var r=[];return t.forEach((function(t){e.isPromise(t)?r.push((function(){return e.promise((function(e){t.then(e)}))})):r.push(t)})),r.reduce(e.when,e([]))},delay:function(r){var n=[].slice.apply(arguments);n.shift();var o=e.defer();return t.delay((function(){o.resolve.apply(o,n)}),r),o.promise},delayThen:function(r){return function(){var n=[].slice.apply(arguments),o=e.defer();return t.delay((function(){o.resolve.apply(o,n)}),r),o.promise}},toCorePromise:function(t){return new r.CorePromise((e,r)=>{t.then(t=>e(t)).catch(t=>r(t))})},fromCorePromise:function(t){return new Promise((e,r)=>{t.then(t=>e(t)).catch(t=>r(t))})}};return n}.apply(e,n))||(t.exports=o)},a65H:function(t,e,r){var n;void 0===(n=function(){return function(t){var e={id:t.id,acRoles:t.acRoles,acName:t.acName,url:t.url,fullResUrl:t.fullResUrl,pixelWidth:t.pixelWidth,pixelHeight:t.pixelHeight,mimeType:t.mimeType,getRoles:function(){return e.acRoles},getId:function(){return e.id}};return e}}.apply(e,[]))||(t.exports=n)},a8ov:function(t,e,r){"use strict";r.r(e),r.d(e,"default",(function(){return i}));var n=r("UzQk");var o=r("+Ltv");const a={COMPONENT:"component:",CP:"cp:",AUTHORING_CONTEXT:"ac:"};class i{static getCCUrl(t,e,r,n,a){var i="/image_assets/".concat(t,"/").concat(e,"/?asset_id=").concat(r,"&size=").concat(o.maxImageSizeFromStorage);return n&&(i+="&img_etag=".concat(n)),a&&(i+="&mime=".concat(a)),i}static getImageUrl(t,e,r){return i.getCCUrl("adobe-theo",t,e,null,r)}static getAuthoringContextUrl(t,e,r,n){return i.getCCUrl("adobe-spark-authoring-contexts",t,e,r,n)}static isEncodedComponentUrl(t){return!!t&&0===t.indexOf(a.COMPONENT)}static encodeComponentUrl(t,e,r){const n=r?"/"+r.replace("/","+"):"";return"".concat(a.COMPONENT).concat(t,"/").concat(e).concat(n)}static encodeDesignFilterComponentUrl(){return"do-not-load"}static decodeComponentUrlParameters(t){var e,r=t.substring(a.COMPONENT.length).split("/");"logo"===r[2]&&(e=!0,r.splice(2,1));var n=r.length>=3?r[2].replace("+","/"):null;return{docId:r[0],componentId:r[1],mimeType:!n&&e?"image/png":n}}static isEncodedCPUrl(t){return!!t&&0===t.indexOf(a.CP)}static encodeCPUrl(t,e){if(n.CoreAssert.isTrue(!e||0===e.indexOf("/"),"URLBuilder.encodeCPUrl: absolute path to component must begin with a slash"),0===e.indexOf("/")){let t=e.split("/");"original"!==t[1]&&(t.splice(1,0,"original"),e=t.join("/"))}return"".concat(a.CP).concat(t).concat(e)}static decodeCPUrlParameters(t){const e=t.substring(a.CP.length),r=e.split("/");return{assetID:r[0],subPath:r.slice(1).join("/"),dcxSubPath:r.slice("original"===r[1]?2:1).join("/"),path:e,parentPath:r[r.length-2]}}static encodeAuthoringContextUrl(t,e,r,n){const o=r?"/"+r:"",i=n?"/"+n.replace("/","+"):"";return"".concat(a.AUTHORING_CONTEXT).concat(t,"/").concat(e).concat(o).concat(i)}static isEncodedAuthoringContextUrl(t){return!!t&&0===t.indexOf(a.AUTHORING_CONTEXT)}static decodeAuthoringContextUrlParameters(t){var e,r=t.substring(a.AUTHORING_CONTEXT.length).split("/");"logo"===r[2]&&(e=!0,r.splice(2,1));const n=r[2]&&!!["image+","video+","audio+","font+","application+"].find(t=>r[2].startsWith(t));var o,i=r.length>=3&&!n?r[2]:null;return o=i?r.length>=4?r[3].replace("+","/"):null:r.length>=3?r[2].replace("+","/"):null,{assetId:r[0],componentId:r[1],etag:i,mimeType:!o&&e?"image/png":o}}static getCPUrl(t,e){e.length&&n.CoreAssert.isTrue(e.indexOf("original/")<0&&"/"!==e[0]);var r=i.cpServiceDomain?"host/".concat(i.cpServiceDomain,"/"):"";return"/api/post/v1/cp/".concat(r,"dcx/").concat(t,"/").concat(e)}static decodeUrl(t){if(!t)return null;if(i.isEncodedComponentUrl(t)){var e=i.decodeComponentUrlParameters(t);return i.getImageUrl(e.docId,e.componentId,e.mimeType)}if(i.isEncodedCPUrl(t)){var r=i.decodeCPUrlParameters(t);return i.getCPUrl(r.assetID,r.dcxSubPath)}if(i.isEncodedAuthoringContextUrl(t)){var n=i.decodeAuthoringContextUrlParameters(t);return i.getAuthoringContextUrl(n.assetId,n.componentId,n.etag,n.mimeType)}return t}static setCPServiceDomain(t){i.cpServiceDomain=t}}var s,c,l;l=void 0,(c="cpServiceDomain")in(s=i)?Object.defineProperty(s,c,{value:l,enumerable:!0,configurable:!0,writable:!0}):s[c]=l},e733:function(t,e,r){"use strict";r.r(e),r.d(e,"HostCryptoImpl",(function(){return a}));var n=r("ZVDg"),o=r.n(n);class a{md5(t){return o.a.hash(t,!1)}}},gSEU:function(t,e,r){"use strict";r.r(e),r.d(e,"HostDataFactoryImpl",(function(){return a}));var n=r("UzQk"),o=r("V11p");class a{createFromString(t,e){try{return new o.HostStringDataImpl(t,e)}catch(t){n.CoreAssert.fail("Error in createFromString: ".concat(t.toString()))}return null}createFromCoreContent(t){const e=t.contentType;if(t instanceof n.CoreContentString)return this.createFromString(t.data,e);if(t instanceof n.CoreContentJSON)try{const r=JSON.stringify(t.data,null,2),n=new Blob([r],{type:e});return new o.HostDataImpl(n,e)}catch(t){n.CoreAssert.fail("Error in createFromCoreContent: ".concat(t.toString()))}return t instanceof n.CoreContentBinary&&t.data instanceof Blob?new o.HostDataImpl(t.data,e):(n.CoreAssert.fail("Unsupported data in createFromCoreContent"),null)}createFromFormData(t){const e=new FormData;return Object.entries(t).forEach(t=>{let[r,n]=t;e.append(r,n.data.data)}),new o.HostFormDataImpl(e,"multipart/form-data")}}},guFN:function(t,e,r){var n,o;n=[r("TdwW"),r("UzQk")],void 0===(o=function(t,e){function r(t,e){this.ctx=t,this.colorTable=e,this.filled=!1,this.ctx.beginPath()}return r.prototype.beginGroup=function(){},r.prototype.endGroup=function(){},r.prototype.beginClipGroup=function(t){},r.prototype.endClipGroup=function(){},r.prototype.fill=function(r,n){n=n||this.colorTable.color(r),this.ctx.fillStyle=t.toCSS(t.solidColor2Rgba(n)),this.ctx.fill(this.fillRule===e.TheoPath.PATHFILL_EVENODD?"evenodd":"nonzero"),this.filled=!0},r.prototype.stroke=function(r,n,o){this.ctx.lineWidth=o,n=n||this.colorTable.color(r),this.ctx.strokeStyle=t.toCSS(t.solidColor2Rgba(n)),this.ctx.miterLimit=this.miterLimit,this.ctx.lineCap="butt",this.endCap===e.TheoPath.PATHEND_ROUND?this.ctx.lineCap="round":this.endCap===e.TheoPath.PATHEND_SQUARE&&(this.ctx.lineCap="square"),this.ctx.lineJoin="miter",this.join===e.TheoPath.PATHJOIN_ROUND?this.ctx.lineJoin="round":this.join===e.TheoPath.PATHJOIN_BEVEL&&(this.ctx.lineJoin="bevel"),this.ctx.stroke()},r.prototype.rectangle=function(t,e,r,n){this.ctx.rect(t,e,r-t,n-e)},r.prototype.ellipse=function(t,e,r,n){var o=r-t,a=n-e,i=o/2*.5522848,s=a/2*.5522848,c=t+o/2,l=e+a/2;this.ctx.moveTo(t,l),this.ctx.bezierCurveTo(t,l-s,c-i,e,c,e),this.ctx.bezierCurveTo(c+i,e,r,l-s,r,l),this.ctx.bezierCurveTo(r,l+s,c+i,n,c,n),this.ctx.bezierCurveTo(c-i,n,t,l+s,t,l),this.ctx.closePath()},r.prototype.newPath=function(t,e,r,n,o){this.ctx.beginPath(),this.fillRule=t,this.endCap=e,this.join=r,this.strokeWt=n,this.miterLimit=o},r.prototype.moveTo=function(t,e){this.ctx.moveTo(t,e)},r.prototype.lineTo=function(t,e){this.ctx.lineTo(t,e)},r.prototype.cubicBezier=function(t,e,r,n,o,a){this.ctx.bezierCurveTo(t,e,r,n,o,a)},r.prototype.quadraticBezier=function(t,e,r,n){this.ctx.quadraticCurveTo(t,e,r,n)},r.prototype.closePath=function(){this.ctx.closePath()},r.prototype.done=function(){if(this.filled||this.fillRule==e.TheoPath.PATHFILL_NONE){if(this.fillRule==e.TheoPath.PATHFILL_NONE){var t=this.colorTable.color(e.ColorRole.FieldPrimary);this.stroke(e.ColorRole.FieldPrimary,t,this.strokeWt)}}else this.fill(e.ColorRole.FieldPrimary,null)},r}.apply(e,n))||(t.exports=o)},h4Rv:function(t,e,r){"use strict";r.r(e),r.d(e,"HostPathUtilsImpl",(function(){return a}));var n=r("UzQk");function o(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}class a{constructor(){o(this,"_urlArtworkCache",[])}cacheArtworkForURL(t,e){return this._urlArtworkCache.length>a.URL_ARTWORK_CACHE_SIZE&&this._urlArtworkCache.pop(),this._urlArtworkCache.splice(0,0,{url:t,artwork:e}),e}artworkFromURL(t,e){var r=this._urlArtworkCache.find(e=>e.url===t);if(r)return this._urlArtworkCache.splice(this._urlArtworkCache.indexOf(r),1),this._urlArtworkCache.splice(0,0,r),r.artwork;var o=new XMLHttpRequest;o.open("GET",t,!1),o.send();try{var a=n.SVGParserUtils.theoArtworkFromSVGData(o.responseText,e);return a?(this.cacheArtworkForURL(t,a),a):(n.CoreAssert.fail("SVGParserUtils.theoArtworkFromSVGData returned null for ".concat(t)),null)}catch(e){return n.CoreAssert.fail("SVGParserUtils.theoArtworkFromSVGData threw. Url - ".concat(t)),null}}parseSVGXMLData(t,e){var r=new DOMParser,n=r.parseFromString(t,"text/xml");n.rootElement||(n=r.parseFromString(t,"image/svg+xml")),function t(r){for(var n=r.localName.toLowerCase(),o={},a=0;a<r.attributes.length;++a){var i=r.attributes[a];i.specified&&(o[i.name]=i.value)}e.beginElement(n,o);var s=r.textContent;s&&e.handleStringValue(s);for(var c=0;c<r.childNodes.length;c++)r.childNodes[c].nodeType===Node.ELEMENT_NODE&&t(r.childNodes[c]);e.endElement(n)}(n.rootElement)}parseStringToDouble(t){const e=parseFloat(t);return isNaN(e)&&n.CoreAssert.fail("parsing string ".concat(t," resulted in NaN")),e}matchesForRegexInString(t,e){var r=new RegExp(t,"g");return e.match(r)||[]}firstMatchForRegexInString(t,e){var r=new RegExp(t,"g").exec(e);return r?r[0]:""}absolutePathFromURL(t){return t}lastPathComponentFromURL(t){let e=t.split("/");return e[e.length-1]}}o(a,"URL_ARTWORK_CACHE_SIZE",10)},hbJq:function(t,e,r){"use strict";r.r(e),r.d(e,"HostExceptionImpl",(function(){return n}));class n{executeWithExceptionHandler(t,e){try{t()}catch(t){e(t)}}}},kipm:function(t,e,r){"use strict";r.r(e),r.d(e,"HostVideoUtilsImpl",(function(){return n}));class n{hostSupportsPGMVideos(){return!1}hostSupportsIdBasedVideos(){return!1}trimVideoAtUrl(t,e,r,n){throw new Error("Method not implemented.")}trimVideoWithId(t,e,r,n){throw new Error("Method not implemented.")}getAttributesForVideoAtUrl(t){throw new Error("Method not implemented.")}getAttributesForVideoWithId(t){throw new Error("Method not implemented.")}}},"l+ZV":function(t,e,r){"use strict";r.r(e);var n=r("tY4j"),o=r.n(n),a=r("MGCh"),i=r.n(a),s=r("CTED"),c=r.n(s),l=r("bBG2");function u(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}const d=i.a.channel("load-image");let h=new c.a(30);class g extends Error{constructor(){super(...arguments),u(this,"imgSrc",""),u(this,"httpStatus",0),u(this,"httpResponse",void 0)}static async create(t,e,r){const n=new g(t);if(n.imgSrc=e,r){n.httpStatus=r.status;try{n.httpResponse=await r.text()}catch(t){}}return n}}function p(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Image;return new Promise((r,n)=>{e.onload=()=>r(e),e.onerror=n,e.src=t})}e.default=new class{constructor(){u(this,"_retryDelay",200),u(this,"_retryAttempts",3)}async _loadImageViaHTMLElement(t){const e=new Image;try{new URL(t,e.baseURI).origin!==location.origin&&(e.crossOrigin="anonymous")}catch(t){d.error("parsing url for cross-origin image loading. error details: ".concat(t))}try{return await p(t,e)}catch(e){throw d.error("loading image via HTTP request failed. error details: ".concat(e)),await g.create("img load error",t)}}async _tryLoadingImageViaHTTPRequest(t){let e,r=void 0;try{r=await fetch(t)}catch(e){throw d.error("fetching image via http response: error details: ".concat(e)),await g.create("Failed to load image via AJAX.",t,r)}if(r.status>=400)throw d.error("fetching image via http response: status: ".concat(r.status)),await g.create("Attempt to load image via AJAX returned an HTTP error.",t,r);try{e=await r.blob()}catch(e){throw d.error("accessing blob from image via http response: error details: ".concat(e)),await g.create("Failed to load image via AJAX.",t,r)}return this.loadImageFromBlob(e)}async _load(t){let e=void 0,r=1;const n=o()(this._loadImageViaHTMLElement,{maxAttempts:this._retryAttempts,delay:this._retryDelay,logger:{info(){r++}}}),a=async e=>{try{return r++,await this._tryLoadingImageViaHTTPRequest(t)}catch(t){throw e}};try{try{e=await n(t)}catch(t){e=await a(t)}}catch(e){throw h.remove(t),d.error("all attempts at loading image failed. error details: ".concat(e)),e}finally{const n=/^\s*data:/i.test(t)?"data-url":t;l.default.publish("post:imageLoadAttempt",{contextualData1:"numberOfLoadAttempts:".concat(r),contextualData2:"src:".concat(n),contextualData3:"success:".concat(void 0!==e)})}return e}async load(t){if(!t){let t="[Post:load-image] Attempted to load null image.";throw d.error(t),new Error(t)}if("do-not-load"===t){const e=new Image;return e.dataset.src=t,e.width=1,e.height=1,e}const e=h.get(t);if(e)return e;const r=this._load(t);return h.set(t,r),r}async loadImageFromBlob(t){const e=URL.createObjectURL(t);try{return await p(e)}catch(t){throw d.error("there was an error loading the image from blob. error details: ".concat(t),{src:e,event:t}),{message:"error loading image file",src:e,event:t}}finally{URL.revokeObjectURL(e)}}}},lulf:function(t,e,r){"use strict";r.r(e),r.d(e,"default",(function(){return i}));var n=r("7mGH"),o=r.n(n);function a(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}class i{static reset(){this.featuresLoadedPromise=null,this.featuresAreLoaded=!1}loadFeatures(){let{skipLoadingAuthenticatedFeatures:t=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!i.featuresLoadedPromise){const e=t?Promise.resolve():o.a.featuresLoaded().then(()=>{});i.featuresLoadedPromise=e.then(()=>{i.featuresAreLoaded=!0})}return i.featuresLoadedPromise}featureEnabled(t){if(!i.featuresAreLoaded)throw new Error("Feature-controller flags not yet loaded. Call loadFeatures() first.");return o.a?o.a.hasFeature(t)||function(t){const e={"post-logo-enabled":["enable-brand-kit"]}[t];return!!e&&e.some(t=>o.a.hasFeature(t))}(t):"post-pgm-poster"===t}}a(i,"featuresLoadedPromise",null),a(i,"featuresAreLoaded",!1)},oWUw:function(t,e,r){var n;void 0===(n=function(){navigator.appVersion;var t,e,r,n=navigator.userAgent,o=navigator.appName,a=""+parseFloat(navigator.appVersion),i=parseInt(navigator.appVersion,10);return-1!=(e=n.indexOf("Opera"))?(o="Opera",a=n.substring(e+6),-1!=(e=n.indexOf("Version"))&&(a=n.substring(e+8))):-1!=(e=n.indexOf("MSIE"))?(o="Microsoft Internet Explorer",a=n.substring(e+5)):-1!=(e=n.indexOf("Chrome"))?(o="Chrome",a=n.substring(e+7)):-1!=(e=n.indexOf("Safari"))?(o="Safari",a=n.substring(e+7),-1!=(e=n.indexOf("Version"))&&(a=n.substring(e+8))):-1!=(e=n.indexOf("Firefox"))?(o="Firefox",a=n.substring(e+8)):(t=n.lastIndexOf(" ")+1)<(e=n.lastIndexOf("/"))&&(o=n.substring(t,e),a=n.substring(e+1),o.toLowerCase()==o.toUpperCase()&&(o=navigator.appName)),-1!=(r=a.indexOf(";"))&&(a=a.substring(0,r)),-1!=(r=a.indexOf(" "))&&(a=a.substring(0,r)),i=parseInt(""+a,10),isNaN(i)&&(a=""+parseFloat(navigator.appVersion),i=parseInt(navigator.appVersion,10)),{name:o,fullVersion:a,majorVersion:i}}.apply(e,[]))||(t.exports=n)},pqGD:function(t,e,r){"use strict";r.r(e),r.d(e,"HostResourceUtilsImpl",(function(){return a}));var n=r("UzQk"),o=r("kNaX");class a{getPGMResourceProviderForURL(t,e){let r;if(r=e.match(/^component:(.+?)\/(.+?)(?:\/|$)/)){const t="todo",e=r[2];return new n.PGMResourceProvider(t,new n.StorageSpecLocalComposite(e))}if(r=e.match(/^data:(.*?);base64,(.+)/)){const t=r[1],e=r[2];return new n.PGMResourceProvider(t,new n.StorageSpecContentLiteral(new n.CoreContentBase64(e,t)))}const o=new n.CorePath(e);return new n.PGMResourceProvider("",new n.StorageSpecLocalFile(o))}oldMakeGUID(){const t=[];for(let e=0;e<36;e+=1)t[e]="0123456789abcdef".substr(Math.floor(16*Math.random()),1);return t[14]="4",t[19]="0123456789abcdef".substr(3&t[19]|8,1),t[8]=t[13]=t[18]=t[23]="-",t.join("")}makeGUID(){return o?o.v4():this.oldMakeGUID()}urlForResource(t,e){const r=window.THEO_BUNDLE_PATH;switch(t){case"shape":return"".concat(r,"/images/images/shapes/svg/").concat(e,".svg");case"images":return"".concat(r,"/images/images/").concat(e);case"image":return"".concat(r,"/images/images/").concat(e,".png");case"raster":return"".concat(r,"/images/images/shapes/raster/").concat(e,".raster");case"icons":return"".concat(r,"/images/images/icons/").concat(e,".svg");case"effects":return"".concat(r,"/images/images/effects/").concat(e,".svg")}return n.CoreAssert.fail("unknown categoryID in urlForResource"),null}}}}]);
//# sourceMappingURL=theo-app-storage_5a11b65b-1775a009.js.map