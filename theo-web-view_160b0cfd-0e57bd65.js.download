(window.webpackJsonptheoWebApp=window.webpackJsonptheoWebApp||[]).push([[81,66,74],{"/QpO":function(e,t,n){var o,i;o=[n("xeH2"),n("YLtl"),n("W1Jy"),n("2Fsf"),n("tpS0"),n("KFmL"),n("rPfa"),n("bBG2"),n("6G8C"),n("UzQk"),n("3xm6")],void 0===(i=function(e,t,n,o,i,a,r,s,l,d,c){const u=s.default;var p="post-sidebar-background-color";return function(e){(e=e||{}).layout="rows",e.panels=[{id:"PostSidebarBackgroundColorActions",size:"96px"},{id:"PostSidebarBackgroundColorsList",class:"post-panel-divider-above",size:"auto"}];var o,i,a=new n(e),s=[],h={},g=t.throttle((function(e){if(!a.isHidden()&&o){e=e||{};var n=o.getSelectedForma();n&&(n.controller.moveable?(h.opacitySlider.show(),h.opacitySlider.setValue(o.getOpacitySliderValueOfSelectedForma()),a.update({panels:[{id:"PostSidebarBackgroundColorActions",size:"96px"},{id:"PostSidebarBackgroundColorsList",class:"post-panel-divider-above",size:"auto"}]})):(h.opacitySlider.hide(),a.update({panels:[{id:"PostSidebarBackgroundColorActions",size:"0px"},{id:"PostSidebarBackgroundColorsList",class:"post-panel-divider-above",size:"auto"}]})),e.doFade?(h.listOfBgColors.$el.addClass("fade-out"),t.delay((function(){b(n,e),h.listOfBgColors.update(),h.listOfBgColors.$el.removeClass("fade-out")}),100)):(b(n,e),h.listOfBgColors.update()))}}),400);function f(){var e=o.getSelectedForma();e&&(i=e.formaID),g({doFade:!1,updateSelection:!0}),s.push(o.events.subscribe("forma-selected",(function(e){var t;e.forma&&(e.forma.formaID!==i?(t=e.forma.formaID,i=t,g({doFade:!0,updateSelection:!1}),h.listOfBgColors.closeColorPicker()):(v(e.forma,{updateSelection:!1}),h.listOfBgColors.update()))})))}function m(){!function(){for(var e=0;e<s.length;e++)s[e].remove();s=[]}()}function b(e,n){if(!a.isHidden()&&e){n.includeNoneCategory=function(e){const t=d.ImageFacade.getFrameFormaForForma(e);return t&&t.controller&&t.controller.canHaveNoneFillColor()}(e),n.includeNoneCategory?h.listOfBgColors.setNoneSection():h.listOfBgColors.removeNoneSection(),v(e,n);var o=e.controller.getSuggestableColors(),i=t.map(o,(function(e){return[{red:255*e[0].rgbColor.red,green:255*e[0].rgbColor.green,blue:255*e[0].rgbColor.blue,roles:e[0].sparkRoles,id:e[0].sparkElementID}]}));h.listOfBgColors.setSuggestedColors(i),h.listOfBgColors.setDefaultColors()}}function v(e,t){if(!o)return;if(!(e=e||o.getSelectedForma()))return;const n=[];if(function(e){if(e&&e.isImage()){const t=d.ImageFacade.getFrameFormaForForma(e);return d.ImageFacade.canApplyBackgroundColor(t)}return!0}(e)){const t=o.getFormaBackgroundColor(e);t&&n.push({red:255*t.rgbColor.red,green:255*t.rgbColor.green,blue:255*t.rgbColor.blue,alpha:t.rgbColor.alpha,roles:t.sparkRoles,id:t.sparkElementID})}h.listOfBgColors.setCurrentColors(n,t)}function S(e,t){a.events.publish("bg-color-selected",e,t),e&&e[0]&&e[0].isBKColor&&u.publish("usedBrandKitBGColor"),u.publish("backgroundColorSelected",{backgroundColor:"r:"+e[0].red+" g:"+e[0].green+" b:"+e[0].blue+" a:1"})}function w(){o.beginGesture()}function y(){o.endGesture(!0)}function x(e){o.setOpacityForSelectedFormae(e.value).done()}return a.setCoreWrapper=function(e){o=e},a.setBrandKitColors=function(e){h.listOfBgColors.setBrandKitColors(e)},a.removeBrandkitSections=function(){h.listOfBgColors.removeBrandkitSections()},a.handleEyeDropperClicked=function(e){h.listOfBgColors.handleEyeDropperClicked(e)},a.handleEyeDropperMoved=function(e,t){h.listOfBgColors.handleEyeDropperMoved(e,t)},a.selectCurrentColor=function(e){h.listOfBgColors.selectCurrentColor(e)},a.el.className+=" "+p,h.opacitySlider=new r({parent:"PostSidebarBackgroundColorActions",id:"PostBannerColorOpacitySlider",onSlide:x,onSlideStart:w,onSlideEnd:y,top:60,left:28,sliderWidth:232,sliderHitBuffer:20,minValue:.05,maxValue:1,roundValues:!1,showValueTooltip:!0,label:"i18n.components.slider.kOpacity",labelClass:"label-above",computeTooltipValue:function(e){return c.translate("components.slider.kValueLabel",{sliderValue:Math.round(100*e)})}}),h.listOfBgColors=new l({elementClassName:"post-bg-colors-list",parent:"PostSidebarBackgroundColorsList",hidden:!1,top:0,bottom:0,colorPicker:e.colorPicker}),a.events.subscribe("shown",f),a.events.subscribe("hidden",m),h.listOfBgColors.events.subscribe("item-selected",S),h.listOfBgColors.events.subscribe("update-color",S),a.republish(h.listOfBgColors.events,"eyedropper-changed"),a}}.apply(t,o))||(e.exports=i)},"0IaF":function(e,t,n){var o,i;o=[n("xeH2"),n("YLtl"),n("BG/d"),n("2AzE")],void 0===(i=function(e,t,n,o){var i="post-logos-list";return function(e){(e=e||{}).renderOvershoot=400,e.sections=[{id:"PostBrandPrimaryLogos",maxTileWidth:300,tileMargin:15,tileAspect:2,verticalPadding:15,label:"i18n.panels.logo.kPrimary",labelHeight:30},{id:"PostBrandSecondaryLogos",maxTileWidth:100,tileMargin:15,tileAspect:108/87,verticalPadding:15,label:"i18n.panels.logo.kMore",labelHeight:45}];var t=new o(e),a=[],r=[],s=!1;function l(e){var t=new n({data:null,selected:!1,hidden:!0,reselectable:!0,template:"<div class='postspinner' style='height:100%;width:100%;background-size:contain;background-repeat:no-repeat;background-position:center'></div>"});return e&&e.done((function(e){!function(e,t){e.update({data:t});var n=e.$el.find("div");n.css("background-image","url("+t.fullResUrl+")"),n.removeClass("postspinner")}(t,e)})),t}function d(){0===a.length&&0===r.length?t.events.publish("show-no-logos-panel"):(t.setItems(a,"PostBrandPrimaryLogos"),t.setItems(r,"PostBrandSecondaryLogos"),s&&t.addItems([new n({selectable:!1,hidden:!0,template:"<div class='post-add-logo-tile'></div>",onClick:function(){t.events.publish("upload-new-logo")}})],"PostBrandSecondaryLogos"),t.events.publish("hide-no-logos-panel")),t.handleScroll()}return t.setBrandKitLogos=function(e){if(e){a=[],r=[],s=e.belongsToUser;var t=e.primaryLogoPromise,n=e.secondaryLogoPromises;t&&a.push(l(t)),n&&n.length&&n.forEach((function(e){r.push(l(e))})),d()}},t.el.className+=" "+i,t.events.subscribe("shown",d),t}}.apply(t,o))||(e.exports=i)},"4eTD":function(e,t,n){var o,i;o=[n("xeH2"),n("YLtl"),n("2Fsf"),n("W1Jy"),n("KFmL"),n("+VG/"),n("rPfa"),n("bBG2"),n("UzQk"),n("Pbp+"),n("3xm6")],void 0===(i=function(e,t,n,o,i,a,r,s,l,d,c){const u=s.default;var p="post-sidebar-icon-tab";return d.init(),function(e){(e=e||{}).layout="rows",e.panels=[{id:"PostSidebarIconActions",size:"175px"},{id:"PostSidebarIconFlip",class:"post-panel-divider-above",size:"95px"},{id:"PostSidebarIconReplace",class:"post-panel-divider-above",size:"auto"}];var s,l=new o(e),h={},g=t.throttle((function(){l.isHidden()||(s.getSelectedForma()?(s.getNumLayers()>1?(h.layerSlider.enable(),function(){h.layerSlider.update({maxValue:s.getNumLayers()-1});var e=s.getLayerSliderValueOfSelectedForma();h.layerSlider.setValue(e)}()):h.layerSlider.disable(),h.opacitySlider.enable(),h.opacitySlider.setValue(s.getOpacitySliderValueOfSelectedForma())):(h.layerSlider.disable(),h.opacitySlider.disable()))}),400);function f(){g()}function m(e){l.events.publish("buttonpress-replace-icon",e),u.publish("replaceIconSidebarButtonPressed:icon")}function b(){s.beginGesture()}function v(){s.endGesture(!0)}function S(e){s.setLayerForSelectedForma(e.value).done()}function w(){s.beginGesture()}function y(){s.endGesture(!0)}function x(e){s.setOpacityForSelectedFormae(e.value).done()}function C(e){var t=s.getSelectedForma();s.flipForma(e,t)}return l.setCoreWrapper=function(e){(s=e).events.subscribe("forma-added",g),s.events.subscribe("formae-deleted",g),s.events.subscribe("forma-selected",g)},function(){l.el.className+=" "+p,h.iconActionsPanel=new n({parent:"PostSidebarIconActions"}),h.opacitySlider=new r({parent:h.iconActionsPanel,id:"PostIconOpacitySlider",onSlide:x,onSlideStart:w,onSlideEnd:y,top:60,left:28,sliderWidth:232,sliderHitBuffer:20,minValue:.05,maxValue:1,roundValues:!1,showValueTooltip:!0,label:"i18n.components.slider.kOpacity",labelClass:"label-above",computeTooltipValue:function(e){return c.translate("components.slider.kValueLabel",{sliderValue:Math.round(100*e)})}}),h.layerSlider=new r({parent:h.iconActionsPanel,id:"PostIconLayerSlider",onSlide:S,onSlideStart:b,onSlideEnd:v,top:123,left:28,sliderWidth:232,minValue:0,maxValue:1,roundValues:!0,label:"i18n.components.slider.kOrder",labelClass:"label-above",showValueTooltip:!0,computeTooltipValue:function(e){return e+1}}),h.iconFlipPanel=new n({parent:"PostSidebarIconFlip",id:"PostIconFlipPanel"}),h.flipButtonContainer=new n({id:"PostFlipContainer",parent:"PostIconFlipPanel",top:15,left:25,height:75,width:150}),h.flipLabel=new n({parent:"PostFlipContainer",id:"PostFlipLabel",tag:"p",top:0,left:0,height:20,width:36,template:"<p>i18n.panels.images.kFlip</p>"}),h.flipHWrapper=new n({id:"PostFlipHWrapper",parent:"PostFlipContainer",top:20,left:0,height:40,width:55}),h.flipHButton=new a({parent:"PostFlipHWrapper",label:"",id:"PostFlipHButton",hoverLabel:"i18n.components.buttons.flipHorizontal.kHoverLabel",height:40,width:55,onClick:function(){C(!1)}}),h.flipVWrapper=new n({id:"PostFlipVWrapper",parent:"PostFlipContainer",top:20,left:64,height:40,width:55}),h.flipVButton=new a({parent:"PostFlipVWrapper",label:"",id:"PostFlipVButton",hoverLabel:"i18n.components.buttons.flipVertical.kHoverLabel",height:40,width:55,onClick:function(){C(!0)}}),h.iconReplacePanel=new n({parent:"PostSidebarIconReplace"}),h.iconButtonWrapper=new n({parent:h.iconReplacePanel,height:"auto",top:0});var e="i18n.components.buttons.kReplaceIcon";d.run("IconShapeExperiment",{shape_for_icon_label:function(t){e="i18n.components.buttons.kReplaceShape"},control:function(e){}}).then((function(t){h.replaceIconButton=new i({parent:h.iconButtonWrapper,label:e,id:"ReplaceIconButton",class:"post-centered-button",onClick:m})})).done(),l.events.subscribe("shown",f)}(),l}}.apply(t,o))||(e.exports=i)},"7VrH":function(e,t,n){var o,i;o=[n("xeH2"),n("YLtl"),n("NgGw"),n("Dfrx")],void 0===(i=function(e,t,n,o){var i="post-sidebar-group";return function(e){var t=new n(e=e||{}),a=t.update,r={};function s(){}return t.setCoreWrapper=function(e){e,r.group.setCoreWrapper(e)},t.update=function(e){a(e=e||{}),e.attributes&&r.group.update(e)},t.el.className+=" "+i,r.group=new o({parent:t,hidden:!0,visibilityGroup:"group-sidebar"}),t.registerSidebarTabWithId(r.group,"group"),t.events.subscribe("shown",s),t}}.apply(t,o))||(e.exports=i)},"7len":function(e,t,n){"use strict";n.r(t),n.d(t,"AnimationOptions",(function(){return s}));var o=n("3xm6"),i=n.n(o);function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class s{constructor(){r(this,"MAX_COLOR_VARIANT",5),r(this,"MAX_STYLE_VARIANT",3),r(this,"translatedText",this._getTranslatedText()),r(this,"categoryNone",{categoryName:"",buttonList:[{name:"None",label:this.translatedText.NAME_NO_STYLE,type:"icon-button"}]})}getInitialAnimationOptions(){return[this.categoryNone]}updateAnimationOptions(e){const t=[];let n=!1,o=!1;const i={categoryName:this.translatedText.TEXT_CATEGORY,buttonList:[]},a={categoryName:this.translatedText.PHOTO_CATEGORY,buttonList:[]},r=e.getColorPalette(),s=e.getDisplayableAnimationStyles();for(let t=0;t<s.length;++t){const l=s[t];if(l){let t=null;t="Color"===l.name||"Fill"===l.name?this._buildDropdown(e,{name:l.name,label:this._getAnimationLabel(e,l),colors:r},!0):l.variantCount>1?this._buildDropdown(e,{name:l.name,label:this._getAnimationLabel(e,l),variantCount:l.variantCount},!1):{name:l.name,type:"icon-button",label:this._getAnimationLabel(e,l)},t&&l.textStyle?(n=!0,i.buttonList.push(t)):t&&l.imageStyle?(o=!0,a.buttonList.push(t)):"None"!==l.name&&console.warn("unkown category animation style: ".concat(l.name))}}return t.push(this.categoryNone),n&&t.push(i),o&&t.push(a),t}_buildDropdown(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{name:o,label:a}=t;return{label:a,type:"theo-sidebar-button-dropdown",name:"".concat(o,"-dropdown"),icon:o.toLowerCase(),dropdownLabel:n?i.a.translate("app.animationStyles.kColorDropdownLabel"):"",dropdownList:n?this._getColorsDropdownList(e,t,o):this._getImageDropdownList(t,o)}}_getImageDropdownList(e,t){const{variantCount:n}=e;let o=[],i=0;"Dynamic"===t&&(i=1);for(let e=0;e<Math.min(n,this.MAX_STYLE_VARIANT);++e){const n="".concat(t).concat(e+i),a="".concat(t).concat(e),r={type:"image-button",name:n,options:{imageUrl:"/theo-web/images/modules/component/icons/".concat(a.toLowerCase(),".gif")}};o=[...o,r]}return o}_getColorsDropdownList(e,t,n){const{colors:o}=t;let i=[];for(let t=0;t<Math.min(o.length,this.MAX_COLOR_VARIANT);++t){const a=e.getColorAnimationVariant(o[t].color),r={type:"color-button",name:"".concat(n).concat(a),options:{colorHex:"#".concat(o[t].color)}};i=[...i,r]}return i}_getAnimationLabel(e,t){const n=e.getCoreAnimationStyle();if(n){const e=Object.keys(this.translatedText).filter(e=>t.name===n[e]);return this.translatedText[e]||t.name}return t.name}_buildCategory(){}_getTranslatedText(){return Object.entries({TEXT_CATEGORY:"app.animationStyles.kTextCategoryName",PHOTO_CATEGORY:"app.animationStyles.kPhotoCategoryName",NAME_NO_STYLE:"app.animationStyles.kNoStyle",NAME_TYPE:"app.animationStyles.kTypewriter",NAME_DYNAMIC:"app.animationStyles.kDynamic",NAME_FLICKER:"app.animationStyles.kFlicker",NAME_COLORSWAP:"app.animationStyles.kColorShuffle",NAME_FADE:"app.animationStyles.kFade",NAME_SLIDE:"app.animationStyles.kSlide",NAME_GROW:"app.animationStyles.kGrow",NAME_ZOOM:"app.animationStyles.kZoom",NAME_PAN:"app.animationStyles.kPan",NAME_GRAYSCALE:"app.animationStyles.kGrey",NAME_BLUR:"app.animationStyles.kBlur",NAME_COLOR:"app.animationStyles.kColor",NAME_FILL:"app.animationStyles.kFade"}).reduce((e,t)=>{let[n,o]=t;return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{[n]:i.a.translate(o)})},{})}}t.default=s},"8t++":function(e,t,n){var o,i;o=[n("YLtl"),n("BG/d"),n("2AzE"),n("UzQk"),n("3xm6")],void 0===(i=function(e,t,n,o,i){const a="post-crops-list";return function(r){(r=r||{}).sections=[{id:"custom",maxTileWidth:100,tileMargin:40,horizontalPadding:38,verticalPadding:30,label:"i18n.panels.crop.kStandard",labelHeight:37,class:"post-panel-divider-above"},{id:"standard",maxTileWidth:100,tileMargin:40,horizontalPadding:38,verticalPadding:15,label:"i18n.panels.crop.kRatios",labelHeight:37},{id:"shapes",labelHeight:37,maxTileWidth:100,tileMargin:40,horizontalPadding:38,verticalPadding:15,label:"i18n.panels.crop.kShapes"}];const s=new n(r),l=5625;function d(e){const n=e.aspectRatio||1,o=Math.sqrt(l/n),a=n*o,r=!!e.reselectable,s=e.label||"",d=s&&"i18n.panels.crop."+i.toLocaleKey(s);let c="";e.secondaryLabel&&(c='<div class="overlay-label">i18n.panels.crop.'.concat(i.toLocaleKey(e.secondaryLabel),"</div>")),"string"!=typeof e.iconId&&(e.iconId="");const u="margin-left:-".concat(Math.round(a/2),"px;margin-top:-").concat(Math.round(o/2),"px;width:").concat(Math.round(a),"px;height:").concat(Math.round(o),"px;"),p='<div data-i18n="[aria-label]panels.badges.kNewlabel" class="aspect" style="'.concat(u,'">\n                                <div class="overlay">\n                                  <div class="overlay-aspect-icon crop-icon-').concat(e.iconId.toLowerCase(),'"></div>\n                                  ').concat(c,'\n                                </div>\n                                <div class="label">').concat(d,"</div>\n                            </div>");return new t({data:e,reselectable:r,group:"crops",class:"",selected:!1,hidden:!0,template:p})}function c(e){const n=window.THEO_BUNDLE_PATH,o="".concat(n,"/images/images/shapes/svg/").concat(e.id,".svg");return e.shapeId=e.id,new t({data:e,reselectable:!1,group:"crops",class:"vector-shape-crops",selected:!1,showShuffleOverlay:!1,shuffleLabel:"i18n.common.kShuffle",hidden:!0,template:"<div class='crop-shape' style='-webkit-mask-image: url(".concat(o,");mask-image: url(").concat(o,");'></div>")})}return s.selectSection=function(t){e.delay((function(){"crop"===t.section?s.scrollToSection("custom"):"shape"===t.section&&s.scrollToSection("shapes")}),50)},s.updateTiles=function(e){const t=(e=e||{}).forma,n=o.ImageFacade.getMaskForForma(t),i=n&&n.id,a=o.ImageFacade.getCropRatioId(t);let r=a,l=!1;s.setItems([d(o.CropRatioPresetLibrary.FREECROP_PRESET)],"custom");const u=o.CropRatioPresetLibrary.getListOfRatios(),p=o.CropRatioPresetLibrary.ORIGINAL_SIZE_PRESET,h=o.ImageFacade.getImageFormaForForma(t);h&&(p.aspectRatio=h.bounds.aspectRatio);const g=[d(p)];for(let e=0;e<u.length;e++)g.push(d(u[e])),u[e].id===a&&(r=u[e].id,l=!1);s.setItems(g,"standard");const f=o.CropAssetLibrary.getListOfShapes(),m=[];for(let e=0;e<f.length;e++)m.push(c(f[e])),f[e].id===i&&(r=f[e].id,l=!0);return s.setItems(m,"shapes"),null!==r&&s.selectItemWithProperty("id",r,{silent:!0}),s.update(),{selectionId:r,selectedShape:l}},s.$el.addClass(a),s}}.apply(t,o))||(e.exports=i)},Af0U:function(e,t,n){var o,i;o=[n("xeH2"),n("UFvF"),n("YLtl"),n("BG/d"),n("2AzE")],void 0===(i=function(e,t,n,o,i){var a,r,s,l="post-grids-list",d=1e4,c=220,u=140;return function(p){var h={id:"Suggested",tileAspect:2.5,maxTileWidth:100,columns:2,verticalPadding:30,tileMargin:10,label:"i18n.panels.layout.kSuggested",labelHeight:37},g={id:"Grid",tileAspect:2.5,maxTileWidth:100,columns:2,verticalPadding:30,tileMargin:10,label:"i18n.panels.layout.kGrid",labelHeight:37},f={id:"Simple",tileAspect:2.5,maxTileWidth:300,verticalPadding:30,tileMargin:10,label:"i18n.panels.layout.kSimple",labelHeight:37},m={id:"Banner",tileAspect:2.5,maxTileWidth:100,columns:2,verticalPadding:30,tileMargin:10,label:"i18n.panels.layout.kBanner",labelHeight:37};(p=p||{}).sections=[];var b=new i(p);function v(t,n,i,a){a=a||1;var l=r/s,d=Math.min(r,c/a),u=d/l,p=t.numBackgroundCells>1,h='<div class="aspect" style="left:50%;top:50%;margin-left:-'+Math.round(d/2)+"px;margin-top:-"+Math.round(u/2)+"px;width:"+Math.round(d)+"px;height:"+Math.round(u)+'px;"></div>',g=new o({group:"grids",data:n,selected:i,reselectable:p,showShuffleOverlay:p,shuffleLabel:"i18n.common.kShuffle",hidden:!0,template:h});return g.$el.find(".aspect").prepend(function(t,n,o){var i,a=e('<div class="grid-thumbnail"></div>').css({width:"100%",height:"100%"}),r=t.overlappingCells();return t.gridCells.forEach((function(t){i=e("<div></div>");var s=r.indexOf(t)>-1,l=t.bounds.minY*o,d=t.bounds.minX*n,c=(t.bounds.maxX-t.bounds.minX)*n,u=(t.bounds.maxY-t.bounds.minY)*o;0===t.bounds.minY&&(l+=4,u-=4),1===t.bounds.maxY&&(u-=4),0===t.bounds.minX&&(d+=4,c-=4),1===t.bounds.maxX&&(c-=4),s||(0!==t.bounds.minY&&(l+=2,u-=2),1!==t.bounds.maxY&&(u-=2),0!==t.bounds.minX&&(d+=2,c-=2),1!==t.bounds.maxX&&(c-=2)),i.css({top:l+"px",left:d+"px",width:c+"px",height:u+"px"}).addClass("grid-cell"),s&&i.addClass("foreground-grid-cell"),a.append(i)})),a}(t,d,u)),g}function S(){var e=a.getPageAspectRatio();"original"===e?(s=Math.sqrt(d/(4/3)),r=4/3*s):(s=Math.sqrt(d/e),r=e*s,e>1&&r>c&&(r=c,s=Math.max(44,Math.round(s*(1/e)))),e<1&&s>u&&(s=u,r=Math.max(28,e*s))),b.updateSections({tileHeight:s+20}),b.updateTiles()}function w(e,t){if(b.removeSection(t.id),e.length){b.addSection(n.defaults({},t));for(var o=[],i=0;i<e.length;i++){var a={name:e[i].name,gridStyle:e[i],silent:!0};o.push(v(e[i],a,!1,t.columns))}b.setItems(o,t.id)}}return b.updateTilesAfterImageLoad=function(){if(a){var e=a.hostImages(),o=[];n.each(e,(function(e){e.loaded()||o.push(e.getImageLoadedPromise())})),0===o.count?b.updateTiles():t.all(o).then((function(){b.updateTiles()}))}},b.updateTiles=function(){a&&a.getAllGridStyles().then((function(e){var t=[],n=[],o=[],i=[];e.forEach((function(e){"Suggested"===e.category?n.push(e):"Banner"===e.category||e.overlappingCells().length?o.push(e):"Simple"===e.category?t.push(e):i.push(e)})),w(n,h),w(t,f),w(o,m),w(i,g),b.updateSections({tileHeight:s+20}),b.update()}))},b.selectLayout=function(e){var t=b.getSelected();if(!t||t.item.data.name!==e.name){var n=b.getItemWithProperty("name",e.name);n&&n.item.select({silent:!0})}},b.setCoreWrapper=function(e){a=e,S(),e.events.subscribe("formae-deleted",b.updateTiles),e.events.subscribe("forma-added",b.updateTilesAfterImageLoad),e.events.subscribe("document-size-changed",S)},b.el.className+=" "+l,b}}.apply(t,o))||(e.exports=i)},B52L:function(e,t,n){var o,i;o=[n("xeH2"),n("YLtl"),n("2Fsf"),n("TW0n"),n("UNQu"),n("ywYV")],void 0===(i=function(e,t,n,o,i,a){var r,s="post-text-forma-select-box",l="gesture-in-progress",d=50,c=50,u=null;function p(e){return Math.round(1e3*e)/1e3}return function(e){(e=e||{}).onDragStart=function(){h.events.publish("select-box-drag-start"),h.$el.addClass(l)},e.onDragEnd=function(e,t){h.events.publish("select-box-drag-end",{event:e,element:t}),h.$el.removeClass(l)};var h=new o(e),g=h.hide,f=e.onHide,m=h.isDragging,b=h.update,v=e.matrix2d||[1,0,0,1,0,0],S=1,w="",y=[1,0,0,1,0,0],x=0,C=e.width||500,P=e.height||500,k=e.documentWidth||1e3,L=e.documentHeight||1e3,B=null;function F(e,t){h.events.publish("select-box-resize-start",{spot:D(t)}),h.$el.addClass(l)}function A(e,t){u=null,h.events.publish("select-box-resize-end",{spot:D(t)}),h.$el.removeClass(l)}var V=new n({class:"text-inner-frame",parent:h,template:'<div class="inner-frame-edge"></div>'}),I=new n({class:"click-area",parent:h,template:"<p></p>"}),T=new n({class:"left-line",parent:h,template:"<p></p>"}),O=new n({class:"right-line",parent:h,template:"<p></p>"}),M=new i({class:"sidepip lp",parent:V,width:21,height:21,template:"<p></p>",onDrag:N,onDragStart:F,onDragEnd:A}),E=new i({class:"sidepip rp",parent:V,template:"<p></p>",onDrag:N,onDragStart:F,onDragEnd:A}),H=t.debounce((function(){h.$el.removeClass("temporary-dim")}),1500);function D(e){return M.el===e?{x:0,y:.5}:E.el===e?{x:1,y:.5}:[]}function W(){var e=R(),t="matrix("+p(y[0])+","+p(y[1])+","+p(y[2])+","+p(y[3])+","+p(y[4]*e)+","+p(y[5]*e)+")";h.$el.css({"-webkit-transform":t,"-moz-transform":t,"-ms-transform":t,"-o-transform":t,transform:t})}function R(){return h.parent.getWidth()/k}function G(){var e=a.decomposeMatrix2d(y).angle,t={x:y[4],y:y[5]},n={x:t.x+C/2,y:t.y+P/2};return a.rotatePoint(n,t,e)}function N(e,t){var n=R(),o=!1;u||(u=G(),r=C,o=!0);var i=a.decomposeMatrix2d(y).angle,s={x:u.x-C/2,y:u.y-P/2},l=s.x,p=s.y;o&&(u.x*=n,u.y*=n);var g=a.rotatePoint({x:e.totalX,y:e.totalY},{x:0,y:0},-i),f=l,m=p,b=!0;t===M.el?(C=r-g.x/n,b=!1):t===E.el&&(C=r+g.x/n,b=!1),b||(e.totalY=0);var v=u.x+e.totalX/2,w=u.y+e.totalY/2,x=a.rotatePoint({x:f*n,y:m*n},u,i);if(x.x+=e.totalX,x.y+=e.totalY,P<d&&(P=d),C<c&&(C=c),P===d||C===c){var k=a.rotatePoint({x:x.x+C/2*n,y:x.y+P/2*n},x,i);v=k.x,w=k.y}var L={x:v/n-C/2,y:w/n-P/2},B=a.rotatePoint(L,{x:v/n,y:w/n},i);y[4]=B.x,y[5]=B.y;var F=h.parent.$el.offset(),A={x:(e.absX-F.left)/n,y:(e.absY-F.top)/n};h.update({matrix2d:a.transformMatrix(y.slice(0),[S,0,0,S,0,0]),width:C/S,height:P/S,snapping:!1,spot:D(t),touchPoint:A,publishEvent:"select-box-resize"})}return h.getCenterPoint=function(){return G()},h.getRelativeHeight=function(){return getRelativeHeightOfElement()},h.temporaryDim=function(){h.$el.addClass("temporary-dim"),H()},h.undim=function(){h.$el.removeClass("temporary-dim")},h.handleParentResize=function(){W()},h.update=function(e){(e=e||{}).silent=!!e.silent;var t=R(),n=!1;if(void 0!==e.forma&&(B=e.forma),I.show(),"boolean"==typeof e.showLeftLine&&(e.showLeftLine?(M.show(),T.show()):(M.hide(),T.hide())),"boolean"==typeof e.showRightLine&&(e.showRightLine?(E.show(),O.show()):(E.hide(),O.hide())),e.scale&&1!==e.scale){var o={x:y[4],y:y[5]},i={x:e.touchPoint.x/t,y:e.touchPoint.y/t},r={x:i.x-(i.x-o.x)*e.scale,y:i.y-(i.y-o.y)*e.scale};y[4]=r.x,y[5]=r.y,e.width=C*e.scale,e.height=P*e.scale,e.matrix2d=a.transformMatrix(y.slice(0),[S,0,0,S,0,0])}if(void 0!==e.translate&&(y[4]+=e.translate.x/t,y[5]+=e.translate.y/t,e.matrix2d=a.transformMatrix(y.slice(0),[S,0,0,S,0,0])),e.rotate&&0!==e.rotate){var s={x:y[4],y:y[5]};e.touchPoint.x/=t,e.touchPoint.y/=t;var l=a.rotatePoint(s,e.touchPoint,e.rotate),d=x-e.rotate,c=a.radians(d);y[0]=Math.cos(c),y[1]=-Math.sin(c),y[2]=Math.sin(c),y[3]=Math.cos(c),y[4]=l.x,y[5]=l.y,e.matrix2d=a.transformMatrix(y.slice(0),[S,0,0,S,0,0])}if(void 0!==e.matrix2d){var u=e.matrix2d.slice(0),p=a.decomposeMatrix2d(e.matrix2d);if(x=-p.angle,Math.abs(p.scaleX-1)>.001){var g=1/p.scaleX,f=1/p.scaleY;y=a.transformMatrix(u.slice(0),[g,0,0,f,0,0]),e.width=e.width||C/p.scaleX,e.height=e.height||P/p.scaleY,S=p.scaleX}else S=1,y=u.slice(0);var m=u.join(",");w!==m&&(w=m,v=u,!1===e.silent&&h.events.publish("change:matrix2d",{matrix2d:v}),n=!0)}void 0!==e.documentWidth&&(k=e.documentWidth,n=!0),void 0!==e.documentHeight&&(L=e.documentHeight,n=!0),void 0!==e.width&&(C=e.width*S,e.width=100*C/k+"%",n=!0),void 0!==e.height&&(P=e.height*S,e.height=100*P/L+"%",n=!0),b(e),n&&(W(),!1===e.silent&&e.publishEvent&&h.events.publish(e.publishEvent,{matrix2d:v,width:C/S,height:P/S,snapping:!0,mousePosition:e.mousePosition,spot:e.spot,touchPoint:e.touchPoint,startForma:B}))},h.forceDragHighlighting=function(){h.$el.addClass(l),h.$el.addClass("isdragging")},h.endDragHighlighting=function(){h.$el.removeClass("isdragging"),h.$el.removeClass(l)},h.handleDrag=function(e){var t=h.parent.$el.offset(),n={x:e.absX-t.left,y:e.absY-t.top};h.update({rotate:e.rotationChange,scale:e.scaleChange,touchPoint:n,translate:{x:e.x,y:e.y},mousePosition:{x:e.absX,y:e.absY},snapping:!0,publishEvent:"select-box-drag"})},h.isDragging=function(){return m()||M.isDragging()||E.isDragging()},h.hide=function(){f(),g()},h.update({matrix2d:v,width:C,height:P}),h.el.className+=" "+s,h}}.apply(t,o))||(e.exports=i)},Dfrx:function(e,t,n){var o,i;o=[n("xeH2"),n("YLtl"),n("2Fsf"),n("W1Jy"),n("KFmL"),n("+VG/"),n("rPfa"),n("8DU0"),n("GSfz"),n("UzQk"),n("Pbp+"),n("3xm6")],void 0===(i=function(e,t,n,o,i,a,r,s,l,d,c,u){var p="post-sidebar-group-tab";const h=s.default;return c.init(),function(e){(e=e||{}).layout="rows",e.panels=[{id:"PostSidebarGroupActions",size:"175px"},{id:"PostSidebarUngroup",class:"post-panel-divider-above",size:"95px"}];var i,s=l.keys.POST_SEEN_UNGROUP_MENU,d=new o(e),c={},g=t.throttle((function(){d.isHidden()||(i.getSelectedForma()?(i.getNumLayers()>1?(c.layerSlider.enable(),function(){c.layerSlider.update({maxValue:i.getNumLayers()-1});var e=i.getLayerSliderValueOfSelectedForma();c.layerSlider.setValue(e)}()):c.layerSlider.disable(),c.opacitySlider.enable(),c.opacitySlider.setValue(i.getOpacitySliderValueOfSelectedForma()),c.ungroupButton.enable()):(c.layerSlider.disable(),c.opacitySlider.disable(),c.ungroupButton.disable()),h.getSetting(s).then((function(e){c.ungroupTooltip.show(!e)})))}),400);function f(){g()}function m(){i.beginGesture()}function b(){i.endGesture(!0)}function v(e){i.setLayerForSelectedForma(e.value).done()}function S(){i.beginGesture()}function w(){i.endGesture(!0)}function y(e){i.setOpacityForSelectedFormae(e.value).done()}function x(){h.setSetting(s,!0);const e=i.getAllSelectedFormas();i.ungroupItems(e,!0,"button")}return d.setCoreWrapper=function(e){(i=e).events.subscribe("forma-added",g),i.events.subscribe("formae-deleted",g),i.events.subscribe("forma-selected",g)},d.el.className+=" "+p,c.groupActionsPanel=new n({parent:"PostSidebarGroupActions"}),c.opacitySlider=new r({parent:c.groupActionsPanel,id:"PostGroupOpacitySlider",onSlide:y,onSlideStart:S,onSlideEnd:w,top:60,left:28,sliderWidth:232,sliderHitBuffer:20,minValue:.05,maxValue:1,roundValues:!1,showValueTooltip:!0,label:"i18n.components.slider.kOpacity",labelClass:"label-above",computeTooltipValue:function(e){return u.translate("components.slider.kValueLabel",{sliderValue:Math.round(100*e)})}}),c.layerSlider=new r({parent:c.groupActionsPanel,id:"PostGroupLayerSlider",onSlide:v,onSlideStart:m,onSlideEnd:b,top:123,left:28,sliderWidth:232,minValue:0,maxValue:1,roundValues:!0,label:"i18n.components.slider.kOrder",labelClass:"label-above",showValueTooltip:!0,computeTooltipValue:function(e){return e+1}}),c.ungroupPanel=new n({parent:"PostSidebarUngroup",id:"PostUngroupPanel"}),c.ungroupButton=new a({parent:c.ungroupPanel,id:"PostUngroupButton",class:"post-centered-button image-sidebar-button",label:"i18n.components.buttons.kUngroup",height:50,width:145,onClick:x}),c.ungroupTooltip=new n({parent:"PostSidebarUngroup",id:"PostNewBadge",top:15,left:190,height:20,width:40,tag:"p",template:"i18n.panels.badges.kNewlabel"}),d.events.subscribe("shown",f),d}}.apply(t,o))||(e.exports=i)},FIWz:function(e,t,n){var o,i;o=[n("xeH2"),n("YLtl"),n("NgGw"),n("/QpO"),n("I9uX"),n("rOUP")],void 0===(i=function(e,t,n,o,i,a){var r="post-sidebar-background";return function(e){var t=new n(e=e||{}),s={};return t.updateFilters=function(e){(e=e||{}).whilePanelVisibleOnly&&s.looks.isHidden()||s.looks.updateFilters(e)},t.setCoreWrapper=function(e){s.looks.setCoreWrapper(e),s.image.setCoreWrapper(e),s.color.setCoreWrapper(e)},t.update=function(e){s.looks.update(e),s.image.update(e),s.color.update(e)},t.setBrandKitColors=function(e){s.color.setBrandKitColors(e)},t.removeBrandkitSections=function(){s.color.removeBrandkitSections()},t.handleEyeDropperClicked=function(e){s.color.handleEyeDropperClicked(e)},t.handleEyeDropperMoved=function(e,t){s.color.handleEyeDropperMoved(e,t)},t.selectCurrentColor=function(e){s.color.selectCurrentColor(e)},t.el.className+=" "+r,s.looks=new a({parent:t,hidden:!0,enablePixiRenderer:e.enablePixiRenderer,visibilityGroup:"background-sidebar",class:"post-panel-scrollable"}),s.image=new i({parent:t,hidden:!0,visibilityGroup:"background-sidebar",enableFlip:e.enableFlip,disableImageFrames:e.disableImageFrames,cutoutEnabled:e.cutoutEnabled}),s.color=new o({parent:t,hidden:!0,colorPicker:e.colorPicker,visibilityGroup:"background-sidebar"}),t.registerSidebarTabWithId(s.looks,"looks"),t.registerSidebarTabWithId(s.image,"image"),t.registerSidebarTabWithId(s.color,"color"),t.republish(s.image.events,"buttonpress-change-photo"),t.republish(s.image.events,"buttonpress-set-foreground"),t.republish(s.image.events,"buttonpress-set-background"),t.republish(s.image.events,"buttonpress-crop"),t.republish(s.image.events,"buttonpress-set-cutout-none"),t.republish(s.image.events,"buttonpress-set-cutout-remove-background"),t.republish(s.looks.events,"filter-selected"),t.republish(s.color.events,"bg-color-selected"),t.republish(s.color.events,"image-forma-replace-with-color"),t.republish(s.color.events,"eyedropper-changed"),t.republish(s.image.events,"hidden","hide-image-picker"),t}}.apply(t,o))||(e.exports=i)},FpXA:function(e,t,n){var o,i;o=[n("xeH2"),n("YLtl"),n("rCSV"),n("+VG/"),n("2Fsf"),n("M1RA"),n("WCfb"),n("B52L"),n("vVLA"),n("eZ+Q"),n("pEL3"),n("8DU0"),n("GSfz"),n("Dcjk"),n("UzQk"),n("bBG2"),n("3xm6"),n("ibPQ")],void 0===(i=function(e,t,n,o,i,a,r,s,l,d,c,u,p,h,g,f,m,b){let{KeyboardShortcuts:v}=b;const S=n.default,w=f.default,y=u.default;return function(n){var u,f,b,x,C,P,k,L={selectionBoxes:[],selectionButtons:{}},B=(n=n||{}).poster,F=(n.pageElement,[]),A={width:0,height:0},V={},I=p.keys.V2_REPLACE_IMAGE_COACHMARK,T=new v,O=navigator.platform.indexOf("Mac")>-1,M=!1,E=null,H={rotationShortcutCount:0,sendForward:0,sendToFront:0,sendBackward:0,sendToBack:0,duplicationShortcutCount:0};let D=!1;function W(e,t,n){F.push(e.events.subscribe(t,n))}function R(){}function G(){L.appLoadingSkrim.show()}function N(){L.appLoadingSkrim.hide()}function z(){B.allImagesLoaded()?(L.canvasLoadingSkrim.hide(),V.events.publish("first-full-render"),D=!1):D=!0,L.appLoadingSkrim.hide()}function U(){L.canvasLoadingSkrim.show()}function _(){L.canvasLoadingSkrim.hide(),D&&(D=!1,V.events.publish("first-full-render"))}function $(){var e=u.documentSize();e.width===A.width&&e.height===A.height||(A=e,L.selectionPopUp.update({documentSize:e}),L.snapLines.update({documentSize:e}),L.selectionBox.update({documentWidth:e.width,documentHeight:e.height,silent:!0}))}function Y(e){V.events.publish("handle-drag"),u.handleHandleFeedback(e)}function j(e){if(u.canRotateBox()){u.handleHandleFeedback(e);const t="rotation";H.rotationShortcutCount+=1,w.publish("keyboardShortcut",{contextualData1:"actionDescription: "+t+"_"+H.rotationShortcutCount})}}h>=10?10===h?(x="MSPointerDown",C="MSPointerUp",P="MSPointerMove"):(x="pointerdown",C="pointerup",P="pointermove"):(x="mousedown touchstart",C="mouseup touchend",P="mousemove touchmove"),V.events=new S;var K=t.throttle((function(e){u.handleNudge(e).done()}),40);function X(){u.allowDeletion(u.getAllSelectedFormas())&&be()}function Q(){var e=u.getAllSelectedFormas();u.canDuplicateFormae(e)&&(H.duplicationShortcutCount+=1,w.publish("keyboardShortcut",{contextualData1:"actionDescription: duplication_"+H.duplicationShortcutCount}),u.duplicateFormae(e).done())}function q(){u.getGroupFeatures().canGroup&&ve("shortcut")}function J(){u.getGroupFeatures().canUngroup&&Se("shortcut")}function Z(e){u.canSelectSibling()&&u.selectSibling(e.shiftKey)}function ee(){u.inSpecialSelectionMode()&&u.exitSpecialSelectionMode()}function te(e){u.inSpecialSelectionMode()?u.exitSpecialSelectionMode():(!1===e.shiftKey&&u.canSelectParent()&&u.selectParent(),!0===e.shiftKey&&u.canSelectChild()&&u.selectChild())}function ne(e){V.updateSelectionBoxPosition()}function oe(e){u.handleTextFormaBeginResize(u.getSelectedForma(),e)}function ie(e){u.handleTextFormaEndResize(u.getSelectedForma(),e)}function ae(e){u.handleTextFormaResize(u.getSelectedForma(),e).done()}function re(e,t){var n=B.$el.offset();return{x:e-n.left,y:t-n.top}}function se(e){var t=e.lines||[];t.length?L.snapLines.show():L.snapLines.hide(),L.snapLines.update({viewScale:B.getViewScale(),alignmentLines:t})}function le(e){L.snapLines.update({viewScale:B.getViewScale(),alignmentLines:e.snapLines||[]}),u.getSelectedForma()==e.data.forma&&e.selectionBox&&(e.data.forma.controller.moveable||(L.selectionBox.update(e.selectionBox),u.inCharStyleMode||L.selectionBox.show()))}function de(){t.delay((function(){u.getSelectedForma()||L.selectionBox.hide()}),20)}function ce(t){L.selectionBox.hide(),V.updateSelectionPopUp(),t.selectionBox&&(L.selectionBox.update(t.selectionBox),L.selectionBox.show(),e(L.selectionBox.el).css("display","inline"))}function ue(e){e.selectionBoxes.length>0?L.selectionBox.hide():e.forma||e.id?L.selectionBox.show():L.selectionBox.hide(),V.updateSelectionPopUp();for(var t=0;t<L.selectionBoxes.length;t++)L.selectionBoxes[t].hide();L.selectionBoxes=[];for(var n=0;n<e.selectionBoxes.length;n++){var o=new s({id:"textFormaSelectionBox",parent:B.parent,matrix2d:[1,0,0,1,100,100],documentWidth:1e3,documentHeight:1e3,width:200,height:200,hidden:!0,enableCornerPips:!0,enableSidePips:!1,onHide:function(){},killClick:!0});W(o,"select-box-resize-start",oe),W(o,"select-box-resize-end",ie),W(o,"select-box-resize",ae),o.update(e.selectionBoxes[n]),o.show(),L.selectionBoxes.push(o)}}function pe(e){var t,n=0;if(u.getSendForwardBackwardFormae(e.direction).length>0){switch(e.direction){case"back":t="sendToBack",H.sendToBack+=1,n=H.sendToBack;break;case"backward":t="sendBackward",H.sendBackward+=1,n=H.sendBackward;break;case"front":t="sendToFront",H.sendToFront+=1,n=H.sendToFront;break;case"forward":t="sendForward",H.sendForward+=1,n=H.sendForward}u.sendForwardBackward(e.direction),w.publish("keyboardShortcut",{contextualData1:"actionDescription: "+t+"_"+n})}}function he(t){var n=e(t.target),o=n.closest("#PosterImageWrapper").length,i=n.closest("#selectionPopUp").length;const a=B.parent.parent.getEventXY(t),r=re(a.x,a.y);M=!1,E=null;const s=o||i,l=(!t.ctrlKey||!O)&&(!s||function(e){const t=e.ctrlKey&&!O||e.metaKey&&O;if(E=null,!t){const t=B.parent.parent.getEventXY(e),o=re(t.x,t.y),i=B.getViewScale(),a=new g.TheoPoint(o.x,o.y).multiply(1/i);if(!u.formaAtPoint(a,e=>e&&e.controller&&e.controller.floating)){var n=u.formaAtPoint(a,e=>e&&e.controller&&!e.controller.floating);!n||u.formaIsSelected(n)||!n.isShape()&&n.kind!==g.RootForma.KIND||(E=n)}}return t||E}(t));if(f=u.getCurrentTimelineIndex(),l){return t.stopPropagation(),t.stopImmediatePropagation(),t.preventDefault(),M=!0,Ce(Pe(k=r)),!1}}function ge(e){if(M){const t=B.parent.parent.getEventXY(e);Ce(Pe(re(t.x,t.y)))}}function fe(e){var t=u.getCurrentTimelineIndex()>f;if(M){const o=L.marqueeBox.isHidden();if(L.marqueeBox.hide(),M=!1,o&&E)u.selectForma({forma:E});else{const o=B.parent.parent.getEventXY(e),i=re(o.x,o.y),a=B.getViewScale(),r=Pe(i).multiplyXY(1/a,1/a);var n=u.getSelectableFormaeIntersectingRect(r);n.length?u.marqueeSelectFormae(n,e.shiftKey):t||(u.deselect(),L.selectionPopUp.hide(),V.hideSelectionBox())}}V.events.publish("post-interaction-layer-clicked")}function me(){V.events.publish("buttonpress-edit")}function be(){V.events.publish("buttonpress-delete")}function ve(e){V.events.publish("buttonpress-group",{method:e})}function Se(e){V.events.publish("buttonpress-ungroup",{method:e})}function we(){V.events.publish("buttonpress-duplicate")}function ye(){V.events.publish("buttonpress-change-photo")}function xe(){var e,t,n,o,i=u.getSwapState(),a=i.swapThumbnailForma,r=i.swapThumbnailLocation;if(a&&r){var s=(e=r.x,t=r.y,n=B.getViewScale(),o=B.$el.offset(),{x:e*n+o.left,y:t*n+o.top});V.events.publish("create-swap-thumbnail",a,{x:s.x,y:s.y})}else V.events.publish("remove-swap-thumbnail")}function Ce(e){L.marqueeBox.update({top:e.origin.y+"px",left:e.origin.x+"px",width:e.width+"px",height:e.height+"px"}),L.marqueeBox.isHidden()&&(e.width*e.height>=25||Math.max(e.width,e.height)>20)&&L.marqueeBox.show()}function Pe(e){var t={x:Math.min(k.x,e.x),y:Math.min(k.y,e.y)},n=Math.abs(e.x-k.x),o=Math.abs(e.y-k.y);return g.TheoRect.fromXYWH(t.x,t.y,n,o)}return V.handleTap=function(e){V.events.publish("tap"),function(e){var t=0,n=0,o="up",i=u.getSelectedForma(),a=1;if(i){if(u.getFormaSize(i).height==u.getDesignHeight()){a=B.getViewScale();var r=B.$el.offset(),s=e.pageX||e.clientX||0,l=e.pageY||e.clientX||0;t=(s-r.left)/a,n=l-r.top,o=n<200?"down":"up",n+=n<200?120:-30,n/=a}else{var d=L.selectionBox.getCenterPoint();a=B.getViewScale(),t=d.x,(n=d.y-L.selectionBox.getRelativeHeight()/2)<200&&(n=d.y+L.selectionBox.getRelativeHeight()/2+130/a,o="down")}L.selectionPopUp.update({position:{x:t,y:n},direction:o})}}(e),V.updateSelectionPopUp(),L.selectionBox.show()},V.updateSelectionPopUp=function(){for(var e in L.selectionButtons)if(L.selectionButtons.hasOwnProperty(e)){L.selectionButtons[e].hide()}var t=u.getAllSelectedFormas(),n=null,o=u.getGroupFeatures(),i=[];if(u.inCropMode());else if(u.isMultiSelect())i.push(L.selectionButtons.deleteButton),i.push(L.selectionButtons.duplicateButton),o.canGroup&&i.push(L.selectionButtons.groupButton),o.canUngroup&&i.push(L.selectionButtons.ungroupButton);else{if(!(t.length>0&&null!==t[0]))return;if("Root"==(n=t[0]).kind&&!n.controller.replaceable)return void L.selectionPopUp.hide();n.isTypeLockup()?i.push(L.selectionButtons.popUpEditButton):n.isImage()&&n.controller.replaceable&&i.push(L.selectionButtons.replaceImageButton),u.allowDeletion([n])&&i.push(L.selectionButtons.deleteButton),u.allowDuplication(n)&&i.push(L.selectionButtons.duplicateButton),o.canUngroup&&i.push(L.selectionButtons.ungroupButton),u.hasImageAttribution(n)&&i.push(L.selectionButtons.imageAttributionButton)}var a=0,r=i.length;if(i.forEach((function(e){1===(a+=1)?e.$el.removeClass("pop-up-icon-mid pop-up-icon-right").addClass("pop-up-icon-left"):a===r?e.$el.removeClass("pop-up-icon-left pop-up-icon-mid").addClass("pop-up-icon-right"):e.$el.removeClass("pop-up-icon-left pop-up-icon-right").addClass("pop-up-icon-mid"),e.show()})),L.selectionPopUp.update({iconCount:r}),r>0?(L.selectionPopUp.show(),L.selectionButtons.replaceImageButton.isHidden()||y.getSetting(I).then((function(e){e||(b||(b=new c({parent:L.selectionPopUp,message:"i18n.components.coachmarks.image.kMessage",title:"i18n.components.coachmarks.image.kTitle",hidden:!0,priority:7,offsetY:10,offsetX:10,arrowDirection:"up",userSettingFlag:I,anchorElement:L.selectionButtons.replaceImageButton})),b&&b.show())}))):L.selectionPopUp.hide(),u.inCharStyleMode){for(var s in L.selectionPopUp.disable(),L.selectionButtons)if(L.selectionButtons.hasOwnProperty(s)){const e=L.selectionButtons[s];e.isHidden()||e.disable()}}else for(var s in L.selectionPopUp.enable(),L.selectionButtons)if(L.selectionButtons.hasOwnProperty(s)){const e=L.selectionButtons[s];e.isHidden()||e.enable()}},V.showImageMenu=function(){V.updateSelectionPopUp()},V.hideSelectionBox=function(){L.selectionBox.hide()},V.showSelectionBox=function(){L.selectionBox.show(),V.updateSelectionPopUp()},V.showSelectionPopup=function(){V.updateSelectionPopUp()},V.dismissPopUp=function(){L.selectionPopUp.hide()},V.handleTextTabSelected=function(){if(!u.inCharStyleMode){var e=u.getSelectedBoundingBox(),t=u.getSelectedForma();e&&t.isTypeLockup()&&(e.silent=!0,L.selectionBox.update(e),L.selectionBox.show())}},V.updateSelectionBoxPosition=t.throttle((function(){const e=u.getSelectedBoundingBox();e?(e.silent=!0,L.selectionBox.update(e),L.selectionBox.show()):(L.selectionBox.update(null),L.selectionBox.hide())}),16,{leading:!1}),V.setCoreWrapper=function(e){u=e},V.setPageElement=function(e){e},V.enable=function(){if(u){F.length>0&&function(){B.parent.parent.$el.off(x,he),B.parent.parent.$el.off(C,fe),B.parent.parent.$el.off(P,ge);for(var e=0;e<F.length;e++)F[e].remove();F=[]}(),function(){B.parent.parent.unbind(),B.parent.parent.$el.on(x,he),B.parent.parent.$el.on(C,fe),B.parent.parent.$el.on(P,ge.bind(this)),B.parent.parent.bind(),W(u,"design-updated",$),W(u,"forma-selected",ce),W(u,"forma-updated",le),W(u,"formae-deleted",de),W(u,"update-snap-lines",se),W(u,"update-handles",ne),W(u,"update-swap-state",xe),W(u,"text-forma-selected",ue),W(u,"show-app-loading-indicator",G),W(u,"hide-app-loading-indicator",N),W(B,"image-loading-begin",U),W(B,"image-loading-end",_),W(B,"rendered",z),W(L.selectionBox,"handle-drag",Y),W(L.selectionBox,"shown",R),W(L.selectionBox,"select-box-arrow-key-pressed",K),W(L.selectionBox,"select-box-delete-key-pressed",X),W(L.selectionBox,"select-box-rotation-shortcut-pressed",j),W(L.selectionBox,"change-z-order-shortcut",pe),W(L.selectionBox,"duplication-shortcut-pressed",Q),W(L.selectionBox,"select-box-group-key-pressed",q),W(L.selectionBox,"select-box-ungroup-key-pressed",J),W(L.selectionBox,"select-box-return-key-pressed",ee),W(L.selectionBox,"select-box-escape-key-pressed",te),W(L.selectionBox,"select-box-tab-key-pressed",Z)}();var e=u.getDocumentSize();L.selectionPopUp.update({documentSize:e}),L.snapLines.update({documentSize:e});var t=u.getSelectedBoundingBox();t&&L.selectionBox.update(t),L.canvasLoadingSkrim.show()}},V.disable=function(){L.selectionBox.hide(),L.selectionPopUp.hide(),L.canvasLoadingSkrim.hide(),L.appLoadingSkrim.hide(),L.marqueeBox.hide(),M=!1},V.handleWindowResize=function(){L.selectionPopUp.update({windowResize:!0})},V.showLoadingSkrim=function(){L.canvasLoadingSkrim.show()},V.hideLoadingSkrim=function(){L.canvasLoadingSkrim.hide()},function(){L.canvasLoadingSkrim=new i({class:"loading-skrim",parent:B.parent,hidden:!0,template:'<div class="postspinner postspinner-small"></div>'}),L.appLoadingSkrim=new i({class:"loading-skrim",parent:"PostApp",hidden:!0,template:'<div class="postspinner postspinner-small"></div>'}),L.snapLines=new l({parent:B.parent,hidden:!0}),L.selectionPopUp=new a({id:"selectionPopUp",parent:B.parent,height:40,hidden:!0,iconUnitWidth:57,iconCount:3});var t=m.translate("components.buttons.edit.kHoverLabel");t='<div class="pop-up-text-label">'+t+"</div>",L.selectionButtons.popUpEditButton=new o({parent:"selectionPopUp",class:"pop-up-icon-left",id:"PostPopUpEdit",hoverLabel:t,height:24,width:57,onClick:me});var n=m.translate("components.buttons.duplicate.kHoverLabel");n='<div class="pop-up-text-label">'+n+'</div>&emsp;<div class= "pop-up-symbol-label">'+T.getShortcutDescription({command:!0},"D")+"</div>",L.selectionButtons.duplicateButton=new o({parent:"selectionPopUp",class:"pop-up-icon-mid",id:"PostPopUpDuplicate",hoverLabel:n,height:24,width:57,onClick:we});var s=m.translate("components.buttons.delete.kHoverLabel");s='<div class="pop-up-text-label">'+s+"</div>",L.selectionButtons.deleteButton=new o({parent:"selectionPopUp",class:"pop-up-icon-left",id:"PostPopUpDelete",hoverLabel:s,height:24,width:57,onClick:be});var c=m.translate("components.buttons.group.kHoverLabel");c='<div class="pop-up-text-label">'+c+'</div>&emsp;<div class= "pop-up-symbol-label">'+T.getShortcutDescription({command:!0},"G")+"</div>",L.selectionButtons.groupButton=new o({parent:"selectionPopUp",class:"pop-up-icon-right",id:"PostPopUpGroup",hoverLabel:c,height:24,width:57,onClick:function(){ve("actionBar")}});var p=m.translate("components.buttons.ungroup.kHoverLabel");p='<div class="pop-up-text-label">'+p+'</div>&emsp;<div class= "pop-up-symbol-label">'+T.getShortcutDescription({shift:!0,command:!0},"G")+"</div>",L.selectionButtons.ungroupButton=new o({parent:"selectionPopUp",class:"pop-up-icon-right",id:"PostPopUpUngroup",hoverLabel:p,height:24,width:57,onClick:function(){Se("actionBar")}});var h=m.translate("components.buttons.replace.kHoverLabel");h='<div class="pop-up-text-label">'+h+"</div>",L.selectionButtons.replaceImageButton=new o({parent:"selectionPopUp",class:"pop-up-icon-mid",id:"PostPopUpReplace",hoverLabel:h,height:24,width:57,onClick:ye});var g=m.translate("components.buttons.attribution.kHoverLabel");g='<div class="pop-up-text-label">'+g+"</div>",L.selectionButtons.imageAttributionButton=new o({parent:"selectionPopUp",class:"pop-up-icon-right",id:"PostPopUpImageAttr",hoverLabel:g,height:24,width:57,onClick:function(t){var n=u.getSelectedForma(),o=u.getImageFormaAttributionInfo(n),i={license:{type:o.licenseType,owner:o.ownerName,photo_name:o.title,source_name:o.sourceName,source_url:o.sourceURL,image_id:o.assetID}};d.displayAttributionDialog(i,{icon$:e(t.target),calcLocationFromIcon:!0,editorEl$:e("body").find("#selectionPopUp")}).then(function(e){"licensed"===e.changeType&&(e.newItemInfo.info.searchText=o.searchTerm,V.events.publish("stock-image-licensed",e))}.bind(this),(function(e){}))}}),L.selectionBox=new r({id:"selectionBox",parent:B.parent,matrix2d:[1,0,0,1,100,100],documentWidth:1e3,documentHeight:1e3,width:200,height:200,hidden:!0,enableCornerPips:!0,enableSidePips:!1,onHide:function(){}}),L.marqueeBox=new i({id:"marqueeBox",class:"post-marquee-box",parent:B.parent,width:0,height:0,hidden:!0})}(),V}}.apply(t,o))||(e.exports=i)},"GN+k":function(e,t,n){var o,i;o=[n("xeH2"),n("YLtl"),n("2Fsf"),n("NgGw"),n("KFmL"),n("+VG/"),n("+Mhg"),n("rPfa"),n("0IaF"),n("UzQk"),n("3xm6")],void 0===(i=function(e,t,n,o,i,a,r,s,l,d,c){var u="post-sidebar-logo";return function(e){(e=e||{}).layout="rows",e.panels=[{id:"PostSidebarLogoActions",size:"179px"},{id:"PostSidebarLogoContent",size:"auto"}];var d,p=new o(e),h={},g=t.throttle((function(){var e=d.getSelectedForma();if(e&&e.isLogo()){h.opacitySlider.enable();var t=d.getOpacitySliderValueOfSelectedForma();h.opacitySlider.setValue(t),d.getNumLayers()>1&&(h.layerSlider.enable(),function(){h.layerSlider.update({maxValue:d.getNumLayers()-1});var e=d.getLayerSliderValueOfSelectedForma();h.layerSlider.setValue(e)}())}else h.opacitySlider.disable(),h.layerSlider.disable()}),400);function f(){g()}function m(e){p.events.publish("item-selected",e)}function b(e){p.events.publish("logo-uploaded",e),h.logoLocalInput.clearValue()}function v(){h.logoLocalInput&&h.logoLocalInput.click(),p.events.publish("buttonpress-uploadNewLogo")}function S(){p.hide(),p.events.publish("buttonpress-closeLogoPanel")}function w(){h.logoActionsPanel.hide(),h.listOfLogos.hide()}function y(){h.logoActionsPanel.show(),h.listOfLogos.show()}function x(){h.opacitySlider.isEnabled()&&d.beginGesture()}function C(){h.opacitySlider.isEnabled()&&d.endGesture(!0)}function P(e){h.opacitySlider.isEnabled()&&d.setOpacityForSelectedFormae(e.value).done()}function k(){h.layerSlider.isEnabled()&&d.beginGesture()}function L(){h.layerSlider.isEnabled()&&d.endGesture(!0)}function B(e){h.layerSlider.isEnabled()&&d.setLayerForSelectedForma(e.value).done()}return p.updateListOfBrandKitLogos=function(e){h.listOfLogos.setBrandKitLogos(e)},p.setCoreWrapper=function(e){(d=e).events.subscribe("forma-selected",g),d.events.subscribe("formae-deleted",g),d.events.subscribe("forma-updated",g)},p.el.className+=" "+u,h.closeButton=new a({parent:"PostSidebarLogoActions",class:"close-button",id:"LogoActionsCloseLogo",width:24,height:24,onClick:S}),h.logoActionsPanel=new n({parent:"PostSidebarLogoActions"}),h.logoLocalInput=new r({parent:h.sidebarLogo,type:"image",hidden:!0}),h.noLogosActionPanel=new n({parent:p,id:"PostLogoNoLogosPanel",hidden:!0}),h.noLogosActionContent=new n({parent:h.noLogosActionPanel,top:60}),h.noLogoAddLogo=new i({parent:h.noLogosActionContent,id:"PostNoLogosAddLogoButton",label:"i18n.panels.addNewLogo.kAddNewLogo",class:"pill pill-asset",onClick:v}),h.addLogoMessage=new n({parent:h.noLogosActionContent,id:"PostLogoPanelAddLogoMessage",template:"<p>i18n.panels.addNewLogo.kMessage1</p><p>i18n.panels.addNewLogo.kMessage2</p>",top:75,height:100}),h.opacitySlider=new s({parent:h.logoActionsPanel,id:"PostLogoOpacitySlider",onSlide:P,onSlideStart:x,onSlideEnd:C,top:75,left:28,sliderWidth:232,sliderHitBuffer:20,minValue:.05,maxValue:1,roundValues:!1,showValueTooltip:!0,label:"i18n.components.slider.kOpacity",labelClass:"label-above",computeTooltipValue:function(e){return c.translate("components.slider.kValueLabel",{sliderValue:Math.round(100*e)})}}),h.layerSlider=new s({parent:h.logoActionsPanel,id:"PostLogoLayerSlider",onSlide:B,onSlideStart:k,onSlideEnd:L,top:138,left:28,sliderWidth:232,minValue:0,maxValue:1,roundValues:!0,label:"i18n.components.slider.kOrder",labelClass:"label-above",showValueTooltip:!0,computeTooltipValue:function(e){return e+1}}),h.listOfLogos=new l({parent:"PostSidebarLogoContent"}),p.events.subscribe("shown",f),h.listOfLogos.events.subscribe("item-selected",m),h.listOfLogos.events.subscribe("upload-new-logo",v),h.listOfLogos.events.subscribe("show-no-logos-panel",h.noLogosActionPanel.show),h.listOfLogos.events.subscribe("hide-no-logos-panel",h.noLogosActionPanel.hide),h.noLogosActionPanel.events.subscribe("shown",w),h.noLogosActionPanel.events.subscribe("hidden",y),h.logoLocalInput.events.subscribe("item-selected",b),p}}.apply(t,o))||(e.exports=i)},HPKp:function(e,t,n){var o,i;o=[n("Avqh"),n("2Fsf"),n("W1Jy"),n("KFmL"),n("+VG/"),n("rPfa"),n("Lo4C"),n("8t++"),n("bBG2"),n("UzQk")],void 0===(i=function(e,t,n,o,i,a,r,s,l,d){const c=l.default,u="post-crop-picker";return function(o){(o=o||{}).layout="rows",o.panels=[{id:"CropPickerHeader",size:"255px"},{id:"CropPickerCrops",class:"post-panel-divider-above",size:"auto"}];const l=new n(o),p={};let h,g,f,m,b="none",v="none",S=!1,w=!1,y=!1,x=!1,C=!1;function P(e){const t=g.getSelectedForma();g.flipForma(e,t)}function k(e){const t=!(null!==e.aspectRatio)||!g.getSelectedFormaHasShapeMask(),n=g.getSelectedForma().bounds;!n.equal(m)&&t&&(f=n),e.cropToRatioUsingFrameBounds=f,null!=e.aspectRatio?(b=e.id,v="none",l.events.publish("crop-aspect-ratio-selected",e),x||(c.publish("editImage:cropRatioSelected",{contextualData1:"ratioId:".concat(e.id)}),x=!0)):e.shapeId&&(v=e.id,b="none",l.events.publish("crop-shape-selected",e),C||(c.publish("editImage:cropShapeSelected",{contextualData1:"shapeId:".concat(e.id)}),C=!0)),setTimeout((function(){m=g.getSelectedForma().bounds}),100)}function L(){y=!0,h=d.ImageFacade.getImageFormaForForma(g.getSelectedForma()).placement,g.beginGesture()}function B(){w=!0,h=d.ImageFacade.getImageFormaForForma(g.getSelectedForma()).placement,g.beginGesture()}function F(e){g.rotateSelectedForma(e.delta,h).done()}function A(e){g.scaleSelectedForma(e.value,h).done()}function V(){g.endGesture(!0),I()}function I(){let e=g.getSelectedFormaRotation()%360;e>180&&(e=e-180-180);const t=g.getSelectedFormaScale();p.rotationSlider.setValue(e),p.scaleSlider.setValue(t)}function T(){I();const e=g.getSelectedForma();f=e.bounds,m=f,p.listOfCrops.show(!0);const t=p.listOfCrops.updateTiles({forma:e});t.selectedShape?(v=t.selectionId,b="none"):(b=t.selectionId,v="none"),w=!1,y=!1,S=!1}function O(){if(w||y){let e="<>";w&&y?e="<rotate,scale>":y?e="<rotate>":w&&(e="<scale>"),c.publish("editImage:cropImageAdjusted",{contextualData1:"adjustTransforms:".concat(e)})}c.publish("editImage:cropCompleted",{contextualData1:"ratioId:".concat(b),contextualData2:"shapeId:".concat(v),contextualData3:"resizeHandleUsed:".concat(S)})}function M(){l.events.publish("close-crop-picker"),l.hide(),p.closeCropTooltip.hide()}return l.recordFormaResize=function(){S=!0},l.setCoreWrapper=function(e){g=e},l.moveToSection=function(e){p.listOfCrops.selectSection(e)},l.el.className+=" "+u,p.headerLabel=new e({parent:"CropPickerHeader",tag:"h1",template:"i18n.panels.crop.kCrop"}),p.closeButton=new i({id:"PostCloseCropButton",parent:"CropPickerHeader",class:"check-button",width:24,height:24,onClick:M}),p.closeCropTooltip=new r({parent:p.closeButton,message:"i18n.panels.crop.kCloseCropTooltip",hoverLabelPosition:"below"}),p.scaleSlider=new a({parent:"CropPickerHeader",hidden:!1,onSlideStart:B,onSlideEnd:V,onSlide:A,top:100,left:25,sliderWidth:232,sliderHeight:2,handleHeight:16,minValue:.05,maxValue:5,roundValues:!1,label:"i18n.panels.crop.kScaleImage",labelClass:"label-above",showValueTooltip:!0}),p.rotationSlider=new a({parent:"CropPickerHeader",hidden:!1,onSlide:F,onSlideStart:L,onSlideEnd:V,top:150,left:25,sliderWidth:226,sliderHeight:2,handleHeight:16,minValue:-179,maxValue:180,roundValues:!0,label:"i18n.panels.crop.kRotateImage",labelClass:"label-above",snapToTickEnable:!0,snapTicks:[-179,-135,-90,-45,0,45,90,135,180],snapSensitivity:5,showValueTooltip:!0,computeTooltipValue:e=>"".concat(Math.round(e),"&deg")}),p.flipButtonContainer=new t({id:"PostFlipContainer",parent:"CropPickerHeader",top:177,left:25,height:75,width:150}),p.flipLabel=new t({parent:"PostFlipContainer",id:"PostFlipLabel",tag:"p",top:0,left:0,height:20,width:36,template:"i18n.panels.images.kFlip"}),p.flipHWrapper=new t({id:"PostFlipHWrapper",parent:"PostFlipContainer",top:20,left:0,height:40,width:55}),p.flipHButton=new i({parent:"PostFlipHWrapper",label:"",id:"PostFlipHButton",hoverLabel:"i18n.components.buttons.flipHorizontal.kHoverLabel",height:40,width:55,onClick(){P(!1)}}),p.flipVWrapper=new t({id:"PostFlipVWrapper",parent:"PostFlipContainer",top:20,left:64,height:40,width:55}),p.flipVButton=new i({parent:"PostFlipVWrapper",label:"",id:"PostFlipVButton",hoverLabel:"i18n.components.buttons.flipVertical.kHoverLabel",height:40,width:55,onClick(){P(!0)}}),p.listOfCrops=new s({parent:"CropPickerCrops"}),l.events.subscribe("shown",T),l.events.subscribe("hidden",O),p.listOfCrops.events.subscribe("item-selected",k),l}}.apply(t,o))||(e.exports=i)},I9uX:function(e,t,n){var o,i;o=[n("xeH2"),n("YLtl"),n("2Fsf"),n("W1Jy"),n("KFmL"),n("+VG/"),n("rPfa"),n("GSfz"),n("UzQk"),n("3xm6")],void 0===(i=function(e,t,n,o,i,a,r,s,l,d){var c="post-sidebar-photo";return function(e){(e=e||{}).layout="rows";e.panels=[{id:"PostSidebarPhotoActions",size:"".concat(350,"px")},{id:"PostSidebarPhotoReplace",class:"post-panel-divider-above",size:"auto"}],e.cutoutEnabled&&e.panels.splice(1,0,{id:"PostSidebarCutoutModes",class:"post-panel-divider-above",size:"".concat(83,"px")});var t,i,s,u=new o(e),p={},h=e.disableImageFrames||!1;function g(){u.updateForCurrentSelection()}function f(){var e=t.getSelectedFormaRotation()%360;e>180&&(e=e-180-180);var n=t.getSelectedFormaScale();p.rotationSlider.setValue(e),p.scaleSlider.setValue(n)}function m(e){if(e.isBackgroundImage()){p.scaleSlider.show(),p.rotationSlider.show(),p.opacitySlider.hide(),p.layerSlider.hide();var n=t.getSelectedFormaScaleRange(),o=n.min,i=n.max;p.scaleSlider.update({minValue:o,maxValue:i}),f(),s=t.getSelectedFormaPlacement()}else p.opacitySlider.show(),p.layerSlider.show(),p.scaleSlider.hide(),p.rotationSlider.hide(),t.getNumLayers()>1?(p.layerSlider.enable(),function(){p.layerSlider.update({maxValue:t.getNumLayers()-1});var e=t.getLayerSliderValueOfSelectedForma();p.layerSlider.setValue(e)}()):p.layerSlider.disable(),a=t.getOpacitySliderValueOfSelectedForma(),p.opacitySlider.setValue(a);var a}function b(e){t.rotateSelectedForma(e.delta,s.placement).done()}function v(e){t.scaleSelectedForma(e.value,s.placement).done()}function S(){i=t.getSelectedForma(),t.beginGesture(),s.id!=t.getSelectedFormaPlacement().id&&m(i)}function w(){i=t.getSelectedForma(),t.beginGesture()}function y(){t.endGesture(!0),f()}function x(){t.beginGesture()}function C(){t.endGesture(!0)}function P(e){t.setOpacityForSelectedFormae(e.value).done()}function k(){t.beginGesture()}function L(){t.endGesture(!0)}function B(e){t.setLayerForSelectedForma(e.value).done()}function F(e){var n=t.getSelectedForma();t.flipForma(e,n)}return u.updateForCurrentSelection=function(){if(u.isHidden())return;var n=t.getSelectedForma();if(!n||!n.isImage()&&!n.isShape())return;var o=t.allowSetForeground(n),i=n.controller.userGroupMember,a=e.cutoutEnabled&&l.ImageFacade.canApplyCutout(n);if(e.cutoutEnabled&&p.cutoutBetaTooltip.show(!1),n.isImage()&&(m(n),p.setBackgroundButton.show(!o&&!i),p.setForegroundButton.show(o&&!i),p.cropButtonContainer.show(t.allowCrop(n)),e.cutoutEnabled)){var r=l.ImageFacade.getCutoutModeForForma(n);p.setCutoutNoneButton.show(a&&!(r===l.CutoutMode.Off)),p.setCutoutRemoveBackgroundButton.show(a&&!(r===l.CutoutMode.BackgroundRemoval)),p.cutoutBetaTooltip.show(a)}var s=t.backgroundImageFormas().length>0,d=s?"i18n.components.buttons.addToCollage.kButtonLabel":"i18n.components.buttons.setBackground.kButtonLabel",c=s?150:190;s?p.setBackgroundButton.$el.addClass("add-to-collage ").removeClass("pin-to-background"):p.setBackgroundButton.$el.addClass("pin-to-background").removeClass("add-to-collage "),p.setBackgroundButton.update({label:d,width:c}),h&&(p.setBackgroundButton.show(!1),p.setForegroundButton.show(!1),p.cropButtonContainer.show(!1));const g=[{id:"PostSidebarPhotoActions",size:"".concat(o?280:350,"px")}];a&&g.push({id:"PostSidebarCutoutModes",size:"".concat(83,"px")}),u.update({panels:g})},u.setCoreWrapper=function(e){(t=e).events.subscribe("forma-added",u.updateForCurrentSelection),t.events.subscribe("formae-deleted",u.updateForCurrentSelection),t.events.subscribe("forma-selected",u.updateForCurrentSelection)},u.el.className+=" "+c,p.scaleSlider=new r({parent:"PostSidebarPhotoActions",hidden:!1,onSlide:v,onSlideStart:S,onSlideEnd:y,top:55,left:25,sliderWidth:226,sliderHeight:2,handleHeight:16,minValue:0,maxValue:1,roundValues:!1,label:"i18n.components.slider.kScale",labelClass:"label-above"}),p.rotationSlider=new r({parent:"PostSidebarPhotoActions",hidden:!1,onSlide:b,onSlideStart:w,onSlideEnd:y,top:107,left:25,sliderWidth:226,sliderHeight:2,handleHeight:16,minValue:-179,maxValue:180,roundValues:!0,label:"i18n.components.slider.kRotate",labelClass:"label-above",snapToTickEnable:!0,snapTicks:[-179,-135,-90,-45,0,45,90,135,180],snapSensitivity:5,showValueTooltip:!0,computeTooltipValue:e=>"".concat(Math.round(e),"&deg")}),p.opacitySlider=new r({parent:"PostSidebarPhotoActions",hidden:!0,onSlide:P,onSlideStart:x,onSlideEnd:C,top:55,left:25,sliderWidth:232,sliderHeight:2,handleHeight:16,minValue:.05,maxValue:1,roundValues:!1,label:"i18n.components.slider.kOpacity",labelClass:"label-above",showValueTooltip:!0,computeTooltipValue:function(e){return d.translate("components.slider.kValueLabel",{sliderValue:Math.round(100*e)})}}),p.layerSlider=new r({parent:"PostSidebarPhotoActions",hidden:!0,onSlide:B,onSlideStart:k,onSlideEnd:L,top:107,left:25,sliderWidth:232,sliderHeight:2,handleHeight:16,minValue:0,maxValue:1,roundValues:!0,label:"i18n.components.slider.kOrder",labelClass:"label-above",showValueTooltip:!0,computeTooltipValue:e=>e+1}),p.flipButtonContainer=new n({id:"PostFlipContainer",parent:"PostSidebarPhotoActions",top:137,left:25,height:75,width:150}),p.flipLabel=new n({parent:"PostFlipContainer",id:"PostFlipLabel",tag:"p",top:0,left:0,height:20,width:36,template:"i18n.panels.images.kFlip"}),p.flipHWrapper=new n({id:"PostFlipHWrapper",parent:"PostFlipContainer",top:20,left:0,height:40,width:55}),p.flipHButton=new a({parent:"PostFlipHWrapper",label:"",id:"PostFlipHButton",hoverLabel:"i18n.components.buttons.flipHorizontal.kHoverLabel",height:40,width:55,onClick:function(){F(!1)}}),p.flipVWrapper=new n({id:"PostFlipVWrapper",parent:"PostFlipContainer",top:20,left:64,height:40,width:55}),p.flipVButton=new a({parent:"PostFlipVWrapper",label:"",id:"PostFlipVButton",hoverLabel:"i18n.components.buttons.flipVertical.kHoverLabel",height:40,width:55,onClick:function(){F(!0)}}),p.cropButtonContainer=new n({id:"PostCropContainer",parent:"PostSidebarPhotoActions",top:210,left:25,height:75,width:150}),p.cropLabel=new n({parent:"PostCropContainer",id:"PostCropLabel",tag:"p",top:0,left:0,height:20,width:36,template:"i18n.components.buttons.kCrop"}),p.cropShapeLabel=new n({parent:"PostCropContainer",id:"PostCropLabel",tag:"p",top:0,left:60,height:20,width:60,template:"i18n.components.buttons.kShapeCrop"}),p.cropWrapper=new n({id:"PostCropWrapper",parent:"PostCropContainer",top:20,left:0,height:40,width:55}),p.cropButton=new a({parent:"PostCropWrapper",label:"",id:"PostCropButton",height:40,width:55,onClick:function(){u.events.publish("buttonpress-crop",{section:"crop"})}}),p.cropShapeWrapper=new n({id:"PostCropShapeWrapper",parent:"PostCropContainer",top:20,left:64,height:40,width:55}),p.cropShapeButton=new a({parent:"PostCropShapeWrapper",label:"",id:"PostCropShapeButton",height:40,width:55,onClick:function(){u.events.publish("buttonpress-crop",{section:"shape"})}}),p.cropShapeLabel=new n({parent:"PostCropContainer",id:"PostCropLabel",tag:"p",top:0,left:60,height:20,width:60,template:"i18n.components.buttons.kShapeCrop"}),p.setBackgroundButton=new a({parent:"PostSidebarPhotoActions",id:"PostSidebarSetBackgroundButton",class:"post-centered-button image-sidebar-button pin-to-background",label:"i18n.components.buttons.setBackground.kButtonLabel",height:50,width:190,onClick:function(){u.events.publish("buttonpress-set-background")}}),p.setForegroundButton=new a({parent:"PostSidebarPhotoActions",id:"PostSidebarSetForegroundButton",class:"post-centered-button image-sidebar-button",label:"i18n.components.buttons.setForeground.kButtonLabel",height:50,width:148,onClick:function(){u.events.publish("buttonpress-set-foreground")}}),e.cutoutEnabled&&(p.setCutoutNoneButton=new a({parent:"PostSidebarCutoutModes",id:"PostSidebarSetCutoutNoneButton",class:"post-centered-button image-sidebar-button",label:"i18n.components.buttons.setCutoutNone.kButtonLabel",height:50,width:200,onClick:function(){u.events.publish("buttonpress-set-cutout-none")}}),p.setCutoutRemoveBackgroundButton=new a({parent:"PostSidebarCutoutModes",id:"PostSidebarSetCutoutRemoveBackgroundButton",class:"post-centered-button image-sidebar-button",label:"i18n.components.buttons.setCutoutRemoveBackground.kButtonLabel",height:50,width:220,onClick:function(){u.events.publish("buttonpress-set-cutout-remove-background")}}),p.cutoutBetaTooltip=new n({parent:"PostSidebarCutoutModes",id:"PostBetaBadge",top:10,left:215,height:20,width:40,tag:"p",template:"i18n.panels.badges.kBetaLabel"})),p.replaceButton=new a({parent:"PostSidebarPhotoReplace",id:"PostSidebarReplaceButton",class:"post-centered-button image-sidebar-button",label:"i18n.components.buttons.kReplace",height:50,width:148,onClick:function(){u.events.publish("buttonpress-change-photo")}}),u.events.subscribe("shown",g),u}}.apply(t,o))||(e.exports=i)},OI2j:function(e,t,n){var o,i;o=[n("UFvF"),n("YLtl"),n("2Fsf"),n("wHG3"),n("yBTN")],void 0===(i=function(e,t,n,o,i){var a="post-editing-surface";const r=i.default,{PixiJSRenderer:s,PixiJSApp:l}=o,{PNGEncoding:d,RawEncoding:c,JPGEncoding:u,TargetRenderParameters:p,LiveViewLoadingImagesBeginEvent:h,LiveViewLoadingImagesEndEvent:g,LiveViewFrameRenderCompleteEvent:f,LiveViewDynamicRenderParams:m,LiveViewAnimationRenderCompleteEvent:b}=l;class v{constructor(e){this.graph=e,this.image=null,this.promise=null}}return function(i){const l=(i=i||{}).baseObject||new n(i),S=l.update;let w,y,x,C=[],P=1,k=null,L=!1,B=0,F=null,A=0,V=[],I=null;function T(){if(!k||!y)return;const e=k.documentSize();let t=e.width,n=e.height;const o=e.width;l.parent&&l.parent.getHeight&&(t=l.parent.getWidth(),n=l.parent.getHeight()),P=t/o,y.setSize(t,n,window.devicePixelRatio)}function O(){F||y.render(k.getGraph(!1))}function M(e){E(),w=new s(new r(e)),A=0,L=!1,y=w.liveViewService.createView(),x=w.imageService.createQueue(),I=y.addEventListener(e=>{if(e instanceof h)A++;else if(e instanceof g)A--,0===A&&l.events.publish("image-loading-end");else if(e instanceof f){L||(L=!0,l.events.publish("rendered"));const t=e.time;F&&function(e,t){if(t>0){const n=B/t,o=e/t;return Math.abs(n-1)<.01&&o<.01}return!1}(t,F.duration)&&l.events.publish("playback-new-loop-started"),B=t}else e instanceof b&&l.stopAnimation()}),l.$el[0].appendChild(y.getCanvas())}function E(){I&&(I.cancel(),I=null),y&&($(y.getCanvas()).remove(),y.destroy(),y=null),x&&(x.destroy(),x=null),w=null}l.getAspect=function(){const e=k?k.documentSize():{width:100,height:100};return e.width/e.height},l.handleParentResize=function(e){T()},l.getViewScale=function(){return P},l.disable=function(){l.$el.addClass("disabled"),l.events.publish("disabled")},l.enable=function(){l.$el.removeClass("disabled"),l.events.publish("enabled")},l.isRendered=function(){return L},l.allImagesLoaded=function(){return 0===A};return l.getWatermarkFootprint=function(){const e=k?k.documentSize():{width:100,height:100};return{width:190/e.width*100,height:40/e.height*100}},l.getRendition=function(t){if(!x)return e.resolve();const n=k.getGraph(!1);let o,i;if("image/png"===t.outputFormat)o=t.asDataURL?d.AsDataURL():d.AsBuffer();else{if(t.outputFormat&&"image/jpg"!==t.outputFormat&&"image/jpeg"!==t.outputFormat)throw new Error("getRendition: invalid output format ".concat(t.outputFormat));{const e=t.imageQuality||.75;o=t.asDataURL?u.AsDataURL(e):u.AsBuffer(e)}}if("number"==typeof t.longestSide)i=p.forGraphAtSize(n,t.longestSide,o);else if("number"==typeof t.width&&"number"==typeof t.height)i=p.fit(t.width,t.height,o);else if("number"==typeof t.width)i=p.fit(t.width,t.width/n.bounds.aspectRatio,o);else{if("number"!=typeof t.height)throw new Error("must specify width, height, or longestSide");i=p.fit(t.height*n.bounds.aspectRatio,t.height,o)}return x.render(n,i).then(e=>t.asDataURL?e.data:new Blob([e.data],{type:t.outputFormat||"image/jpeg"}))},l.getRenditionDataUrl=function(e){return l.getRendition(t.extend(e,{asDataURL:!0}))},l.getColorAtPoint=function(e){return function(){const e=k.getGraph(!1),t=V.find(t=>e.isEqualTo(t.graph));if(t)return t.promise;const n=new v(e);V.push(n);const o=p.forGraphAtSize(e,500,c.AsUint8Array());return n.promise=x.render(e,o).then(e=>(n.image=e,V=[n],n)),n.promise}().then(t=>(function(e,t){const{image:n,graph:o}=e,i=n.data,a=Math.round(n.width*(t.x/o.bounds.width)),r=4*(Math.round(n.height*(t.y/o.bounds.height))*n.width+a);return{r:i[r],g:i[r+1],b:i[r+2],a:i[r+3]/255}})(t,e))},l.getImageColorAtPoint=function(e){return{r:0,g:0,b:0,a:1}},l.update=function(e){S(e),void 0!==(e=e||{}).core&&e.core!==k&&(k=e.core,k?(M(k),T(),C.push(k.events.subscribe("document-in-new-renderable-state",O)),C.push(k.events.subscribe("design-updated",O)),y.render(k.getGraph(!1))):(E(),C.forEach((function(e){e.remove()})),C=[]))},l.setWatermark=function(e){this.showWatermark=e},l.playAnimation=function(e){y&&(void 0===e&&(e=!0),F=k.getGraph(!0),y.render(F,new m({loop:e})))},l.pauseAnimation=function(){y&&F&&y.render(F,new o.LiveViewDynamicRenderParams({startTime:B,endTime:B}))},l.stopAnimation=function(){y&&F&&(F=null,y.render(k.getGraph(!1)))},l.el.className+=" "+a,l}}.apply(t,o))||(e.exports=i)},QuSD:function(e,t,n){var o,i;o=[n("xeH2"),n("YLtl"),n("UFvF"),n("BG/d"),n("2AzE"),n("HTdw"),n("UzQk"),n("wHG3"),n("yBTN")],void 0===(i=function(e,t,n,o,i,a,r,s,l){const{PixiJSApp:d,PixiJSRenderer:c}=s,{RawEncoding:u,TargetRenderParameters:p,TargetTransformTypeEnum:h}=d,g=l.default;var f="post-filters-list",m={None:"i18n.common.kNone",Greyscale:"i18n.panels.images.kGrayscale",Darken:"i18n.panels.images.kDarken",Overlay:"i18n.panels.images.kContrast",Blend:"i18n.panels.images.kMatte",Multiply:"i18n.panels.images.kMultiply",DuoTone:"i18n.panels.images.kColorize",Screen:"i18n.panels.images.kLighten"};return function(s){const l=96;(s=s||{}).sections=[{id:"filters",tileAspect:1,maxTileWidth:100,verticalPadding:30,topPadding:30,bottomPadding:50,tileMargin:30,verticalTileMargin:48,label:"i18n.panels.images.kFilters",labelHeight:42}];const d=new i(s),b=d.update,v={};let S,w,y,x,C="",P=!0,k=null,L=null;const B=t.debounce((function(){if(!S)return;const e=S.placement,{width:t,height:o}=F(w&&w.bounds||y),i=[S.colorThemeKey,S.url,S.styleFilter.name,S.styleFilter.adjustments.asString,e.a,e.b,e.c,e.d,e.tx,e.ty,S.width,S.height,y.width,y.height].join(":");if(C!==i){C=i;const e=S.styleFilter.detachFromDatabase();let a=0;const r=d.getItems();let s=n();for(let n=0;n<r.length;n++){const i=r[n];let d=i.data;d.name===e.name?(a=n,e.colorLibrary=S.forma.page.colorLibrary,d=e,i.data=e):d.adjustments=e.adjustments,i.$el.find(".filter-canvas").css({height:Math.round(o)+"px",width:Math.round(t)+"px",marginLeft:-Math.round((t-l)/2)+"px",marginTop:-Math.round((o-l)/2)+"px"}),s=s.then(V(i))}s.done(),d.selectIndex(a,{silent:!0})}}),300);function F(e){return{width:Math.round(l*e.width/Math.min(e.width,e.height)),height:Math.round(l*e.height/Math.min(e.width,e.height))}}function A(){B()}function V(e){if(!L)return log.error("trying to render a tile before core wrapper has been established"),n.resolve();const t=e.$el.find("canvas")[0],o=w.page.document.beginTransaction("apply_styles_for_filter_thumbnails");w.childAt(0).applyStyle(e.data);const i=w.getGraph(r.PGMExportSettings.STATIC),{width:a,height:s}=F(w.bounds);return o.rollback(),L.render(i,new p(h.FillCentered,a,s,u.AsUint8Array())).then(e=>{t.width=e.width,t.height=e.height;const n=t.getContext("2d"),o=n.createImageData(e.width,e.height);o.data.set(e.data),n.putImageData(o,0,0)})}function I(e){t.delay((function(){if(S)for(var e=S.styleFilter.detachFromDatabase(),t=d.getItems(),n=0;n<t.length;n++){var o=t[n];if(o.data.name===e.name){e.colorLibrary=S.forma.page.colorLibrary,o.data=e;const t=V(o);"function"==typeof t&&t()}}}),100)}function T(e){d.events.publish("filter-checkbox-changed",e.target.checked),d.deselectSelected()}return d.update=function(t){b(t);var n=!1;if(void 0!==(t=t||{}).documentSize&&(y=t.documentSize,d.update({items:x})),t.core&&(k=new c,L=k.imageService.createQueue(new g(t.core))),void 0!==t.forma&&(w=t.forma,n=!0),void 0!==t.items&&(void 0===x||!function(e,t){if(!e||!t)return!1;if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++){var o=e[n],i=t[n];if(o.name!==i.name)return!1}return!0}(t.items,x))){var i=[];if(!0===t.disabled){for(var a in m){var r=new o({group:"filters",data:{},selected:!1,reselectable:!1,hidden:!0});r.$el.append('<div class="frame disabled"></div><div class="overlay"></div><div class="label disabled">'+m[a]+"</div>"),i.push(r)}P=!0}else{S&&(P=!1),x=t.items;const{width:n,height:a}=F(w&&w.bounds||y);for(var s=0;s<t.items.length;s++){var u=t.items[s],p=-1===e.inArray(u.name,["None","Greyscale"]),h=new o({group:"filters",class:"outline-selection",data:u,selected:!1,reselectable:p,showShuffleOverlay:p,shuffleLabel:"i18n.common.kShuffle",hidden:!0}),f=m[u.name]||u.name;h.$el.append('<div class="frame"></div><div class="label">'.concat(f,"</div>"));var v=e('<div class="filter-wrapper"><div class="filter-canvas" style="'+"height:".concat(a,"px;")+"width:".concat(n,"px;")+"margin-left:".concat(-Math.round((n-l)/2),"px;")+"margin-top:".concat(-Math.round((a-l)/2),"px;")+'"><canvas></canvas></div></div>');h.$el.append(v),i.push(h)}}d.setItems(i),C=""}if(void 0!==t.styleFilters)for(var A=d.getItems(),V=A.length-1;V>=0;V--){var I=t.styleFilters[V];I&&(A[V].data=I)}void 0!==t.image&&(S=t.image,n=!0),n&&!1===d.isHidden()&&B()},d.isDisabled=function(){return P},d.showCheckBox=function(){d.update({sections:[{id:"filters",topPadding:45}]}),v.applyAllCheckbox.show()},d.hideCheckBox=function(){d.update({sections:[{id:"filters",topPadding:25}]}),v.applyAllCheckbox.hide()},d.el.className+=" "+f,d.events.subscribe("shown",A),d.events.subscribe("item-selected",I),v.applyAllCheckbox=new a({parent:d,id:"applyToAllPhotosCheckbox",label:"i18n.panels.images.kApplyFilterToAllImage",left:24,top:59,handleChange:T,hidden:!0}),d}}.apply(t,o))||(e.exports=i)},Qzxj:function(e,t,n){var o,i;o=[n("xeH2"),n("YLtl"),n("2Fsf"),n("rPfa"),n("6G8C")],void 0===(i=function(e,t,n,o,i){var a="post-sidebar-icon-color";return function(e){var o,r,s=new n(e=e||{}),l=[],d={},c=t.throttle((function(e){if(!s.isHidden()&&o){e=e||{};var n=o.getSelectedForma();e.doFade?(d.listOfIconColors.$el.addClass("fade-out"),t.delay((function(){h(n,e),d.listOfIconColors.$el.removeClass("fade-out")}),100)):h(n,e),d.listOfIconColors.update()}}),400);function u(){var e=o.getSelectedForma();e&&o.isIcon(e)&&(r=e.formaID,c({doFade:!1,updateSelection:!0}),l.push(o.events.subscribe("forma-selected",(function(e){var t;e.forma&&(e.forma.formaID!==r?(t=e.forma.formaID,r=t,c({doFade:!0,updateSelection:!1}),d.listOfIconColors.closeColorPicker()):(g(e.forma,{updateSelection:!1}),d.listOfIconColors.update()))}))))}function p(){!function(){for(var e=0;e<l.length;e++)l[e].remove();l=[]}()}function h(e,n){if(!s.isHidden()&&e){g(e,n);var o=e.controller.getSuggestableColors(),i=t.map(o,(function(e){return[{red:255*e[0].rgbColor.red,green:255*e[0].rgbColor.green,blue:255*e[0].rgbColor.blue,roles:e[0].sparkRoles,id:e[0].sparkElementID}]}));d.listOfIconColors.setSuggestedColors(i),d.listOfIconColors.setDefaultColors(),d.listOfIconColors.update()}}function g(e,t){if(o&&(e=e||o.getSelectedForma())){var n=[],i=o.getShapeFormaTheoColor(e);i&&n.push({red:255*i.rgbColor.red,green:255*i.rgbColor.green,blue:255*i.rgbColor.blue,roles:i.sparkRoles,id:i.sparkElementID}),d.listOfIconColors.setCurrentColors(n,t)}}function f(e,t){s.events.publish("icon-color-selected",e,t)}return s.setCoreWrapper=function(e){o=e},s.setBrandKitColors=function(e){d.listOfIconColors.setBrandKitColors(e)},s.removeBrandkitSections=function(){d.listOfIconColors.removeBrandkitSections()},s.handleEyeDropperClicked=function(e){d.listOfIconColors.handleEyeDropperClicked(e)},s.handleEyeDropperMoved=function(e,t){d.listOfIconColors.handleEyeDropperMoved(e,t)},s.selectCurrentColor=function(e){d.listOfIconColors.selectCurrentColor(e)},s.el.className+=" "+a,d.listOfIconColors=new i({elementClassName:"post-icon-colors-list",parent:s,hidden:!1,top:0,bottom:0,colorPicker:e.colorPicker}),s.events.subscribe("shown",u),s.events.subscribe("hidden",p),d.listOfIconColors.events.subscribe("item-selected",f),d.listOfIconColors.events.subscribe("update-color",f),s.republish(d.listOfIconColors.events,"eyedropper-changed"),s}}.apply(t,o))||(e.exports=i)},R81C:function(e,t,n){var o,i;o=[n("xeH2"),n("YLtl"),n("BG/d"),n("2AzE")],void 0===(i=function(e,t,n,o){return function(t){var i=230,a=90,r=i*i,s=i/a;(t=t||{}).renderOvershoot=800,t.sections=[{id:"default",tileAspect:s,maxTileWidth:i,horizontalPadding:25,verticalPadding:25,tileMargin:14,label:"i18n.panels.badges.kFromTemplate",labelHeight:37}];var l=new o(t);return l.populate=function(){var t=[];e.get("/api/post/v1/badges").done((function(o){o.items.forEach((function(o){t.push(function(t){var o,l,d,c=new n({class:"outline-selection",data:(o={imgUrl:t.thumbnail,manifestUrl:t.manifestUrl,assetId:t.assetId},d={},d.imgUrl=o.imgUrl,d.assetId=o.assetId,d.manifestPromise=function(){return l||(l=Q.defer(),e.get(o.manifestUrl,(function(e){l.resolve(e)})).fail((function(e,t,n){l.reject({url:o.manifestUrl,jqXHR:e,textStatus:t,errorThrown:n})}))),l.promise},d),hidden:!0});return c.hasImageBeenSet=!1,c.events.subscribe("shown",(function(){if(!1===c.hasImageBeenSet){c.hasImageBeenSet=!0;var n=t.width/t.height,o=Math.min(i,Math.sqrt(r*n)),l=o/n;l>a&&(o=(l=a)*n);var d=e('<div class="backdrop"></div>');c.$el.html(d);var u=new Image,p=window.devicePixelRatio>=2?460:230;u.src="".concat(t.thumbnail,"/format/jpg/dimension/width/size/").concat(p),c.$el.append(u),c.$el.css({width:Math.round(o)+"px",height:Math.round(l)+"px","margin-left":Math.round((i-o)/2)+"px","margin-top":Math.round((i/s-l)/2)+"px"})}})),c}(o))})),l.setItems(t,"default")}))},l.el.className+=" post-badge-list post-panel-divider-above",l.populate(),l}}.apply(t,o))||(e.exports=i)},W3p6:function(e,t,n){var o,i;o=[n("xeH2"),n("YLtl"),n("NgGw"),n("4eTD"),n("Qzxj")],void 0===(i=function(e,t,n,o,i){var a="post-sidebar-icon";return function(e){var t=new n(e=e||{}),r={};function s(){}return t.setCoreWrapper=function(e){e,r.icon.setCoreWrapper(e),r.color.setCoreWrapper(e)},t.setBrandKitColors=function(e){r.color.setBrandKitColors(e)},t.removeBrandkitSections=function(){r.color.removeBrandkitSections()},t.handleEyeDropperClicked=function(e){r.color.handleEyeDropperClicked(e)},t.handleEyeDropperMoved=function(e,t){r.color.handleEyeDropperMoved(e,t)},t.selectCurrentColor=function(e){r.color.selectCurrentColor(e)},t.el.className+=" "+a,r.icon=new o({parent:t,hidden:!0,visibilityGroup:"icon-sidebar"}),r.color=new i({parent:t,hidden:!0,colorPicker:e.colorPicker,visibilityGroup:"icon-sidebar"}),t.registerSidebarTabWithId(r.icon,"icon"),t.registerSidebarTabWithId(r.color,"color"),t.republish(r.icon.events,"buttonpress-replace-icon"),t.republish(r.icon.events,"hidden","hide-icon-picker"),t.republish(r.color.events,"icon-color-selected"),t.republish(r.color.events,"eyedropper-changed"),t.events.subscribe("shown",s),t}}.apply(t,o))||(e.exports=i)},WCfb:function(e,t,n){var o,i;o=[n("xeH2"),n("YLtl"),n("2Fsf"),n("UNQu"),n("ywYV"),n("+Ltv"),n("UzQk")],void 0===(i=function(e,t,n,o,i,a,r){var s=e(document.body),l=r.TheoPoint,d=r.TheoSize,c=r.TheoRect,u=r.Matrix2D,p=navigator.platform.indexOf("Mac")>-1,h="post-forma-select-box";const g=44,f=20,m=6;return function(b){var v,S,w=new n(b=b||{}),y=w.hide,x=b.onHide,C=w.update,P="",k=u.Identity,L=b.bounds||c.fromXYWH(0,0,500,500),B=b.documentSize||new d(1e3,1e3),F=!!b.enablePips,A=!!b.thinOutline,V=!!b.groupOutlineColor,I=!!b.wideOutline,T=!1,O=!!b.transparentOutline,M=!!b.textFrame,E=!!b.preferLeftSideHandle,H=b.handlePoints||null,D=!!b.rotateable,W=0,R={};function G(e){w.$el.toggleClass("gesture-in-progress",e)}function N(e){var t=z(),n=w.parent.$el.offset();return{x:(e.x-n.left)/t,y:(e.y-n.top)/t}}function z(){return w.parent.getWidth()/B.width}function U(){return k.transformPoint(L.evalXY(.5,.5))}function _(e){var t,n=(t=w.parent.$el.offset(),U().multiply(z()).add(new l(t.left,t.top)));return i.radiansBetweenPoints(n,e)-Math.PI/2}function $(e){G(!0),v=e.meta,w.events.publish("handle-drag",{part:e.meta.part,action:"begin",spot:e.meta.spot,location:N(e)})}function Y(e){G(!1),v=void 0,w.events.publish("handle-drag",{part:e.meta.part,action:"end",spot:e.meta.spot,location:N(e)})}function j(e){w.events.publish("handle-drag",{part:e.meta.part,action:"update",spot:e.meta.spot,location:N({x:e.absX,y:e.absY})})}function K(e,t,n){return new o({meta:{part:e,spot:t},class:n,parent:S,template:"<p></p>",onDrag:j,onDragStart:$,onDragEnd:Y})}var X=new n({parent:w,class:"highlight-container"});S=new n({class:"inner-frame",parent:w,template:'<div class="inner-frame-edge"></div>'});var Q=new n({class:"crop-inner-grid1",parent:S,template:'<div class="inner-frame-edge"></div>'}),q=new n({class:"crop-inner-grid2",parent:S,template:'<div class="inner-frame-edge"></div>'}),J=[K("corner",{x:0,y:0},"pip tl"),K("corner",{x:1,y:0},"pip tr"),K("corner",{x:0,y:1},"pip bl"),K("corner",{x:1,y:1},"pip br"),K("side",{x:0,y:.5},"sidepip lp"),K("side",{x:1,y:.5},"sidepip rp"),K("side",{x:.5,y:1},"sidepip bp"),K("side",{x:.5,y:0},"sidepip tp")],Z=new o({class:"rotatepip rotate",parent:S,template:'<div class="stem"></div><p></p><div class="pip-icon"></div>',onDragStart:function(e){W=_(e.abs),G(!0),w.events.publish("handle-drag",{part:"rotate",action:"begin"})},onDrag:function(e){var t=_(e.abs);w.events.publish("handle-drag",{part:"rotate",action:"update",totalDeltaRadians:t-W,isShortcut:!1})},onDragEnd:function(){G(!1),w.events.publish("handle-drag",{part:"rotate",action:"end"})}});function ee(t){if(!a.disableCustomKeyboardShortcuts){var n=!!t.shiftKey,o=t.ctrlKey&&!p||t.metaKey&&p,i=n?10:1;if(t.altKey){var r=(n?15:1)*(Math.PI/180)}switch(t.which){case 68:o&&(t.preventDefault(),w.events.publish("duplication-shortcut-pressed"));break;case 9:if(!e(t.target).is("input, textarea"))return t.preventDefault(),w.events.publish("select-box-tab-key-pressed",{shiftKey:n}),!1;break;case 13:if(!e(t.target).is("input, textarea"))return t.preventDefault(),w.events.publish("select-box-return-key-pressed",{shiftKey:n}),!1;break;case 27:if(!e(t.target).is("input, textarea"))return t.preventDefault(),w.events.publish("select-box-escape-key-pressed",{shiftKey:n}),!1;break;case 38:w.events.publish("select-box-arrow-key-pressed",{translate:{x:0,y:-i}});break;case 40:w.events.publish("select-box-arrow-key-pressed",{translate:{x:0,y:i}});break;case 37:if(t.altKey){w.events.publish("select-box-rotation-shortcut-pressed",{part:"rotate",action:"begin"}),w.events.publish("select-box-rotation-shortcut-pressed",{part:"rotate",action:"update",totalDeltaRadians:-r,isShortcut:!0}),w.events.publish("select-box-rotation-shortcut-pressed",{part:"rotate",action:"end"});break}w.events.publish("select-box-arrow-key-pressed",{translate:{x:-i,y:0}});break;case 39:if(t.altKey){w.events.publish("select-box-rotation-shortcut-pressed",{part:"rotate",action:"begin"}),w.events.publish("select-box-rotation-shortcut-pressed",{part:"rotate",action:"update",totalDeltaRadians:r,isShortcut:!0}),w.events.publish("select-box-rotation-shortcut-pressed",{part:"rotate",action:"end"});break}w.events.publish("select-box-arrow-key-pressed",{translate:{x:i,y:0}});break;case 8:case 46:if(!e(t.target).is("input, textarea"))return t.preventDefault(),w.events.publish("select-box-delete-key-pressed"),!1;break;case 71:if(o&&!e(t.target).is("input, textarea"))return t.preventDefault(),n?w.events.publish("select-box-ungroup-key-pressed"):w.events.publish("select-box-group-key-pressed"),!1;break;case 219:o&&(t.preventDefault(),t.altKey?w.events.publish("change-z-order-shortcut",{direction:"back"}):w.events.publish("change-z-order-shortcut",{direction:"backward"}));break;case 221:o&&(t.preventDefault(),t.altKey?w.events.publish("change-z-order-shortcut",{direction:"front"}):w.events.publish("change-z-order-shortcut",{direction:"forward"}))}}}function te(){w.$el.width("100%"),w.$el.height("100%"),ne(S.$el,k,L),t.each(R,(function(e){ne(e.frame.$el,e.src.placement,e.src.bounds)}))}function ne(e,t,n){var o=n.evalXY(0,0),i=z();t=(t=t.translate(o)).scaleXY(i,i);var a=Math.sqrt(Math.pow(t.a,2)+Math.pow(t.b,2)),s=t.transformPoint(l.ZERO);t=t.translate(s.multiply(-1)).scaleXY(1/a,1/a).translate(s),n=n.scaleXY(a,a,r.TheoPoint.ZERO),e.css({width:n.width+"px",height:n.height+"px","transform-origin":"top left",transform:"matrix("+t.asArray.map((function(e){return t=e,Math.round(1e3*t)/1e3;var t})).join(",")+")"})}return w.getCenterPoint=function(){return U()},w.getRelativeHeight=function(){return viewHeight},w.handleParentResize=function(e){te()},w.update=function(e){void 0!==(e=e||{}).inCropMode&&(T=e.inCropMode),void 0!==e.thinOutline&&(A=e.thinOutline),void 0!==e.groupOutlineColor&&(V=e.groupOutlineColor),void 0!==e.wideOutline&&(I=e.wideOutline),void 0!==e.textFrame&&(M=e.textFrame),void 0!==e.preferLeftSideHandle&&(E=e.preferLeftSideHandle),void 0!==e.rotateable&&(D=e.rotateable),void 0!==e.enablePips&&(F=e.enablePips),void 0!==e.handlePoints&&(H=e.handlePoints),void 0!==e.transparentOutline&&(O=e.transparentOutline);var o=!1;if(void 0!==e.documentSize&&(B=e.documentSize,o=!0),void 0!==e.bounds&&(L=e.bounds,o=!0),Q.show(T),q.show(T),S.$el.toggleClass("text-inner-frame",M),S.$el.toggleClass("inner-frame",!M),w.$el.toggleClass("thin-outline",A),w.$el.toggleClass("group-outline-wide",I),w.$el.toggleClass("group-outline-color",V),w.$el.toggleClass("transparent-outline",O),Z.show(D),void 0!==e.highlightRects){var i=e.highlightRects||[];t.each(i,(function(e){var t=R[e.formaID];t?t.src=e:((t={frame:new n({class:"multiselect-frame",parent:X}),src:e}).frame.$el.toggleClass("group-multiselect-color",e.isGroup),R[e.formaID]=t,o=!0)}));var a=[];t.each(R,(function(e){i.find((function(t){return t.formaID===e.src.formaID}))||a.push(e)})),t.each(a,(function(e){e.frame.remove(),delete R[e.src.formaID]}))}if(function(){const e=L.size.height*z();if(M&&e<g+f-m&&function(e){return void 0!==e.find(e=>.5!==e.y)}(H)&&function(e){return void 0!==e.find(e=>.5===e.y)}(H))if(v&&"corner"===v.part){const e=v.spot;H=[new l(e.x,e.y),new l(1-e.x,.5)]}else H=E?[new l(0,.5),new l(1,0)]:[new l(1,.5),new l(0,0)]}(),J.forEach((function(e){F&&H?e.show(null!=H.find((function(t){return t.x==e.meta.spot.x&&t.y==e.meta.spot.y}))):e.show(F),"corner"===e.meta.part?(e.$el.toggleClass("group-outline-color",V),T?e.$el.removeClass("pip").addClass("croppip"):e.$el.removeClass("croppip").addClass("pip")):"side"===e.meta.part&&(T?e.$el.removeClass("sidepip").addClass("sidecroppip"):e.$el.removeClass("sidecroppip").addClass("sidepip"))})),void 0!==e.matrix2d){var r=(k=e.matrix2d).asArray.join(",");P!=r&&(P=r,o=!0)}C(e),o&&te()},w.hide=function(){x(),y()},w.update({matrix2d:k,bounds:L}),w.el.className+=" "+h,w.events.subscribe("shown",(function(){s.on("keydown",ee)})),w.events.subscribe("hidden",(function(){s.off("keydown",ee)})),w}}.apply(t,o))||(e.exports=i)},efk3:function(e,t,n){var o,i;o=[n("7len"),n("/JSe"),n("+FNJ"),n("2Fsf"),n("bBG2"),n("MGCh")],void 0===(i=function(e,t,n,o,i,a){return function(r){const s=i.default,l=a.channel("theo-sidebar-animation");(r=r||{}).tag=r.tag||t.TheoAnimationCollection.elementName;const d=new e.AnimationOptions,c=new o(r),u=c.update,{THEO_ANIMATION_COLLECTION_OPTION_SELEECT_EVENT:p}=n;let h;const g=function(e){if(!h)return void l.assert(h,"missing coreWrapper when select animation style");const t=(e.originalEvent.detail.optionName||"").split(/([0-9]+)/);if(t.length>0){const e=t[0],n=parseInt(t.length>1?t[1]:"",10);c.events.publish("animation-loading-begin"),c.el.setAttribute("waiting",""),setTimeout(()=>{h.setAnimationStyle(e,n).finally((function(){c.el.removeAttribute("waiting"),c.events.publish("animation-loading-end")})),s.publish("animationPreviewed")},150)}},f=function(){c.$el.off(p,g)},m=function(){c.$el.on(p,g)};return c.update=function(e){if(!h)return;const t=(n=h.getCurrentAnimationStyle())?"Color"===n.name||"Fill"===n.name||n.variantCount>1?"".concat(n.name).concat(n.variant):n.name:"None";var n;c.el.categoryList=d.updateAnimationOptions(h),c.el.setAttribute("selected-option-name",t),u(e)},c.setCoreWrapper=function(e){h=e},c.el.categoryList=d.getInitialAnimationOptions(),c.events.subscribe("shown",m),c.events.subscribe("hidden",f),c.isHidden()||m(),c}}.apply(t,o))||(e.exports=i)},jo99:function(e,t,n){var o,i;o=[n("Avqh"),n("2Fsf"),n("W1Jy"),n("KFmL"),n("+VG/"),n("R81C"),n("bBG2")],void 0===(i=function(e,t,n,o,i,a,r){const s=r.default;var l="post-badge-picker";return function(t){(t=t||{}).layout="rows",t.panels=[{id:"BadgePickerHeader",size:"131px"},{id:"BadgePickerBadges",size:"auto"}];var r=new n(t),d={};function c(e,t){d.listOfBadges.deselectSelected(),r.events.publish("badge-selected",e,t)}function u(){s.publish("customTextButtonPressed"),"function"==typeof t.onAddText&&t.onAddText()}function p(){r.hide()}return r.el.className+=" "+l,d.fromScratchLabel=new e({parent:"BadgePickerHeader",tag:"h2",template:"i18n.panels.badges.kFromScratch"}),d.closeButton=new i({parent:"BadgePickerHeader",class:"close-button",width:24,height:24,onClick:p}),d.addCustomTextButton=new o({parent:"BadgePickerHeader",class:"pill",label:"i18n.panels.badges.kCustom",onClick:u}),d.listOfBadges=new a({parent:"BadgePickerBadges"}),d.listOfBadges.events.subscribe("item-selected",c),r}}.apply(t,o))||(e.exports=i)},mYMA:function(e,t,n){var o,i;o=[n("YLtl"),n("2Fsf"),n("W1Jy"),n("+VG/"),n("pEL3"),n("HTdw"),n("rPfa"),n("bBG2"),n("Af0U"),n("UzQk"),n("8DU0"),n("GSfz")],void 0===(i=function(e,t,n,o,i,a,r,s,l,d,c,u){const p=s.default;var h="post-sidebar-layout";const g=c.default;var f=140,m=180;return function(s){(s=s||{}).layout="rows",s.panels=[{id:"PostSidebarLayoutActions",size:m+"px"},{id:"PostSidebarLayoutContent",class:"post-panel-divider-above",size:"auto"}];var d,c,b,v,S,w=new n(s),y={},x=w.hide,C=w.show,P=!1,k=[],L=u.keys.V2_LAYOUT_COACHMARK;function B(e){w.allowAutomaticLayout()&&d.enableAutomaticLayoutMode(),y.layoutModeCheckbox.show(),I(),(e=void 0===e||e)&&(R(),U(d.getLayoutSpacing()===d.getLayoutMargin()))}function F(){d.prepareForGridLayouts(),B(!0),T(),k.push(d.events.subscribe("design-updated",V)),g.getSetting(L).then((function(e){e||(S||(S=new i({parent:y.listOfGrids,message:"i18n.components.coachmarks.layout.kMessage",title:"i18n.components.coachmarks.layout.kTitle",hidden:!0,priority:5,offsetY:15,offsetX:0,userSettingFlag:L,anchorElement:y.listOfGrids})),S&&S.show())}))}function A(){e.each(k,(function(e){e.remove()})),k=[],d.disableAutomaticLayoutMode()}function V(){B(!P),T()}function I(){if(d){var e=d.spacingChangesVisible();e?(y.spacingSlider.show(),y.linkButton.show(),y.topLinkLine.show(),y.bottomLinkLine.show()):(y.spacingSlider.hide(),y.linkButton.hide(),y.topLinkLine.hide(),y.bottomLinkLine.hide());var t=e?m:f;w.update({panels:[{id:"PostSidebarLayoutActions",size:t+"px"}]})}}function T(){var e=d.getGridForma(!0),t=e&&e.style&&e.style.name;t&&t!=v&&(y.listOfGrids.selectLayout(e.style),v=t)}function O(e){e.target.checked?d.enableAutomaticLayoutMode():d.disableAutomaticLayoutMode()}function M(e,t){c=!0,e,w.events.publish("grid-item-selected",e,t)}function E(e){W(e.value,-1),D(2*e.value,b?2*e.value:-1)}function H(e){W(-1,e.value),D(b?2*e.value:-1,2*e.value)}function D(e,t){d.setLayoutSpacingAndMargin(e,t).done()}function W(e,t){e>=0?(y.spacingSlider.setValue(Math.round(e)),b&&y.borderSlider.setValue(Math.round(e))):t>=0&&(y.borderSlider.setValue(Math.round(t)),b&&y.spacingSlider.setValue(Math.round(t)))}function R(){y.spacingSlider.setValue(Math.round(d.getLayoutSpacing()/2)),y.borderSlider.setValue(Math.round(d.getLayoutMargin()/2))}function G(){P=!0,d.beginGesture()}function N(){R(),d.endGesture(!0),P=!1}function z(){if(U(!b),b){const e=d.getLayoutSpacing(),t=d.getLayoutMargin(),n=0===e||0===t?Math.max(t,e):Math.min(t,e);D(n,n),R()}}function U(e){b=e,e?(y.linkButton.$el.find("i").addClass("lock-close"),y.linkButton.$el.find("i").removeClass("lock-open")):(y.linkButton.$el.find("i").addClass("lock-open"),y.linkButton.$el.find("i").removeClass("lock-close"))}return w.setCoreWrapper=function(e){d=e,y.listOfGrids.setCoreWrapper(e),I(),w.allowAutomaticLayout()&&d.enableAutomaticLayoutMode()},w.deselectSelected=function(){y.listOfGrids.deselectSelected()},w.allowAutomaticLayout=function(){return y.layoutModeCheckbox.$el.find("input")[0].checked},w.returnFromSelectionState=function(){d.prepareForGridLayouts(),w.allowAutomaticLayout()&&d.enableAutomaticLayoutMode()},w.show=function(){C(),c=!1},w.hide=function(){x(),c&&p.publish("resizeAndGrid")},w.el.className+=" "+h,y.layoutModeToolWrapper=new t({parent:"PostSidebarLayoutActions",height:15,bottom:28,left:24,top:"auto"}),y.layoutModeCheckbox=new a({parent:y.layoutModeToolWrapper,id:"disableMagicLayoutCheckbox",label:"i18n.components.input.toggle.kMoveContentWithLayout",height:15,checked:!1,handleChange:O}),y.borderSlider=new r({parent:"PostSidebarLayoutActions",onSlide:H,onSlideStart:G,onSlideEnd:N,top:55,left:24,sliderWidth:210,sliderHeight:2,handleHeight:16,minValue:0,maxValue:100,roundValues:!0,snapSensitivity:5,label:"i18n.components.slider.kBorder",labelClass:"label-above",showValueTooltip:!0}),y.spacingSlider=new r({parent:"PostSidebarLayoutActions",onSlide:E,onSlideStart:G,onSlideEnd:N,top:107,left:24,sliderWidth:210,sliderHeight:2,handleHeight:16,minValue:0,maxValue:100,roundValues:!0,snapSensitivity:5,label:"i18n.components.slider.kCell",labelClass:"label-above",showValueTooltip:!0}),y.linkButton=new o({parent:"PostSidebarLayoutActions",label:"",width:26,height:26,id:"LinkSlidersButton",class:"post-layout-link",onClick:z}),y.topLinkLine=new t({parent:"PostSidebarLayoutActions",top:55,left:251,width:7,height:14,id:"TopLinkLine",class:"top-link-line",hidden:!1}),y.bottomLinkLine=new t({parent:"PostSidebarLayoutActions",top:97,left:251,width:7,height:14,id:"BottomLinkLine",class:"bottom-link-line",hidden:!1}),y.listOfGrids=new l({parent:"PostSidebarLayoutContent",hidden:!1}),w.events.subscribe("shown",F),w.events.subscribe("hidden",A),y.listOfGrids.events.subscribe("item-selected",M),w}}.apply(t,o))||(e.exports=i)},rOUP:function(e,t,n){var o,i;o=[n("xeH2"),n("YLtl"),n("2Fsf"),n("TW0n"),n("W1Jy"),n("KFmL"),n("uXkU"),n("bBG2"),n("QuSD"),n("3xm6")],void 0===(i=function(e,t,n,o,i,a,r,s,l,d){const c=s.default;var u="post-sidebar-photo",p=!1,h=80,g=502,f=650,m=666;const b=e=>e**3,v=e=>e**(1/3);return function(e){(e=e||{}).layout="rows",e.panels=[{id:"PostSidebarPhotoEnhancements",size:h+"px",kind:"fixed",min:h+"px",max:h+"px"},{id:"PostSidebarPhotoFilters",class:"post-panel-divider-above",size:f+"px",kind:"fixed",min:f+"px",max:f+"px"},{id:"PostSidebarPhotoEffects",class:"post-panel-divider-above",size:"120px",kind:"fixed",min:"120px",max:"120px"}];var t,s=new i(e),S={};function w(t){if(!e.enablePixiRenderer)return t;var n=1+99*b(t/100);return n=1===n?0:n}function y(e,t){s.events.publish("filter-selected",e,t,p),c.publish("imageFilterSelected",{filterName:e.name})}function x(){if(t){var e=t.backgroundImageFormas().length>1;e?S.listOfFilters.showCheckBox():S.listOfFilters.hideCheckBox();var n=e?m:f;s.update({panels:[{id:"PostSidebarPhotoFilters",size:n+"px",min:n+"px",max:n+"px"}]})}}function C(){s.updateForCurrentSelection()}function P(n){var o=t.getImageAdjustments(n);S.contrastSlider.setValue(o.contrast),S.brightnessSlider.setValue(o.brightness),S.saturationSlider.setValue(o.saturation),S.highlightsSlider.setValue(o.highlights),S.shadowsSlider.setValue(o.shadows),S.warmthSlider.setValue(o.warmth),S.sharpenSlider.setValue(o.sharpness),S.blurSlider.setValue(function(t){if(!e.enablePixiRenderer)return t;var n=0;return t>1&&(n=100*v((t-1)/99)),n}(o.blur))}function k(){t.beginGesture()}function L(){t.endGesture(!0)}return s.updateForCurrentSelection=function(){if(!s.isHidden()){var e=t.getSelectedForma();e&&(e.isImage()||e.isShape())&&(x(),e.isImage()&&(P(e),s.updateFilters({items:t.getImageFilters(),image:t.getImagePreviewData(e),forma:e,documentSize:t.getDocumentSize()})))}},s.updateFilters=function(e){return e=e||{items:t.getImageFilters(),image:t.getImagePreviewData(t.getSelectedForma()),forma:t.getSelectedForma(),documentSize:t.getDocumentSize()},S.listOfFilters.update(e)},s.setCoreWrapper=function(e){(t=e).events.subscribe("forma-added",s.updateForCurrentSelection),t.events.subscribe("formae-deleted",s.updateForCurrentSelection),t.events.subscribe("forma-selected",s.updateForCurrentSelection),S.listOfFilters.update({core:e}),x()},s.el.className+=" "+u,S.listOfFilters=new l({enablePixiRenderer:e.enablePixiRenderer,parent:"PostSidebarPhotoFilters",hidden:!1}),S.enhancePhotoDropdownButton=new o({parent:"PostSidebarPhotoEnhancements",id:"EnhancePhotoDropdownButton",template:"<p class='dropdown-label'>i18n.components.buttons.kEnhancePhoto</p><div class='dropdown-button'></div>",height:40,width:232,top:20,left:22,onClick:function(){var e=S.enhancePhotoDropdownButton.$el.find(".dropdown-button");e.hasClass("up-arrow")?(S.contrastSlider.hide(),S.brightnessSlider.hide(),S.saturationSlider.hide(),S.highlightsSlider.hide(),S.shadowsSlider.hide(),S.warmthSlider.hide(),S.sharpenSlider.hide(),S.resetSlidersButton.hide(),s.update({panels:[{id:"PostSidebarPhotoEnhancements",size:h+"px",min:h+"px",max:h+"px"}]})):(S.contrastSlider.show(),S.brightnessSlider.show(),S.saturationSlider.show(),S.highlightsSlider.show(),S.shadowsSlider.show(),S.warmthSlider.show(),S.sharpenSlider.show(),S.resetSlidersButton.show(),s.update({panels:[{id:"PostSidebarPhotoEnhancements",size:g+"px"}]})),e.toggleClass("up-arrow")}}),S.contrastSlider=new r({parent:"PostSidebarPhotoEnhancements",onSlide:function(e){t.changeImageAdjustments({contrast:e.value})},onSlideStart:function(){c.publish("imageAdjust:ContrastApplied"),k()},onSlideEnd:L,top:76,left:24,sliderWidth:232,minValue:-100,maxValue:100,stepValue:1,showValueTooltip:!0,label:d.translate("components.slider.kContrast"),hidden:!0,snapTicks:[0],snapSensitivity:5}),S.brightnessSlider=new r({parent:"PostSidebarPhotoEnhancements",onSlide:function(e){t.changeImageAdjustments({brightness:e.value})},onSlideStart:function(){c.publish("imageAdjust:BrightnessApplied"),k()},onSlideEnd:L,top:128,left:24,sliderWidth:232,minValue:-100,maxValue:100,stepValue:1,showValueTooltip:!0,label:d.translate("components.slider.kBrightness"),hidden:!0,snapTicks:[0],snapSensitivity:5}),S.saturationSlider=new r({parent:"PostSidebarPhotoEnhancements",onSlide:function(e){t.changeImageAdjustments({saturation:e.value})},onSlideStart:function(){c.publish("imageAdjust:SaturationApplied"),k()},onSlideEnd:L,top:180,left:24,sliderWidth:232,minValue:-100,maxValue:100,stepValue:1,showValueTooltip:!0,label:d.translate("components.slider.kSaturation"),hidden:!0,snapTicks:[0],snapSensitivity:5}),S.highlightsSlider=new r({parent:"PostSidebarPhotoEnhancements",onSlide:function(e){t.changeImageAdjustments({highlights:e.value})},onSlideStart:function(){c.publish("imageAdjust:HighlightsApplied"),k()},onSlideEnd:L,top:232,left:24,sliderWidth:232,minValue:-100,maxValue:100,stepValue:1,showValueTooltip:!0,label:d.translate("components.slider.kHighlights"),hidden:!0,snapTicks:[0],snapSensitivity:5}),S.shadowsSlider=new r({parent:"PostSidebarPhotoEnhancements",onSlide:function(e){t.changeImageAdjustments({shadows:e.value})},onSlideStart:function(){c.publish("imageAdjust:ShadowsApplied"),k()},onSlideEnd:L,top:284,left:24,sliderWidth:232,minValue:-100,maxValue:100,stepValue:1,showValueTooltip:!0,label:d.translate("components.slider.kShadows"),hidden:!0,snapTicks:[0],snapSensitivity:5}),S.warmthSlider=new r({parent:"PostSidebarPhotoEnhancements",onSlide:function(e){t.changeImageAdjustments({warmth:e.value})},onSlideStart:function(){c.publish("imageAdjust:WarmthApplied"),k()},onSlideEnd:L,top:336,left:24,sliderWidth:232,minValue:-100,maxValue:100,stepValue:1,showValueTooltip:!0,label:d.translate("components.slider.kWarmth"),hidden:!0,snapTicks:[0],snapSensitivity:5}),S.sharpenSlider=new r({parent:"PostSidebarPhotoEnhancements",onSlide:function(e){t.changeImageAdjustments({sharpness:e.value})},onSlideStart:function(){c.publish("imageAdjust:SharpenApplied"),k()},onSlideEnd:L,top:388,left:24,sliderWidth:232,minValue:0,maxValue:100,stepValue:1,showValueTooltip:!0,label:d.translate("components.slider.kSharpen"),hidden:!0}),S.resetSlidersButton=new a({parent:"PostSidebarPhotoEnhancements",class:"reset-sliders-button post-centered-button",label:"i18n.components.buttons.kResetChanges",hidden:!0,onClick:function(){c.publish("imageAdjust:Reset"),t.resetImageAdjustments({contrast:0,brightness:0,saturation:0,highlights:0,shadows:0,warmth:0,sharpness:0})}}),S.EffectsPanelLabel=new n({parent:"PostSidebarPhotoEffects",template:"<h2>i18n.panels.images.kEffects</h2>",left:24,top:30}),S.blurSlider=new r({parent:"PostSidebarPhotoEffects",onSlide:function(e){t.changeImageAdjustments({blur:w(e.value)})},onSlideStart:function(){c.publish("imageEffect:BlurApplied"),k()},onSlideEnd:L,top:69,left:24,sliderWidth:232,minValue:0,maxValue:100,stepValue:1,showValueTooltip:!0,label:d.translate("components.slider.kBlur"),hidden:!1}),s.events.subscribe("shown",C),S.listOfFilters.events.subscribe("item-selected",y),S.listOfFilters.events.subscribe("filter-checkbox-changed",(function(e){p=e})),s}}.apply(t,o))||(e.exports=i)},vVLA:function(e,t,n){var o,i;o=[n("xeH2"),n("YLtl"),n("Avqh"),n("UzQk"),n("oWUw")],void 0===(i=function(e,t,n,o,i){var a="post-snap-lines";return function(e){(e=e||{}).tag="canvas";var t=new n(e),r=t.el.getContext("2d"),s=t.update,l=1,d=[];function c(){r.clearRect(0,0,t.el.width,t.el.height)}return t.update=function(e){s(e);var n=!1;void 0!==(e=e||{}).viewScale&&(l=e.viewScale,n=!0),void 0!==e.documentSize&&(t.el.width=e.documentSize.width,t.el.height=e.documentSize.height,n=!0),void 0!==e.alignmentLines&&(d=e.alignmentLines,n=!0),n&&function(){if(!t.isHidden()&&(r.clearRect(0,0,t.el.width,t.el.height),d.length>0)){var e=Math.round(o.AlignmentLine.LINE_WEIGHT/l),n=Math.round(o.AlignmentLine.DASH_WIDTH/l),a=Math.round(o.AlignmentLine.DASH_GAP_WIDTH/l),s=Math.round(5/l),c=Math.round(24/l);const t="Safari"==i.name?1.5:1,v="Safari"==i.name?1:.5;for(var u=0,p=null,h=null,g=d.length-1;g>=0;g--){var f=d[g].line;if(f.p1.x=Math.max(Math.round(f.p1.x)-.5,v),f.p1.y=Math.max(Math.round(f.p1.y)-.5,v),f.p2.x=Math.max(Math.round(f.p2.x)-.5,v),f.p2.y=Math.max(Math.round(f.p2.y)-.5,v),r.lineWidth=e,d[g].lineStyle==o.LineStyle.Dashed){r.setLineDash([n,a]);const e=o.TheoRect.fromXYXY(0,0,1e3,1e3).evalXY(.5,.5),t=f.locate(e),i=f.projectedPoint(e),s=n+a,l=o.MathUtils.VectorNorm(i.subtract(f.p1))%s;r.lineDashOffset=t<0?l:s-l}else r.setLineDash([]);var m=d[g].color,b="rgba("+255*m.red+","+255*m.green+","+255*m.blue+","+m.alpha+")";if(r.strokeStyle=b,d[g].type==o.AlignmentType.Rotation?(r.lineWidth=e*t,f=f.extendRayByFixedLength(c),1==++u?p=f:h=f):(f.p1.x==f.p2.x||f.p1.y==f.p1.y?r.lineWidth=e*t:r.lineWidth=e*t*1.5,f=f.extendByFixedLength(c)),r.beginPath(),r.moveTo(f.p1.x,f.p1.y),r.lineTo(f.p2.x,f.p2.y),r.stroke(),2==u){u=0;p.angleWith(h);r.setLineDash([]),r.beginPath(),r.fillStyle=b,r.arc(p.p1.x,p.p1.y,s,0,2*Math.acos(-1),!0),r.stroke(),r.fill(),p=h=null}}}}()},t.el.width=1e3,t.el.height=1e3,t.el.className+=" "+a,t.events.subscribe("hidden",c),t}}.apply(t,o))||(e.exports=i)}}]);
//# sourceMappingURL=theo-web-view_160b0cfd-0e57bd65.js.map