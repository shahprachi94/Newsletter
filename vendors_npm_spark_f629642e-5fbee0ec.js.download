(window.webpackJsonptheoWebApp=window.webpackJsonptheoWebApp||[]).push([[38],{"434x":function(e,t,n){var o,i=t,r=n("oAGj"),a=n("Tq01"),s=n("yGNn"),c=n("wNKJ"),l=n("fAXt"),u=n("Kkml");i.NudgeAction=(o=function e(t,n){this.delta=t,this.formaeToNudge=r.clone(n),a.Action.call(this,e.TYPE)},r.defineClass({name:"NudgeAction",ctor:o,superName:"Action",statics:{TYPE:"NudgeAction"},props:{getUserAction:function(e){var t=r.clone(e.selection.IDs);return u.UserActions.NudgeItem(t.join(","))},execute:function(e){var t=r.clone(this.formaeToNudge||e.selection.asFormaArray());l.TransformFacade.nudgeFormaeInPageSpace(r.clone(t),this.delta);for(var n=r.iter(t);!n.done;n.next()){var o=n.value;c.DragFacade.rescueFormaToPageBounds(o,50,0)}return s.CorePromise.resolve(null)}}}),o)},"4mEG":function(e,t,n){var o,i,r,a,s,c,l,u,d=t,m=n("oAGj"),h=n("Tq01"),A=n("kYI4"),p=n("SpAV"),f=n("CWW7"),g=n("yGNn"),C=n("FNB+"),T=n("q5zr"),S=n("oTAR"),y=n("lJxM"),F=n("T6jX"),P=n("Kkml"),v=n("LGJg"),x=n("sW6f"),I=n("mxdD"),U=n("QTen");d.AddContentAction=(o=function e(t,n,o,i,r){void 0===n&&(n=null),void 0===o&&(o=!1),void 0===i&&(i=f.AddFormaParams.DEFAULTS),void 0===r&&(r=!0),this.content=t,this.pairedContent=n,this.preservePlacement=o,this.addParams=i,this.allowSelection=r,h.Action.call(this,e.TYPE)},m.defineClass({name:"AddContentAction",ctor:o,superName:"Action",statics:{TYPE:"AddContentAction"},props:{getUserAction:function(e){return this.content instanceof T.ImageContentNode?P.UserActions.AddImage():this.content instanceof x.VideoContentNode?P.UserActions.AddVideo():this.content instanceof v.VectorContentNode?P.UserActions.AddIcon():this.content instanceof y.TextContentNode?P.UserActions.AddText():(p.CoreAssert.warning("Could not determine user action for content"),P.UserActions.AddImage())},execute:function(e){var t=this;return f.CreationFacade.addContent(e.document.firstPage,this.content,this.pairedContent,this.preservePlacement,this.addParams).then((function(n){var o=m.as(n,C.Forma);return null!=o?(t.allowSelection&&(t.newSelection=[o]),o.isImage()&&F.TheoDocumentUtils.updateConstrainedImageInfo(e.document),g.CorePromise.resolve(new h.FormaActionResult([o]))):(p.CoreAssert.fail("expected a forma result from CreationFacade.addContent","AddContentAction.execute","AddContentAction.swift",75),g.CorePromise.resolve(null))}))},updateSelection:function(e){return null!=this.newSelection&&e.selection.replaceSelectionWithFormae(m.clone(this.newSelection)),this.newSelection}}}),o),d.AddIconContentAction=(i=function e(t,n,o,i,r){void 0===i&&(i=!0),void 0===r&&(r=!0),this.url=t,this.metadata=n,this.replacing=o,this.undoable=i,this.allowSelection=r,h.Action.call(this,e.TYPE)},m.defineClass({name:"AddIconContentAction",ctor:i,superName:"Action",statics:{TYPE:"AddIconContentAction"},props:{getUserAction:function(e){var t=null!=this.replacing?P.UserActions.ReplaceIcon():P.UserActions.AddIcon();return 0==this.undoable&&(t.undoable=!1),t},execute:function(e){var t=this,n=S.SVGParserUtils.createShapeFromSVGURL(e.document,this.url,this.metadata),o=m.as(n,C.Forma);return null!=o?S.SVGParserUtils.addShapeToDocument(e.document,n,this.replacing).then((function(e){return t.allowSelection&&(t.newSelection=[o]),g.CorePromise.resolve(new h.FormaActionResult([o]))})):(p.CoreAssert.fail("expected a forma result from SVGParserUtils.CreateShapeFromSVGURL","AddIconContentAction.execute","AddContentAction.swift",140),g.CorePromise.resolve(null))},updateSelection:function(e){return null!=this.newSelection&&e.selection.replaceSelectionWithFormae(m.clone(this.newSelection)),this.newSelection}}}),i),d.ActionUndoability=m.defineEnum("ActionUndoability",{useDefault:0,forceUndoable:1,forceNonUndoable:2}),d.AddImageContentAction=(r=function e(t,n,o,i,r,a,s,c,l,u,m,A,p){void 0===m&&(m=d.ActionUndoability.useDefault),void 0===A&&(A=null),void 0===p&&(p=!0),this.page=t,this.sourceURL=n,this.mimeType=o,this.width=i,this.height=r,this.hasAlpha=a,this.mediaMetadata=s,this.localIdentifier=c,this.tags=l,this.addParams=u,this.undoable=m,this.contentID=A,this.allowSelection=p,h.Action.call(this,e.TYPE)},m.defineClass({name:"AddImageContentAction",ctor:r,superName:"Action",statics:{TYPE:"AddImageContentAction"},props:{getUserAction:function(e){var t=null!=this.addParams.formaToReplace?P.UserActions.ReplaceImage():P.UserActions.AddImage();return this.undoable!=d.ActionUndoability.useDefault&&(t.undoable=this.undoable==d.ActionUndoability.forceUndoable),t},execute:function(e){var t,n=this;if(t=m.as(m.opt(e.document,(function(e){return e.content.createNode(T.ImageContentNode.KIND,n.contentID)})),T.ImageContentNode)){var o;if(t.url=this.sourceURL,t.mimeType=this.mimeType,t.pixelWidth=this.width,t.pixelHeight=this.height,t.mediaMetadata=this.mediaMetadata,t.localIdentifier=this.localIdentifier,this.hasAlpha&&(t.hasAlpha=!0),o=this.tags)for(var i=m.iter(o);!i.done;i.next()){var r,a,s=i.key,c=i.value;null!=(r=m.as(s,"String"))&&null!=(a=m.as(c,"String"))&&t.setTag(r,a)}return t.createImageFeatures(),m.opt(t.image,(function(e){return e.hasAlpha()})),f.CreationFacade.addContent(e.document.firstPage,t,null,!1,this.addParams).then((function(t){var o=m.as(t,C.Forma);return null!=o?(F.TheoDocumentUtils.updateConstrainedImageInfo(e.document),n.allowSelection&&(n.newSelection=[o]),g.CorePromise.resolve(new h.FormaActionResult([o]))):(p.CoreAssert.fail("expected a forma result from CreationFacade.addContent","AddImageContentAction.execute","AddContentAction.swift",260),g.CorePromise.resolve(null))}))}return g.CorePromise.resolve(null)},updateSelection:function(e){return null!=this.newSelection&&e.selection.replaceSelectionWithFormae(m.clone(this.newSelection)),this.newSelection}}}),r),d.VideoPosterParams=(a=function(e,t,n,o){this.url=e,this.mimeType=t,this.width=n,this.height=o},m.defineClass({name:"VideoPosterParams",ctor:a,superName:"CoreObject"}),a),d.AddVideoContentAction=(s=function e(t,n,o,i,r,a,s,c,l,u,d,A,p,f,g){void 0===g&&(g=!0),this.page=t,this.sourceURL=n,this.mimeType=o,this.trackWidth=i,this.trackHeight=r,this.duration=a,this.times=m.clone(s),this.posterParams=c,this.isLivePhoto=l,this.mediaMetadata=u,this.localIdentifier=d,this.originalDuration=A,this.offsetInOriginal=p,this.addParams=f,this.allowSelection=g,h.Action.call(this,e.TYPE)},m.defineClass({name:"AddVideoContentAction",ctor:s,superName:"Action",statics:{TYPE:"AddVideoContentAction"},props:{getUserAction:function(e){return P.UserActions.AddVideo()},execute:function(e){var t,n,o,i,r=this;return(t=I.VideoFacade.addVideoContent(m.opt(e.document,(function(e){return e.content})),this.sourceURL,this.mimeType,this.trackWidth,this.trackHeight,this.duration,this.offsetInOriginal,this.originalDuration,this.mediaMetadata,this.localIdentifier,m.clone(this.times),this.isLivePhoto))?((o=this.posterParams)&&(i=n=m.as(m.opt(e.document,(function(e){return e.content.createNode(T.ImageContentNode.KIND,null)})),T.ImageContentNode))&&(i.url=o.url,i.mimeType=o.mimeType,i.pixelWidth=o.width,i.pixelHeight=o.height),f.CreationFacade.addContent(this.page,t,n,!1,this.addParams).then((function(e){var t=m.as(e,C.Forma);return null!=t?(r.allowSelection&&(r.newSelection=[t]),g.CorePromise.resolve(new h.FormaActionResult([t]))):(p.CoreAssert.fail("expected a forma result from CreationFacade.addContent","AddVideoContentAction.execute","AddContentAction.swift",398),g.CorePromise.resolve(null))}))):g.CorePromise.resolve(null)},updateSelection:function(e){return null!=this.newSelection&&e.selection.replaceSelectionWithFormae(m.clone(this.newSelection)),this.newSelection},cloneWithPosterParams:function(e){return new s(this.page,this.sourceURL,this.mimeType,this.trackWidth,this.trackHeight,this.duration,m.clone(this.times),e,this.isLivePhoto,this.mediaMetadata,this.localIdentifier,this.originalDuration,this.offsetInOriginal,this.addParams)}}}),s),d.ReplaceVideoFormaContentAction=(c=function e(t,n,o,i,r,a,s,c,l,u,d,A,p,f,g,C){void 0===C&&(C=!0),this.forma=t,this.sourceURL=n,this.mimeType=o,this.trackWidth=i,this.trackHeight=r,this.duration=a,this.startTime=s,this.trimDuration=c,this.offsetInOriginal=l,this.originalDuration=u,this.times=m.clone(d),this.posterParams=A,this.isLivePhoto=p,this.mediaMetadata=f,this.localIdentifier=g,this.allowSelection=C,h.Action.call(this,e.TYPE)},m.defineClass({name:"ReplaceVideoFormaContentAction",ctor:c,superName:"Action",statics:{TYPE:"ReplaceVideoFormaContentAction"},props:{getUserAction:function(e){return P.UserActions.ReplaceVideoContent()},execute:function(e){var t,n,o,i;return(t=I.VideoFacade.addVideoContent(m.opt(e.document,(function(e){return e.content})),this.sourceURL,this.mimeType,this.trackWidth,this.trackHeight,this.duration,this.offsetInOriginal,this.originalDuration,this.mediaMetadata,this.localIdentifier,m.clone(this.times),this.isLivePhoto))?(f.CreationFacade.removeContentNodeFromDocument(this.forma.videoContentNode,e.document),this.forma.videoContentNode=t,f.CreationFacade.addContentNodeToDocument(t,e.document),(n=this.posterParams)&&(o=m.as(m.opt(e.document,(function(e){return e.content.createNode(T.ImageContentNode.KIND,null)})),T.ImageContentNode))&&(o.url=n.url,o.mimeType=n.mimeType,o.pixelWidth=n.width,o.pixelHeight=n.height,f.CreationFacade.removeContentNodeFromDocument(this.forma.contentNode,e.document),this.forma.contentNode=o,f.CreationFacade.addContentNodeToDocument(o,e.document)),(i=m.as(this.forma.style,U.VideoStyle))&&(i.startTime=this.startTime,i.duration=this.trimDuration),this.allowSelection&&(this.newSelection=[this.forma]),g.CorePromise.resolve(new h.FormaActionResult([this.forma]))):g.CorePromise.resolve(null)},updateSelection:function(e){return null!=this.newSelection&&e.selection.replaceSelectionWithFormae(m.clone(this.newSelection)),this.newSelection}}}),c),d.AddLogoContentAction=(l=function e(t,n,o,i,r,a){void 0===r&&(r=null),void 0===a&&(a=!0),this.theoLogo=n,this.page=t,this.replacing=o,this.localIdentifier=i,this.componentID=r,this.allowSelection=a,h.Action.call(this,e.TYPE)},m.defineClass({name:"AddLogoContentAction",ctor:l,superName:"Action",statics:{TYPE:"AddLogoContentAction"},props:{getUserAction:function(e){return P.UserActions.AddLogo()},execute:function(e){var t=this,n=A.BrandingFacade.makeLogoContentNode(this.theoLogo,this.page.document);n.createImageFeatures(),n.localIdentifier=this.localIdentifier,null!=this.componentID&&(n.componentID=this.componentID);var o=new f.AddFormaParams(h.ControllerSettingsBehaviorEnum.IgnoreControllerSettings,!0,this.replacing,f.FloatingImageStrategy.Always);return f.CreationFacade.addContent(e.document.firstPage,n,null,!1,o).then((function(e){var n=m.as(e,C.Forma);return null!=n?(t.allowSelection&&(t.newSelection=[n]),g.CorePromise.resolve(new h.FormaActionResult([n]))):(p.CoreAssert.fail("expected a forma result from CreationFacade.addContent","AddLogoContentAction.execute","AddContentAction.swift",632),g.CorePromise.resolve(null))}))},updateSelection:function(e){return null!=this.newSelection&&e.selection.replaceSelectionWithFormae(m.clone(this.newSelection)),this.newSelection}}}),l),d.AddTextContentAction=(u=function e(t,n,o){void 0===n&&(n=f.AddFormaParams.DEFAULTS),void 0===o&&(o=!0),this.text=t,this.addParams=n,this.allowSelection=o,h.Action.call(this,e.TYPE)},m.defineClass({name:"AddTextContentAction",ctor:u,superName:"Action",statics:{TYPE:"AddTextContentAction"},props:{getUserAction:function(e){return this.addParams.behavior==h.ControllerSettingsBehaviorEnum.SetControllerSettings?P.UserActions.AddTextUI():P.UserActions.AddText()},execute:function(e){var t=this;return f.CreationFacade.addText(e.document.firstPage,this.text,!0,this.addParams).then((function(e){var n=m.as(e,C.Forma);return null!=n?(t.allowSelection&&(t.newSelection=[n]),g.CorePromise.resolve(new h.FormaActionResult([n]))):(p.CoreAssert.fail("expected a forma result from CreationFacade.addText","AddTextContentAction.execute","AddContentAction.swift",695),g.CorePromise.resolve(null))}))},updateSelection:function(e){return null!=this.newSelection&&e.selection.replaceSelectionWithFormae(m.clone(this.newSelection)),this.newSelection}}}),u)},"70fJ":function(e,t,n){var o,i=t,r=n("oAGj"),a=n("Tq01"),s=n("SpAV"),c=n("gpZI"),l=n("yGNn"),u=n("ascj"),d=n("Kkml");i.ApplyColorAction=(o=function e(t,n,o,i){void 0===o&&(o=!1),void 0===i&&(i=0),this.formaeToColor=r.clone(t),this.colors=r.clone(n),this.inCharStyleMode=o,this.shuffleIndex=i,this.suggestedSelection=[],this.shouldUpdateSelection=!1,a.Action.call(this,e.TYPE)},r.defineClass({name:"ApplyColorAction",ctor:o,superName:"Action",statics:{TYPE:"ApplyColorAction"},props:{getUserAction:function(e){var t,n;return t=(n=this.formaeToColor)?n.map((function(e){return e.formaID}),this):r.clone(e.selection.IDs),d.UserActions.ChangeColor(t.join(","))},execute:function(e){var t,n=r.clone(this.formaeToColor||e.selection.asFormaArray());s.CoreAssert.isTrue(n.length>0,"empty Forma array","ApplyColorAction.execute","ColorActions.swift",55),(t=this.colors)?this.suggestedSelection=r.clone(c.ColorFacade.applyColorsToFormae(r.clone(n),r.clone(t),this.inCharStyleMode,this.shuffleIndex)):this.suggestedSelection=r.clone(c.ColorFacade.applyNoneColorToFormae(r.clone(n),u.ColorRole.FieldPrimary)),this.shouldUpdateSelection=!1;for(var o=r.iter(n);!o.done;o.next()){var i=o.value;this.shouldUpdateSelection=this.shouldUpdateSelection||e.selection.isSelected(i)}return l.CorePromise.resolve(new a.FormaActionResult(r.clone(this.suggestedSelection)))},updateSelection:function(e){return!this.inCharStyleMode&&this.shouldUpdateSelection&&(e.selection.IDs=this.suggestedSelection.map((function(e){return e.formaID}),this)),this.suggestedSelection}}}),o)},"9tXS":function(e,t,n){var o,i=t,r=n("oAGj"),a=n("Tq01"),s=n("yGNn"),c=n("Kkml"),l=n("7EVG");i.SetWatermarkAction=(o=function e(t){this.watermark=t,a.Action.call(this,e.TYPE)},r.defineClass({name:"SetWatermarkAction",ctor:o,superName:"Action",statics:{TYPE:"SetWatermarkAction"},props:{getUserAction:function(e){return c.UserActions.SetWatermark()},execute:function(e){return l.WatermarkFacade.setWatermark(this.watermark,e.document),s.CorePromise.resolve(null)}}}),o)},"Aj/e":function(e,t,n){var o,i=t,r=n("oAGj"),a=n("Tq01"),s=n("yGNn"),c=n("P83h"),l=n("8t9B"),u=n("Kkml");i.ChangeBackgroundShapeAction=(o=function e(t,n,o,i){this.formae=r.clone(t),this.backing=n,this.artworkID=o,this.charStyleMode=i,a.Action.call(this,e.TYPE)},r.defineClass({name:"ChangeBackgroundShapeAction",ctor:o,superName:"Action",statics:{TYPE:"ChangeBackgroundShapeAction"},props:{getUserAction:function(e){var t,n;return t=(n=this.formae)?n.map((function(e){return e.formaID}),this):r.clone(e.selection.IDs),this.charStyleMode&&(t=t.map((function(e){return e+":secondary"}),this)),u.UserActions.ChangeBackgroundShape(t.join(","))},execute:function(e){for(var t=r.clone(this.formae||e.selection.asFormaArray()),n=r.iter(t);!n.done;n.next()){var o,i=n.value;if(o=r.as(i.controller,l.TypeLockupController)){var u=new c.FormaStyleChangedEvent(i);i.beginUpdate(u),this.charStyleMode&&(e.selection.inCharStyleMode=!0),o.styleController.applyBacking(this.backing,this.artworkID),i.endUpdate(u)}}return s.CorePromise.resolve(new a.ActionResult)}}}),o)},H1Z2:function(e,t,n){var o,i,r,a,s,c=t,l=n("oAGj"),u=n("Tq01"),d=n("yGNn"),m=n("wNKJ"),h=n("Pil/"),A=n("9Lk3"),p=n("tGKA"),f=n("fAXt"),g=n("8t9B"),C=n("oKlP"),T=n("Kkml");c.DragAction=(o=function e(t,n){this.event=t,this.swapTargetForma=n,u.Action.call(this,e.TYPE)},l.defineClass({name:"DragAction",ctor:o,superName:"Action",statics:{TYPE:"DragAction"},props:{getUserAction:function(e){return null!=this.swapTargetForma?T.UserActions.SwapCells():T.UserActions.MoveItem()},execute:function(e){var t,n;if(t=l.as(this.event,h.FormaDragEvent)){if(null==this.swapTargetForma){var o=l.clone(m.DragFacade.processFormaDrag(t));return d.CorePromise.resolve(new u.DragActionResult(l.clone(o)))}}else if(n=l.as(this.event,h.EndFormaDragEvent)){var i,r;if(m.DragFacade.processEndFormaDrag(n),(i=this.getDraggedFormaForEvent(n))&&(r=this.swapTargetForma)){var a,s=l.clone(l.opt(e.document,(function(e){return e.firstPage.root.filterByControllerKind(A.GridController.KIND)})));a=l.opt(s,(function(e){return null!=e.length&&s.length>0}))?l.as(s[0].controller,A.GridController):null,l.opt(a,(function(e){return e.swapGridChildren(r,i)}))}}return d.CorePromise.resolve(null)},getDraggedFormaForEvent:function(e){var t,n;return 0==!e.dragDelegate.draggedFormae.length&&(n=l.first(e.dragDelegate.draggedFormae),((t=l.opt(n,(function(e){return e.isImage()})))||null!=t)&&t&&(n=l.opt(n,(function(e){return e.parent})))),n}}}),o),c.MoveHandleAction=(i=function e(t,n,o,i){this.forma=t,this.delta=n,this.origin=o,this.scale=i,u.Action.call(this,e.TYPE)},l.defineClass({name:"MoveHandleAction",ctor:i,superName:"Action",statics:{TYPE:"MoveHandleAction"},props:{getUserAction:function(e){return T.UserActions.MoveItem()},execute:function(e){var t=this;f.TransformFacade.transformFormaeInPageSpaceAboutPoint([this.forma],p.Matrix2D.translation(new C.TheoPoint(this.delta.x,this.delta.y)),this.origin);var n=l.opt(this.forma.controller,(function(e){return e.setSnappedPlacement(null,8/t.scale,!1)}));return d.CorePromise.resolve(new u.PlacementActionResult(n))}}}),i),c.ResizeHandleAction=(r=function e(t,n,o,i,r){void 0===r&&(r=!1),this.forma=t,this.spotPt=n,this.anchorSpot=o,this.newBounds=i,this.inSpacingMode=r,u.Action.call(this,e.TYPE)},l.defineClass({name:"ResizeHandleAction",ctor:r,superName:"Action",statics:{TYPE:"ResizeHandleAction"},props:{getUserAction:function(e){return T.UserActions.ResizeItem()},execute:function(e){var t=this;return this.inSpacingMode&&1==this.spotPt.x&&.5==this.spotPt.y&&this.forma.controller instanceof g.TypeLockupController?this.forma.controller.recalculateTracking(this.newBounds.size):this.inSpacingMode&&.5==this.spotPt.x&&1==this.spotPt.y&&this.forma.controller instanceof g.TypeLockupController?this.forma.controller.recalculateLeading(this.newBounds.size):l.opt(this.forma.controller,(function(e){return e.onEvent(new h.FormaResizeEvent(t.forma,t.newBounds.size,t.anchorSpot))})),d.CorePromise.resolve(null)}}}),r),c.RotateHandleAction=(a=function e(t,n,o,i,r){void 0===r&&(r=!0),this.forma=t,this.deltaRadians=n,this.origin=o,this.initialPlacement=i,this.doSnapping=r,u.Action.call(this,e.TYPE)},l.defineClass({name:"RotateHandleAction",ctor:a,superName:"Action",statics:{TYPE:"RotateHandleAction"},props:{getUserAction:function(e){return T.UserActions.RotateItem()},execute:function(e){if(f.TransformFacade.transformFormaeInPageSpaceAboutPoint([this.forma],p.Matrix2D.rotation(Math.cos(this.deltaRadians),Math.sin(this.deltaRadians)),this.origin,this.initialPlacement),this.doSnapping){var t=l.opt(this.forma.controller,(function(e){return e.setSnappedPlacement(new C.TheoPoint(.5,.5),20,!1)}));return d.CorePromise.resolve(new u.PlacementActionResult(t))}return d.CorePromise.resolve(new u.PlacementActionResult(null))}}}),a),c.CharRangeHandleAction=(s=function e(t,n,o,i,r){this.forma=t,this.newPoint=n,this.lastPoint=r,this.beginForma=o,this.leftHandle=i,u.Action.call(this,e.TYPE)},l.defineClass({name:"CharRangeHandleAction",ctor:s,superName:"Action",statics:{TYPE:"CharRangeHandleAction"},props:{getUserAction:function(e){return T.UserActions.ModifyStyleRanges()},execute:function(e){var t;return(t=l.as(this.forma.controller,g.TypeLockupController))&&t.updateTouches(this.newPoint,this.beginForma,this.leftHandle,this.lastPoint),d.CorePromise.resolve(new u.FormaActionResult([this.forma]))}}}),s)},"KgU+":function(e,t,n){var o,i,r,a,s,c=t,l=n("oAGj"),u=n("Tq01"),d=n("cYKp"),m=n("yGNn"),h=n("Kkml");c.ApplyAnimationStyleAction=(o=function e(t,n){this.style=t,this.page=n,u.Action.call(this,e.TYPE)},l.defineClass({name:"ApplyAnimationStyleAction",ctor:o,superName:"Action",statics:{TYPE:"ApplyAnimationStyleAction"},props:{getUserAction:function(e){return h.UserActions.ApplyAnimationStyle()},execute:function(e){return this.page.animationLibrary.setRootAnimationStyle(this.style,this.page.root),m.CorePromise.resolve(null)}}}),o),c.ApplyAnimationStyleForPlaybackAction=(i=function(e,t){c.ApplyAnimationStyleAction.call(this,e,t)},l.defineClass({name:"ApplyAnimationStyleForPlaybackAction",ctor:i,superName:"ApplyAnimationStyleAction",props:{getUserAction:function(e){return h.UserActions.ApplyAnimationStyleForPlayback()},execute:function(e){return d.AnimationFacade.applyAnimationStyle(this.style,this.page),m.CorePromise.resolve(null)}}}),i),c.ResetAnimation=(r=function e(t,n){this.resetFormaTree=t,this.page=n,u.Action.call(this,e.TYPE)},l.defineClass({name:"ResetAnimation",ctor:r,superName:"Action",statics:{TYPE:"ResetAnimation"},props:{getUserAction:function(e){return h.UserActions.ResetAnimation()},execute:function(e){return l.opt(this.page.root.animation,(function(e){return e.invalidate()})),m.CorePromise.resolve(null)}}}),r),c.ShuffleAnimationStyleAction=(a=function e(t,n){this.style=t,this.page=n,u.Action.call(this,e.TYPE)},l.defineClass({name:"ShuffleAnimationStyleAction",ctor:a,superName:"Action",statics:{TYPE:"ShuffleAnimationStyleAction"},props:{getUserAction:function(e){return h.UserActions.ShuffleAnimationStyle()},execute:function(e){var t=d.AnimationFacade.shuffleAnimationStyle(this.style,this.page);return this.page.animationLibrary.setRootAnimationStyle(t,this.page.root),m.CorePromise.resolve(new u.AnimationStyleActionResult(t))}}}),a),c.ApplyAndPrepareAnimationAction=(s=function(e,t){this.style=e,this.page=t,u.Action.call(this,c.ApplyAnimationStyleAction.TYPE)},l.defineClass({name:"ApplyAndPrepareAnimationAction",ctor:s,superName:"Action",statics:{TYPE:"ApplyAndPrepareAnimationAction"},props:{getUserAction:function(e){return h.UserActions.ApplyAndPrepareAnimationAction()},execute:function(e){return this.page.animationLibrary.setRootAnimationStyle(this.style,this.page.root),this.page.animationLibrary.modifyModelForAnimation(l.opt(this.page.root.animation,(function(e){return e.animationStyle})),this.page.root),this.page.animationController.saveStaticState(),m.CorePromise.resolve(null)}}}),s)},SVjO:function(e,t,n){var o,i=t,r=n("oAGj"),a=n("Tq01"),s=n("yGNn"),c=n("LP+A"),l=n("uxH+"),u=n("8t9B"),d=n("Kkml");i.ApplyTemplateAction=(o=function(){},r.defineClass({name:"ApplyTemplateAction",ctor:o,superName:"Action",statics:{TYPE:"ApplyTemplateAction"},props:{init_dd3b:function(e,t){this.designSuggestion=e,this.rootForma=t,this.originalRootForma=null,this.templateDocument=null,this.tapIndex=0,a.Action.call(this,o.TYPE)},init_e1db:function(e,t,n,i){this.templateDocument=e,this.tapIndex=n,this.rootForma=t,this.originalRootForma=i,this.designSuggestion=null,a.Action.call(this,o.TYPE)},getUserAction:function(e){return d.UserActions.ApplyTemplate()},execute:function(e){var t,n,o,i=[];if(null==this.designSuggestion&&(r.opt(r.as(this.rootForma.controller,l.RootController),(function(e){return e.createGridControllerIfNone()})),(t=this.originalRootForma)&&(r.opt(r.as(t.controller,l.RootController),(function(e){return e.createGridControllerIfNone()})),n=this.templateDocument))){i=r.clone(c.DesignSuggestionFacade.createSuggestionsFromTemplate(n,this.rootForma,t));var d=this.tapIndex%i.length;d>=0&&(this.designSuggestion=i[d])}if(o=this.designSuggestion){o.apply();for(var m=r.clone(this.rootForma.filterWithCallback((function(e){return e.isTypeLockup()}))),h=r.iter(m);!h.done;h.next()){var A,p=h.value;(A=r.as(p.controller,u.TypeLockupController))&&A.updateGroup()}}return s.CorePromise.resolve(new a.SuggestionsActionResult(r.clone(i)))}}}),o)},Tq01:function(e,t,n){var o,i,r,a,s,c,l,u,d,m,h,A,p,f=t,g=n("oAGj"),C=n("Dz6V"),T=n("SpAV"),S=n("gXiO"),y=n("yGNn"),F=n("Kkml");f.ActionExecutionOptions=(o=function(e,t){this.showWaitingFeedback=e,this.showMessageFeedback=t},i={},g.defineClass({name:"ActionExecutionOptions",ctor:o,superName:"CoreObject",statics:{DEFAULT:{get:function(){return void 0===i.DEFAULT&&(i.DEFAULT=new o(C.ActionFeedbackWaitingType.None,C.ActionFeedbackMessageType.None)),i.DEFAULT}}}}),o),f.Action=(r=function(e,t){void 0===t&&(t=f.ActionExecutionOptions.DEFAULT),this.type=e,this.executionOptions=t,S.CoreObject.call(this)},g.defineClass({name:"Action",ctor:r,superName:"CoreObject",props:{canDo:function(e){return!0},getUserAction:function(e){return T.CoreAssert.fail(this.type+" does not implement getUserAction","Action.getUserAction","Actions.swift",57),F.UserActions.AddText()},execute:function(e){return y.CorePromise.reject("no default impl")},updateSelection:function(e){return null}}}),r),f.ActionResult=function(){var e=function(){S.CoreObject.call(this)},t={};return g.defineClass({name:"ActionResult",ctor:e,superName:"CoreObject",statics:{NONE:{get:function(){return void 0===t.NONE&&(t.NONE=new e),t.NONE}},fromPromiseAny:function(t){var n;return null==t?e.NONE:(n=g.as(t,e))?n:(T.CoreAssert.fail("default action impl returned a promise for something other than an ActionResult","ActionResult.fromPromiseAny","Actions.swift",95),e.NONE)}}}),e}(),f.FormaActionResult=(a=function(e){this.formae=g.clone(e),f.ActionResult.call(this)},g.defineClass({name:"FormaActionResult",ctor:a,superName:"ActionResult"}),a),f.DoubleActionResult=(s=function(e){this.value=e,f.ActionResult.call(this)},g.defineClass({name:"DoubleActionResult",ctor:s,superName:"ActionResult"}),s),f.TextRangeActionResult=(c=function(e){this.range=e,f.ActionResult.call(this)},g.defineClass({name:"TextRangeActionResult",ctor:c,superName:"ActionResult"}),c),f.LockupStyleActionResult=(l=function(e){this.style=e,f.ActionResult.call(this)},g.defineClass({name:"LockupStyleActionResult",ctor:l,superName:"ActionResult"}),l),f.TextEmphasisActionResult=(u=function(e){this.textFormae=g.clone(e),f.ActionResult.call(this)},g.defineClass({name:"TextEmphasisActionResult",ctor:u,superName:"ActionResult"}),u),f.AnimationStyleActionResult=(d=function(e){this.style=e,f.ActionResult.call(this)},g.defineClass({name:"AnimationStyleActionResult",ctor:d,superName:"ActionResult"}),d),f.ImageStyleActionResult=(m=function(e){this.style=e,f.ActionResult.call(this)},g.defineClass({name:"ImageStyleActionResult",ctor:m,superName:"ActionResult"}),m),f.SuggestionsActionResult=(h=function(e){this.suggestions=g.clone(e),f.ActionResult.call(this)},g.defineClass({name:"SuggestionsActionResult",ctor:h,superName:"ActionResult"}),h),f.DragActionResult=(A=function(e){this.snapLines=g.clone(e),f.ActionResult.call(this)},g.defineClass({name:"DragActionResult",ctor:A,superName:"ActionResult"}),A),f.PlacementActionResult=(p=function(e){this.snapResult=e,f.ActionResult.call(this)},g.defineClass({name:"PlacementActionResult",ctor:p,superName:"ActionResult"}),p),f.ControllerSettingsBehaviorEnum=g.defineEnum("ControllerSettingsBehaviorEnum",{IgnoreControllerSettings:0,SetControllerSettings:1})},bqbo:function(e,t,n){var o,i,r,a,s,c,l,u,d,m,h,A,p,f,g=t,C=n("oAGj"),T=n("Tq01"),S=n("0wFF"),y=n("Dz6V"),F=n("aO0D"),P=n("yGNn"),v=n("ZK0l"),x=n("iCxV"),I=n("U010"),U=n("fdtz"),E=n("lmwz"),N=n("T6jX"),w=n("Kkml");g.ReplaceImagesWithColorsAction=(o=function e(t,n,o){void 0===o&&(o=!0),this.formae=C.clone(t),this.colors=C.clone(n),this.selectReplacements=o,T.Action.call(this,e.TYPE)},C.defineClass({name:"ReplaceImagesWithColorsAction",ctor:o,superName:"Action",statics:{TYPE:"ReplaceImagesWithColorsAction"},props:{getUserAction:function(e){return w.UserActions.ReplaceImageWithShape()},execute:function(e){var t=C.clone(this.formae||e.selection.asFormaArray()),n=C.clone(E.ImageFacade.replaceImagesWithColors(C.clone(t),C.clone(this.colors)));return N.TheoDocumentUtils.updateConstrainedImageInfo(e.document),0==n.length?P.CorePromise.reject("did not get any Forma back from ImageFacade.replaceImageWithColors"):(this.newSelection=C.clone(n),P.CorePromise.resolve(new T.FormaActionResult(C.clone(n))))},updateSelection:function(e){return null!=this.newSelection&&this.selectReplacements&&e.selection.replaceSelectionWithFormae(C.clone(this.newSelection)),this.newSelection}}}),o),g.SetImageFilterAction=(i=function e(t,n){void 0===n&&(n=!1),this.style=t,this.applyFilterToAllBackgroundImages=n,T.Action.call(this,e.TYPE)},C.defineClass({name:"SetImageFilterAction",ctor:i,superName:"Action",statics:{TYPE:"SetImageFilterAction"},props:{getUserAction:function(e){return w.UserActions.ApplyFilter()},execute:function(e){return E.ImageFacade.applyImageFilter(e,this.style,this.applyFilterToAllBackgroundImages),P.CorePromise.resolve(null)}}}),i),g.ShuffleImageFilterAction=(r=function e(t,n,o){void 0===o&&(o=!1),this.style=t,this.page=n,this.applyFilterToAllBackgroundImages=o,T.Action.call(this,e.TYPE)},C.defineClass({name:"ShuffleImageFilterAction",ctor:r,superName:"Action",statics:{TYPE:"ShuffleImageFilterAction"},props:{getUserAction:function(e){return w.UserActions.ShuffleFilter()},execute:function(e){var t=this.page.imageFilterLibrary.getNextImageStyleOfSameType(this.style,!0);return null!=t&&E.ImageFacade.applyImageFilter(e,t,this.applyFilterToAllBackgroundImages),P.CorePromise.resolve(new T.ImageStyleActionResult(t))}}}),r),g.SetImageCutoutAction=(a=function e(t,n,o,i){void 0===o&&(o=I.ImageCutoutModelLibrary.CURRENT_MODEL),void 0===i&&(i=I.ImageCutoutModelLibrary.DEFAULT_MASK_SIZE),this.formaToMask=t,this.cutout=n,this.model=o,this.maskSize=i,T.Action.call(this,e.TYPE,new T.ActionExecutionOptions(y.ActionFeedbackWaitingType.Loading,y.ActionFeedbackMessageType.Error))},C.defineClass({name:"SetImageCutoutAction",ctor:a,superName:"Action",statics:{TYPE:"SetImageCutoutAction"},props:{getUserAction:function(e){return w.UserActions.SetImageCutout()},execute:function(e){var t,n=this;return(t=E.ImageFacade.getFrameFormaForForma(this.formaToMask))?this.cutout.mode==I.CutoutMode.Off?E.ImageFacade.removeCutoutMaskFromImage(t):E.ImageFacade.createCutoutMaskForImage(t,this.model,this.maskSize).then((function(e){var o,i;return(o=C.as(e,U.ImageForma))&&(i=o.contentNode)?(E.ImageFacade.setCutoutModeForForma(t,n.cutout.mode),i.whenLoaded().then((function(e){return n.cutout.mode!=I.CutoutMode.Off&&E.ImageFacade.setTightCropToCutoutMask(t,o),t.isBackgroundImage()&&C.opt(C.as(C.opt(t.parent,(function(e){return e.controller})),v.GroupController),(function(e){return e.updateGroup()})),C.opt(x.Host.logging,(function(e){return e.logToAnalytics(S.AnalyticsConstants.kAnalyticsDataEditImageRemoveBackgroundApplied,{contextualData1:"appliedCutout: "+n.cutout.mode})})),null}))):e})):P.CorePromise.reject("Failed to apply cutout to forma")}}}),a),g.ChangeImageAdjustmentsAction=(s=function(){},C.defineClass({name:"ChangeImageAdjustmentsAction",ctor:s,superName:"Action",statics:{TYPE:"ChangeImageAdjustmentsAction",ActionWithDictionary:function(e,t){return void 0===t&&(t=null),s.init_f8e4(C.clone(e),C.clone(t))},ActionWithKeyValue:function(e,t,n){return void 0===n&&(n=null),s.init_dd66(e,t,C.clone(n))}},props:{init_dd66:function(e,t,n){void 0===n&&(n=null),this.adjustments=C.dict([e,t]),this.formaeToAdjust=C.clone(n),T.Action.call(this,s.TYPE)},init_f8e4:function(e,t){void 0===t&&(t=null),this.adjustments=C.clone(e),this.formaeToAdjust=C.clone(t),T.Action.call(this,s.TYPE)},getUserAction:function(e){return w.UserActions.ChangeImageAdjustments()},execute:function(e){var t=this;return C.clone(this.formaeToAdjust||e.selection.asFormaArray()).forEach((function(e){if(e.isImage()){var n,o=E.ImageFacade.getImageFormaForForma(e);if(n=C.opt(o,(function(e){return e.style}))){for(var i=C.iter(t.adjustments);!i.done;i.next()){var r=i.key,a=i.value;n.adjustments=C.opt(n.adjustments,(function(e){return e.copyWithNewValue(a,r)}))}C.opt(o,(function(e){return e.applyStyle(n)}))}for(var s=C.iter(C.keys(t.adjustments));!s.done;s.next())r=s.value,C.opt(x.Host.logging,(function(e){return e.logToAnalytics(S.AnalyticsConstants.kAnalyticsDataImageAdjusted,{contextualData1:"type: "+r})}))}})),P.CorePromise.resolve(null)}}}),s),g.ApplyShapeMaskToImageAction=(c=function e(t,n,o){void 0===n&&(n=null),void 0===o&&(o=null),this.forma=t,this.shapeId=n,this.usingFrameBounds=o,T.Action.call(this,e.TYPE)},C.defineClass({name:"ApplyShapeMaskToImageAction",ctor:c,superName:"Action",statics:{TYPE:"ApplyShapeMaskToImageAction"},props:{getUserAction:function(e){return w.UserActions.ApplyShapeMaskToImage()},execute:function(e){var t,n,o;return null!=(t=this.shapeId)?(n=F.CropAssetLibrary.getCropShapeFromID(t))&&(o=E.ImageFacade.getFrameFormaForForma(this.forma))?E.ImageFacade.applyMaskToForma(o,n,this.usingFrameBounds).thenReturn(null):P.CorePromise.reject("Failed to apply shape mask to forma"):(E.ImageFacade.removeMaskForForma(this.forma),P.CorePromise.resolve(null))}}}),c),g.ApplyRasterMaskToImageAction=(l=function e(t,n,o){void 0===n&&(n=null),void 0===o&&(o=null),this.forma=t,this.rasterMaskId=n,this.usingFrameBounds=o,T.Action.call(this,e.TYPE)},C.defineClass({name:"ApplyRasterMaskToImageAction",ctor:l,superName:"Action",statics:{TYPE:"ApplyRasterMaskToImageAction"},props:{getUserAction:function(e){return w.UserActions.ApplyRasterMaskToImage()},execute:function(e){var t,n,o;return null!=(t=this.rasterMaskId)?(n=F.CropAssetLibrary.getRasterMaskFromID(t))&&(o=E.ImageFacade.getFrameFormaForForma(this.forma))?E.ImageFacade.applyMaskToForma(o,n,this.usingFrameBounds).thenReturn(null):P.CorePromise.reject("Failed to apply raster mask to forma"):(E.ImageFacade.removeMaskForForma(this.forma),P.CorePromise.resolve(null))}}}),l),g.SetImageAsFloatingAction=(u=function e(){T.Action.call(this,e.TYPE)},C.defineClass({name:"SetImageAsFloatingAction",ctor:u,superName:"Action",statics:{TYPE:"SetImageAsFloatingAction"},props:{getUserAction:function(e){return w.UserActions.SetImageAsFloating()},execute:function(e){var t;return(t=e.selection.formaAt(0))&&E.ImageFacade.setFloatingImage(t),P.CorePromise.resolve(null)}}}),u),g.SetImageAsBackgroundAction=(d=function e(){T.Action.call(this,e.TYPE)},C.defineClass({name:"SetImageAsBackgroundAction",ctor:d,superName:"Action",statics:{TYPE:"SetImageAsBackgroundAction"},props:{getUserAction:function(e){return w.UserActions.SetImageAsBackground()},execute:function(e){var t;return(t=e.selection.formaAt(0))&&E.ImageFacade.setBackgroundImage(t),P.CorePromise.resolve(null)}}}),d),g.AddHiddenImageToGridAction=(m=function e(t){this.formae=C.clone(t),T.Action.call(this,e.TYPE)},C.defineClass({name:"AddHiddenImageToGridAction",ctor:m,superName:"Action",statics:{TYPE:"AddHiddenImageToGridAction"},props:{getUserAction:function(e){return w.UserActions.AddHiddenImageToGrid()},execute:function(e){for(var t=C.iter(this.formae);!t.done;t.next()){var n;(n=t.value.parent)&&E.ImageFacade.addHiddenImageToGrid(n)}return P.CorePromise.resolve(null)}}}),m),g.EnterCropModeAction=(h=function e(t){this.forma=t,T.Action.call(this,e.TYPE)},C.defineClass({name:"EnterCropModeAction",ctor:h,superName:"Action",statics:{TYPE:"EnterCropModeAction"},props:{getUserAction:function(e){return w.UserActions.EnterCropMode()},execute:function(e){var t;return(t=E.ImageFacade.getImageFormaForForma(this.forma))&&E.ImageFacade.enterCropMode(t),P.CorePromise.resolve(null)}}}),h),g.ExitCropModeAction=(A=function e(){T.Action.call(this,e.TYPE)},C.defineClass({name:"ExitCropModeAction",ctor:A,superName:"Action",statics:{TYPE:"ExitCropModeAction"},props:{getUserAction:function(e){return w.UserActions.ExitCropMode()},execute:function(e){var t;return(t=C.opt(e.document,(function(e){return e.firstPage.root})))&&E.ImageFacade.exitCropMode(t),P.CorePromise.resolve(null)}}}),A),g.SetImageCropToFreeformAction=(p=function e(t){this.forma=t,T.Action.call(this,e.TYPE)},C.defineClass({name:"SetImageCropToFreeformAction",ctor:p,superName:"Action",statics:{TYPE:"SetImageCropToFreeformAction"},props:{getUserAction:function(e){return w.UserActions.SetImageCropToFreeform()},execute:function(e){return E.ImageFacade.removeMaskForForma(this.forma),E.ImageFacade.setImageCropToFreeform(this.forma),P.CorePromise.resolve(null)}}}),p),g.CropImageToRatioAction=(f=function e(t,n,o){void 0===n&&(n=0),void 0===o&&(o=null),this.forma=t,this.ratio=n,this.usingFrameBounds=o,T.Action.call(this,e.TYPE)},C.defineClass({name:"CropImageToRatioAction",ctor:f,superName:"Action",statics:{TYPE:"CropImageToRatioAction"},props:{getUserAction:function(e){return w.UserActions.CropImageToRatio()},execute:function(e){return E.ImageFacade.cropImageToRatio(this.forma,this.ratio,this.usingFrameBounds),P.CorePromise.resolve(null)}}}),f)},cEBg:function(e,t,n){var o,i,r=t,a=n("oAGj"),s=n("Tq01"),c=n("yGNn"),l=n("K9Oa"),u=n("Kkml");r.ChangePageSizeAction=(o=function e(t,n){this.page=t,this.designSize=n,s.Action.call(this,e.TYPE)},a.defineClass({name:"ChangePageSizeAction",ctor:o,superName:"Action",statics:{TYPE:"ChangePageSizeAction"},props:{getUserAction:function(e){return u.UserActions.ChangePageSize()},execute:function(e){return l.PageFacade.setPageDesignSize(this.page,this.designSize),c.CorePromise.resolve(null)}}}),o),r.RecordOriginalPageSizeAction=(i=function e(t){this.page=t,s.Action.call(this,e.TYPE)},a.defineClass({name:"RecordOriginalPageSizeAction",ctor:i,superName:"Action",statics:{TYPE:"RecordOriginalPageSizeAction"},props:{getUserAction:function(e){return u.UserActions.RecordOriginalPageSize()},execute:function(e){return this.page.originalSizeID=this.page.sizeID,c.CorePromise.resolve(null)}}}),i)},cRpU:function(e,t,n){var o,i,r,a,s,c,l,u,d,m,h,A,p,f,g,C,T,S,y,F,P,v,x=t,I=n("oAGj"),U=n("Tq01"),E=n("SpAV"),N=n("yGNn"),w=n("c+uM"),R=n("Vm85"),k=n("8t9B"),Y=n("oKlP"),D=n("oKI3"),G=n("Kkml");x.SetTextAction=(o=function e(t,n){this.text=t,this.forma=n,U.Action.call(this,e.TYPE)},I.defineClass({name:"SetTextAction",ctor:o,superName:"Action",statics:{TYPE:"SetText"},props:{getUserAction:function(e){return G.UserActions.SetText(this.forma.formaID)},execute:function(e){return R.TextFacade.replaceTextForLockup(this.forma,this.text),N.CorePromise.resolve(null)}}}),o),x.SetFontAction=(i=function e(t,n){void 0===n&&(n=!1),this.font=t,this.charStyleMode=n,U.Action.call(this,e.TYPE)},I.defineClass({name:"SetFontAction",ctor:i,superName:"Action",statics:{TYPE:"SetFont"},props:{getUserAction:function(e){return G.UserActions.SetFont(e.selection.IDs.join(","))},execute:function(e){var t=I.clone(e.selection.asFormaArray());return R.TextFacade.setFont(this.font,I.clone(t),this.charStyleMode),1==t.length&&I.opt(I.as(t[0].controller,k.TypeLockupController),(function(e){return e.snapSizeToBounds()})),N.CorePromise.resolve(null)}}}),i),x.ChangeTextLayoutAndAlignmentAction=(r=function e(t,n,o,i,r,a){void 0===o&&(o=!1),void 0===i&&(i=D.TextPathID.UNSET),void 0===r&&(r=null),void 0===a&&(a=w.VerticalLockupAlignment.UNSET),w.LockupStyle.isPath(t)?(i==D.TextPathID.Custom&&null==r||i!=D.TextPathID.Custom&&null!=r)&&E.CoreAssert.warning("pathID/customPath mismatch"):i==D.TextPathID.UNSET&&null==r||E.CoreAssert.warning("Why are we providing a path or path id with a non-path layout?"),this.layout=t,this.alignment=n,this.pathID=i,this.customPath=r,this.charStyleMode=o,this.verticalAlignment=a,U.Action.call(this,e.TYPE)},I.defineClass({name:"ChangeTextLayoutAndAlignmentAction",ctor:r,superName:"Action",statics:{TYPE:"ChangeTextLayoutAndAlignment"},props:{getUserAction:function(e){return G.UserActions.ChangeTextAlignment(e.selection.IDs.join(","))},execute:function(e){var t=I.clone(e.selection.asFormaArray());return R.TextFacade.setLayoutAndAlignment(this.layout,this.alignment,I.clone(t),this.charStyleMode,this.pathID,this.customPath,this.verticalAlignment),t.forEach((function(e){return I.opt(I.as(e.controller,k.TypeLockupController),(function(e){return e.snapSizeToBounds()}))})),N.CorePromise.resolve(null)}}}),r),x.ChangeTextLineSpacingAction=(a=function e(t,n){void 0===n&&(n=!1),this.lineSpacing=t,this.charStyleMode=n,U.Action.call(this,e.TYPE)},I.defineClass({name:"ChangeTextLineSpacingAction",ctor:a,superName:"Action",statics:{TYPE:"ChangeTextLineSpacing"},props:{getUserAction:function(e){return G.UserActions.ChangeLineSpacing()},execute:function(e){return R.TextFacade.setLineSpacing(this.lineSpacing,I.clone(e.selection.asFormaArray()),this.charStyleMode),N.CorePromise.resolve(null)}}}),a),x.ChangeTextAttributesAction=(s=function e(t,n,o,i,r,a){void 0===i&&(i=!1),void 0===r&&(r=D.TextPathID.UNSET),void 0===a&&(a=null),this.layout=t,this.alignment=n,this.lineSpacing=o,this.charStyleMode=i,this.pathID=r,this.customPath=a,U.Action.call(this,e.TYPE)},I.defineClass({name:"ChangeTextAttributesAction",ctor:s,superName:"Action",statics:{TYPE:"ChangeTextAttributes"},props:{getUserAction:function(e){return G.UserActions.ChangeTextAttributes()},execute:function(e){return this.layout==w.LockupLayout.SKIP&&this.alignment==w.LockupAlignment.SKIP||R.TextFacade.setLayoutAndAlignment(this.layout,this.alignment,I.clone(e.selection.asFormaArray()),this.charStyleMode,this.pathID,this.customPath),isNaN(this.lineSpacing)||R.TextFacade.setLineSpacing(this.lineSpacing,I.clone(e.selection.asFormaArray()),this.charStyleMode),N.CorePromise.resolve(null)}}}),s),x.SetFontSizeAction=(c=function e(t,n,o){void 0===n&&(n=new Y.TheoPoint(.5,.5)),void 0===o&&(o=null),this.size=t,this.pin=n,this.formae=I.clone(o),U.Action.call(this,e.TYPE)},I.defineClass({name:"SetFontSizeAction",ctor:c,superName:"Action",statics:{TYPE:"SetFontSize"},props:{getUserAction:function(e){return G.UserActions.SetFontSize()},execute:function(e){return R.TextFacade.setFontSize(this.size,I.clone(this.formae||e.selection.asFormaArray()),this.pin),N.CorePromise.resolve(null)}}}),c),x.MatchSizeAction=(l=function e(t,n,o){this.size=t,this.snapSizes=I.clone(n),this.pin=o,U.Action.call(this,e.TYPE)},I.defineClass({name:"MatchSizeAction",ctor:l,superName:"Action",statics:{TYPE:"MatchSize"},props:{getUserAction:function(e){return isNaN(this.size)?G.UserActions.MatchSize():G.UserActions.ResizeItem()},execute:function(e){var t;return t=isNaN(this.size)?R.TextFacade.matchNextSize(I.clone(this.snapSizes),this.pin,I.clone(e.selection.asFormaArray())):R.TextFacade.matchNearestSize(this.size,I.clone(this.snapSizes),this.pin,I.clone(e.selection.asFormaArray())),N.CorePromise.resolve(new U.DoubleActionResult(t))}}}),l),x.SetLineBreakAction=(u=function e(t,n){void 0===n&&(n=!1),this.lineBreak=t,this.charStyleMode=n,U.Action.call(this,e.TYPE)},I.defineClass({name:"SetLineBreakAction",ctor:u,superName:"Action",statics:{TYPE:"SetLineBreak"},props:{getUserAction:function(e){return G.UserActions.ToggleLineBreak()},execute:function(e){return R.TextFacade.setLineBreak(this.lineBreak,I.clone(e.selection.asFormaArray()),this.charStyleMode),N.CorePromise.resolve(null)}}}),u),x.SetNextSpacingSequenceAction=(d=function e(t){this.sequence=t,U.Action.call(this,e.TYPE)},I.defineClass({name:"SetNextSpacingSequenceAction",ctor:d,superName:"Action",statics:{TYPE:"SetNextSpacingSequence"},props:{getUserAction:function(e){return G.UserActions.SetNextSpacingSequence()},execute:function(e){return R.TextFacade.setNextSpacingSequence(this.sequence,I.clone(e.selection.asFormaArray())),N.CorePromise.resolve(null)}}}),d),x.SetTrackingAction=(m=function e(t,n){this.tracking=t,this.pin=n,U.Action.call(this,e.TYPE)},I.defineClass({name:"SetTrackingAction",ctor:m,superName:"Action",statics:{TYPE:"SetTracking"},props:{getUserAction:function(e){return G.UserActions.SetTracking()},execute:function(e){return R.TextFacade.setTracking(this.tracking,this.pin,I.clone(e.selection.asFormaArray())),N.CorePromise.resolve(null)}}}),m),x.SetLeadingAction=(h=function e(t,n){this.leading=t,this.pin=n,U.Action.call(this,e.TYPE)},I.defineClass({name:"SetLeadingAction",ctor:h,superName:"Action",statics:{TYPE:"SetLeading"},props:{getUserAction:function(e){return G.UserActions.SetLeading()},execute:function(e){return R.TextFacade.setLeading(this.leading,this.pin,I.clone(e.selection.asFormaArray())),N.CorePromise.resolve(null)}}}),h),x.SetPaddingAction=(A=function e(t){this.padding=t,U.Action.call(this,e.TYPE)},I.defineClass({name:"SetPaddingAction",ctor:A,superName:"Action",statics:{TYPE:"SetPadding"},props:{getUserAction:function(e){return G.UserActions.SetPadding()},execute:function(e){return R.TextFacade.setPadding(this.padding,I.clone(e.selection.asFormaArray())),N.CorePromise.resolve(null)}}}),A),x.SetTextLookAction=(p=function e(t){this.look=t,U.Action.call(this,e.TYPE)},I.defineClass({name:"SetTextLookAction",ctor:p,superName:"Action",statics:{TYPE:"SetTextLook"},props:{getUserAction:function(e){return G.UserActions.SetTextLook(e.selection.IDs.join(","))},execute:function(e){return R.TextFacade.setTextLook(this.look,I.clone(e.selection.asFormaArray())),N.CorePromise.resolve(null)}}}),p),x.SetTextEffectsAttributesAction=(f=function e(t,n,o){this.outlineStrokeWeight=t,this.shadowOffset=n,this.shadowAngle=o,U.Action.call(this,e.TYPE)},I.defineClass({name:"SetTextEffectsAttributesAction",ctor:f,superName:"Action",statics:{TYPE:"SetTextEffectsAttributes"},props:{getUserAction:function(e){return G.UserActions.SetTextEffectsAttributes()},execute:function(e){return R.TextFacade.setTextEffectsAttributes(this.outlineStrokeWeight,this.shadowOffset,this.shadowAngle,I.clone(e.selection.asFormaArray())),N.CorePromise.resolve(null)}}}),f),x.SetHighlightMethodAction=(g=function e(t,n){void 0===n&&(n=!1),this.method=t,this.charStyleMode=n,U.Action.call(this,e.TYPE)},I.defineClass({name:"SetHighlightMethodAction",ctor:g,superName:"Action",statics:{TYPE:"SetHighlightMethod"},props:{getUserAction:function(e){return G.UserActions.SetHighlightMethod(e.selection.IDs.join(","))},execute:function(e){return R.TextFacade.setHightlightMethod(this.method,I.clone(e.selection.asFormaArray()),this.charStyleMode),N.CorePromise.resolve(null)}}}),g),x.EnterCharStyleModeAction=(C=function e(t){this.forma=t,U.Action.call(this,e.TYPE)},I.defineClass({name:"EnterCharStyleModeAction",ctor:C,superName:"Action",statics:{TYPE:"EnterCharStyleMode"},props:{getUserAction:function(e){var t,n=!1;return(t=I.as(this.forma.controller,k.TypeLockupController))&&(n=0==t.charStyleRanges.length),G.UserActions.EnterCharStyleMode(n)},execute:function(e){return e.selection.inCharStyleMode=!0,R.TextFacade.setCharStyleMode(this.forma,!0),N.CorePromise.resolve(null)}}}),C),x.ExitCharStyleModeAction=(T=function e(t){this.forma=t,U.Action.call(this,e.TYPE)},I.defineClass({name:"ExitCharStyleModeAction",ctor:T,superName:"Action",statics:{TYPE:"ExitCharStyleMode"},props:{getUserAction:function(e){return G.UserActions.ExitCharStyleMode()},execute:function(e){return e.selection.inCharStyleMode=!1,R.TextFacade.setCharStyleMode(this.forma,!1),N.CorePromise.resolve(null)}}}),T),x.ApplyCharStyleAction=(S=function e(t,n,o,i){this.textForma=t,this.characterStyle=n,this.applyMode=o,this.startRange=i,U.Action.call(this,e.TYPE)},I.defineClass({name:"ApplyCharStyleAction",ctor:S,superName:"Action",statics:{TYPE:"ApplyCharStyle"},props:{getUserAction:function(e){return G.UserActions.ApplyCharStyle()},execute:function(e){var t=R.TextFacade.applyCharStyle(this.textForma,this.characterStyle,this.applyMode,this.startRange,!0);return N.CorePromise.resolve(new U.TextRangeActionResult(t))}}}),S),x.ApplyCharStyleWithoutUIAction=(y=function(e,t,n,o){this.textForma=e,this.characterStyle=t,this.applyMode=n,this.startRange=o,U.Action.call(this,x.ApplyCharStyleAction.TYPE)},I.defineClass({name:"ApplyCharStyleWithoutUIAction",ctor:y,superName:"Action",statics:{TYPE:"ApplyCharStyleWithoutUI"},props:{getUserAction:function(e){return G.UserActions.ApplyCharStyleWithoutUI()},execute:function(e){var t=R.TextFacade.applyCharStyle(this.textForma,this.characterStyle,this.applyMode,this.startRange,!1);return N.CorePromise.resolve(new U.TextRangeActionResult(t))}}}),y),x.UpdateCharStyleRangeAction=(F=function e(t,n,o){this.forma=t,this.changedRange=n,this.replacementLength=o,U.Action.call(this,e.TYPE)},I.defineClass({name:"UpdateCharStyleRangeAction",ctor:F,superName:"Action",statics:{TYPE:"UpdateCharStyleRange"},props:{getUserAction:function(e){return G.UserActions.UpdateCharStyleRange(this.forma.formaID)},execute:function(e){return R.TextFacade.updateCharStyleRange(this.forma,this.changedRange,this.replacementLength),N.CorePromise.resolve(null)}}}),F),x.ApplyTextStyleSuggestionAction=(P=function e(t,n,o,i){this.style=t,this.forma=n,this.wheelEvaluator=o,this.useEnhancedWheel=i,U.Action.call(this,e.TYPE)},I.defineClass({name:"ApplyTextStyleSuggestionAction",ctor:P,superName:"Action",statics:{TYPE:"ApplyTextStyleSuggestion"},props:{getUserAction:function(e){return G.UserActions.ApplyTextStyleSuggestion(this.forma.formaID)},execute:function(e){var t=R.TextFacade.applyTextStyleSuggestion(this.style,this.forma,this.wheelEvaluator,this.useEnhancedWheel);return N.CorePromise.resolve(new U.LockupStyleActionResult(t))}}}),P),x.ApplyNextTextEmphasisSuggestionAction=(v=function e(t,n){this.forma=t,this.wheelEvaluator=n,U.Action.call(this,e.TYPE)},I.defineClass({name:"ApplyNextTextEmphasisSuggestionAction",ctor:v,superName:"Action",statics:{TYPE:"ApplyTextEmphasisSuggestion"},props:{getUserAction:function(e){return G.UserActions.ApplyTextEmphasisSuggestion(this.forma.formaID)},execute:function(e){var t=I.clone(R.TextFacade.applyNextTextEmphasisSuggestion(this.forma,this.wheelEvaluator));return N.CorePromise.resolve(new U.TextEmphasisActionResult(I.clone(t)))}}}),v)},hJqd:function(e,t,n){var o,i,r,a,s=t,c=n("oAGj"),l=n("Tq01"),u=n("kYI4"),d=n("Kkml");s.BrandifyAction=(o=function e(t,n,o,i){void 0===n&&(n=!0),void 0===o&&(o=!0),void 0===i&&(i=!0),this.authoringContext=t,this.applyFonts=n,this.applyColors=i,this.addLogo=o,l.Action.call(this,e.TYPE)},c.defineClass({name:"BrandifyAction",ctor:o,superName:"Action",statics:{TYPE:"BrandifyAction"},props:{getUserAction:function(e){return d.UserActions.BrandDocument()},execute:function(e){return u.BrandingFacade.brandifyDocument(e.document,this.authoringContext,this.applyFonts,this.addLogo,this.applyColors)}}}),o),s.ChangeBrandingAction=(i=function e(t,n,o){this.fromDocAuthoringContextID=n,this.fromActiveAuthoringContextID=o,this.toAuthoringContext=t,l.Action.call(this,e.TYPE)},c.defineClass({name:"ChangeBrandingAction",ctor:i,superName:"Action",statics:{TYPE:"ChangeBrandingAction"},props:{getUserAction:function(e){return d.UserActions.ChangeBranding(this.fromDocAuthoringContextID,this.fromActiveAuthoringContextID,c.opt(this.toAuthoringContext,(function(e){return e.id})))},execute:function(e){return u.BrandingFacade.changeBranding(e.document,this.toAuthoringContext)}}}),i),s.AddBrandingAction=(r=function e(t){this.authoringContext=t,l.Action.call(this,e.TYPE)},c.defineClass({name:"AddBrandingAction",ctor:r,superName:"Action",statics:{TYPE:"AddBrandingAction"},props:{getUserAction:function(e){return d.UserActions.AddBranding()},execute:function(e){return u.BrandingFacade.addBranding(e.document,this.authoringContext)}}}),r),s.RemoveBrandingAction=(a=function e(t){void 0===t&&(t=!0),this.undoable=t,l.Action.call(this,e.TYPE)},c.defineClass({name:"RemoveBrandingAction",ctor:a,superName:"Action",statics:{TYPE:"RemoveBrandingAction"},props:{getUserAction:function(e){return d.UserActions.RemoveBranding()},execute:function(e){return u.BrandingFacade.removeBranding(e.document)}}}),a)},j89o:function(e,t,n){var o,i,r=t,a=n("oAGj"),s=n("Tq01"),c=n("yGNn"),l=n("T8w7"),u=n("Kkml");r.SetOpacityAction=(o=function e(t,n){void 0===n&&(n=null),this.opacity=t,this.formae=a.clone(n),s.Action.call(this,e.TYPE)},a.defineClass({name:"SetOpacityAction",ctor:o,superName:"Action",statics:{TYPE:"SetOpacityAction"},props:{getUserAction:function(e){return u.UserActions.ChangeOpacity()},execute:function(e){return l.OpacityFacade.applyOpacity(this.opacity,a.clone(this.formae||e.selection.asFormaArray())),c.CorePromise.resolve(null)}}}),o),r.SetBackgroundOpacityAction=(i=function e(t,n){this.opacity=t,this.page=n,s.Action.call(this,e.TYPE)},a.defineClass({name:"SetBackgroundOpacityAction",ctor:i,superName:"Action",statics:{TYPE:"SetBackgroundOpacityAction"},props:{getUserAction:function(e){return u.UserActions.SetBackgroundOpacity()},execute:function(e){return l.OpacityFacade.applyBackgroundOpacity(this.opacity,this.page),c.CorePromise.resolve(null)}}}),i)},jo4Y:function(e,t,n){var o,i=t,r=n("oAGj"),a=n("Tq01"),s=n("CWW7"),c=n("yGNn"),l=n("Kkml");i.DeleteAction=(o=function e(t,n){void 0===t&&(t=null),void 0===n&&(n=!0),this.formaeToDelete=r.clone(t),this.undoable=n,a.Action.call(this,e.TYPE)},r.defineClass({name:"DeleteAction",ctor:o,superName:"Action",statics:{TYPE:"DeleteAction"},props:{canDo:function(e){return null!=this.formaeToDelete||e.selection.selectedCount>0},getUserAction:function(e){return l.UserActions.DeleteItem(this.undoable)},execute:function(e){var t=this;return new c.CorePromise((function(n,o){return s.CreationFacade.deleteFormae(r.clone(t.formaeToDelete||e.selection.asFormaArray()),(function(){return n(null)}))}))}}}),o)},lbYW:function(e,t,n){var o,i,r,a=t,s=n("oAGj"),c=n("Tq01"),l=n("O8XL"),u=n("yGNn"),d=n("Kkml");a.AlignFormaeAction=(o=function e(t){this.alignType=t,c.Action.call(this,e.TYPE)},s.defineClass({name:"AlignFormaeAction",ctor:o,superName:"Action",statics:{TYPE:"AlignFormaeAction"},props:{getUserAction:function(e){return d.UserActions.AlignFormae()},execute:function(e){return l.AlignmentFacade.alignFormae(this.alignType,s.clone(e.selection.asFormaArray())),u.CorePromise.resolve(null)}}}),o),a.DistributeFormaeAction=(i=function e(t){this.distType=t,c.Action.call(this,e.TYPE)},s.defineClass({name:"DistributeFormaeAction",ctor:i,superName:"Action",statics:{TYPE:"DistributeFormaeAction"},props:{getUserAction:function(e){return d.UserActions.DistributeFormae()},execute:function(e){return l.AlignmentFacade.distributeFormae(this.distType,s.clone(e.selection.asFormaArray())),u.CorePromise.resolve(null)}}}),i),a.ArrangeFormaeAction=(r=function e(t){this.horizontal=t,c.Action.call(this,e.TYPE)},s.defineClass({name:"ArrangeFormaeAction",ctor:r,superName:"Action",statics:{TYPE:"ArrangeFormaeAction"},props:{getUserAction:function(e){return d.UserActions.DistributeFormae()},execute:function(e){return l.AlignmentFacade.arrangeFormae(this.horizontal,s.clone(e.selection.asFormaArray())),u.CorePromise.resolve(null)}}}),r)},nELi:function(e,t,n){var o,i,r=t,a=n("oAGj"),s=n("Tq01"),c=n("0wFF"),l=n("yGNn"),u=n("wNKJ"),d=n("FNB+"),m=n("6ZWm"),h=n("X0GW"),A=n("iCxV"),p=n("fdtz"),f=n("fAXt"),g=n("Kkml");r.ScaleAction=(o=function e(t,n,o){void 0===o&&(o=!0),this.scale=t,this.formaeToScale=a.clone(n),this.groupScale=o,s.Action.call(this,e.TYPE)},a.defineClass({name:"ScaleAction",ctor:o,superName:"Action",statics:{TYPE:{get:function(){return"ScaleAction"}}},props:{getUserAction:function(e){return g.UserActions.ScaleItem()},execute:function(e){var t,n,o,i,r=(null!=this.formaeToScale?a.clone(this.formaeToScale):e.selection.asFormaArray().map((function(e){var t=a.clone(e.filterByKind(p.ImageForma.KIND,d.FormaTraversal.JustChildren));return t.length>0&&!t[0].controller.floating?t[0]:e}),this)).filter((function(e){return!(!(t=a.opt(e.controller,(function(e){return e.scalable})))&&null==t)&&t}),this),s=null;r.length>1&&this.groupScale&&(o=h.GroupFacade.createGroupFromFormae(a.clone(r)))&&(r.splice(0),r.push(o),s=o);for(var g=a.iter(r);!g.done;g.next()){var C,T=g.value;f.TransformFacade.scaleForma(T,this.scale),u.DragFacade.rescueFormaToPageBounds(T),(C=(n=a.as(T.controller,m.FrameController))||null!=n?n:a.as(a.opt(T.parent,(function(e){return e.controller})),m.FrameController))&&(C.updateParentGroup(),C.fitChildrenToFrame()),T.isImage()?a.opt(A.Host.logging,(function(e){return e.logToAnalytics(c.AnalyticsConstants.kAnalyticsDataImageResized,{})})):T.isShape()?a.opt(A.Host.logging,(function(e){return e.logToAnalytics(c.AnalyticsConstants.kAnalyticsDataShapeResized,{})})):T.isText()&&a.opt(A.Host.logging,(function(e){return e.logToAnalytics(c.AnalyticsConstants.kAnalyticsDataTextResized,{})}))}return(i=s)&&h.GroupFacade.cleanupGroup(i),l.CorePromise.resolve(null)}}}),o),r.RescueAction=(i=function(){},a.defineClass({name:"RescueAction",ctor:i,superName:"Action",statics:{TYPE:{get:function(){return"RescueAction"}}},props:{init_d41d:function(){s.Action.call(this,i.TYPE)},init_e169:function(e){this.formaeToRescue=a.clone(e),s.Action.call(this,i.TYPE)},getUserAction:function(e){return g.UserActions.RescueItem()},execute:function(e){var t;return(null!=this.formaeToRescue?a.clone(this.formaeToRescue):e.selection.asFormaArray().map((function(e){var t=a.clone(e.filterByKind(p.ImageForma.KIND,d.FormaTraversal.JustChildren));return t.length>0&&!t[0].controller.floating?t[0]:e}),this)).filter((function(e){return!(!(t=a.opt(e.controller,(function(e){return e.scalable})))&&null==t)&&t}),this).forEach((function(e){var t;a.as(e,p.ImageForma)&&(t=a.as(a.opt(e.parent,(function(e){return e.controller})),m.FrameController))?(t.updateParentGroup(),t.fitChildrenToFrame()):u.DragFacade.rescueFormaToPageBounds(e)})),l.CorePromise.resolve(null)}}}),i)},"o+xL":function(e,t,n){var o,i=t,r=n("oAGj"),a=n("Tq01"),s=n("0wFF"),c=n("yGNn"),l=n("6ZWm"),u=n("pnSN"),d=n("X0GW"),m=n("iCxV"),h=n("lmwz"),A=n("Kkml");i.RotateAction=(o=function e(t,n,o,i){void 0===i&&(i=!0),this.angle=t,this.initialImagePlacement=n,this.formaeToRotate=r.clone(o),this.groupRotation=i,a.Action.call(this,e.TYPE)},r.defineClass({name:"RotateAction",ctor:o,superName:"Action",statics:{TYPE:{get:function(){return"RotateAction"}}},props:{getUserAction:function(e){return A.UserActions.RotateItem()},execute:function(e){var t,n=null;null!=this.formaeToRotate?n=r.clone(this.formaeToRotate):(n=[],e.selection.selectedCount>0&&e.selection.forEachSelected((function(e){return n.push(e)})));var o=r.clone(n).filter((function(e){return r.opt(e.controller,(function(e){return 1==e.rotateable}))}),this);if(0==o.length)return c.CorePromise.resolve(null);var i,a,A=null;o.length>1&&this.groupRotation&&(i=d.GroupFacade.createGroupFromFormae(r.clone(o)))&&(o.splice(0),o.push(i),A=i);for(var p=r.iter(o);!p.done;p.next()){var f,g,C=p.value;if((f=h.ImageFacade.getImageFormaForForma(C))&&(g=this.initialImagePlacement)){var T=g.transformValues,S=f.placement.transformValues,y=S.xscale>0?1:-1,F=S.yscale>0?1:-1;f.placement=f.placement.scaleTo(T.xscale*y,T.yscale*F)}var P,v=this.angle;C.controller.rotate(v),(P=(t=r.as(C.controller,l.FrameController))||null!=t?t:r.as(r.opt(C.parent,(function(e){return e.controller})),l.FrameController))&&(P.updateParentGroup(),P.fitChildrenToFrame()),C.isImage()?r.opt(m.Host.logging,(function(e){return e.logToAnalytics(s.AnalyticsConstants.kAnalyticsDataImageRotated,{})})):C.isShape()?r.opt(m.Host.logging,(function(e){return e.logToAnalytics(s.AnalyticsConstants.kAnalyticsDataShapeRotated,{})})):C.isText()?r.opt(m.Host.logging,(function(e){return e.logToAnalytics(s.AnalyticsConstants.kAnalyticsDataTextRotated,{})})):C.kind==u.GroupForma.KIND&&r.opt(m.Host.logging,(function(e){return e.logToAnalytics(s.AnalyticsConstants.kAnalyticsDataMultiRotated,{})}))}return(a=A)&&d.GroupFacade.cleanupGroup(a),c.CorePromise.resolve(null)}}}),o)},p8vO:function(e,t,n){var o,i,r,a,s=t,c=n("oAGj"),l=n("Tq01"),u=n("4mEG"),d=n("SpAV"),m=n("CWW7"),h=n("yGNn"),A=n("iCxV"),p=n("mBzD"),f=n("q5zr"),g=n("VkKB"),C=n("RkYL"),T=n("Yspk"),S=n("Kkml"),y=n("mxdD"),F=n("QTen");s.ChangeVideoVolumeAction=(o=function e(t){void 0===t&&(t=F.VideoStyle.volumeOff),this.volumeLevel=t,l.Action.call(this,e.TYPE)},c.defineClass({name:"ChangeVideoVolumeAction",ctor:o,superName:"Action",statics:{TYPE:"ChangeVideoVolumeAction"},props:{getUserAction:function(e){return S.UserActions.ChangeVideoVolume()},execute:function(e){return y.VideoFacade.changeVideoVolume(c.clone(e.selection.asFormaArray()),this.volumeLevel),h.CorePromise.resolve(null)}}}),o),s.UpdateVideoStyleTrimAction=(i=function e(t,n,o,i,r,a){var s;void 0===a&&(a=null),this.forma=t,this.newTrim=n,this.padding=o,this.isLocalVideo=i,this.posterParams=r,l.Action.call(this,(s=a)||null!=s?s:e.TYPE)},c.defineClass({name:"UpdateVideoStyleTrimAction",ctor:i,superName:"Action",statics:{TYPE:{get:function(){return"UpdateVideoStyleTrimAction"}}},props:{getUserAction:function(e){return S.UserActions.TrimVideo()},executeIfAble:function(e){var t,n;if((t=c.as(this.forma.style,F.VideoStyle))&&(n=this.forma.videoContentNode)){if(!this.isLocalVideo)return t.startTime=this.newTrim.start,t.endTime=this.newTrim.end,this.updatePoster(e),h.CorePromise.resolve(new l.FormaActionResult([this.forma]));var o=T.TheoTimeRange.makeFromDuration(n.originalDuration),i=T.TheoTimeRange.makeFromStartAndDuration(n.offsetInOriginal||C.TheoTime.Zero,n.duration),r=this.newTrim.padBy(this.padding.seconds,o);if(d.CoreAssert.isTrue(o.contains(i),void 0,"UpdateVideoStyleTrimAction.executeIfAble","VideoActions.swift",70),d.CoreAssert.isTrue(o.contains(this.newTrim),void 0,"UpdateVideoStyleTrimAction.executeIfAble","VideoActions.swift",71),n.wasTrimmed&&i.contains(r))return t.startTime=this.newTrim.start.subtract(i.start),t.endTime=this.newTrim.end.subtract(i.start),this.updatePoster(e),h.CorePromise.resolve(new l.FormaActionResult([this.forma]))}return null},updatePoster:function(e){var t,n,o;(t=this.posterParams)&&(n=e.document)&&(o=c.as(n.content.createNode(f.ImageContentNode.KIND,null),f.ImageContentNode))&&(o.url=t.url,o.mimeType=t.mimeType,o.pixelWidth=t.width,o.pixelHeight=t.height,m.CreationFacade.removeContentNodeFromDocument(this.forma.contentNode,n),this.forma.contentNode=o,m.CreationFacade.addContentNodeToDocument(o,n))},execute:function(e){return this.executeIfAble(e)||h.CorePromise.reject("Cannot trim video - trim window outside of content")}}}),i),s.VideoInfoUpdate=(r=function(e,t){this.pre=e,this.post=t},c.defineClass({name:"VideoInfoUpdate",ctor:r}),r),s.TrimVideoAction=(a=function e(t,n,o,i,r,a,c,l,u){this.videoURL=o,this.videoID=n,this.outputURL=r,this.mimeType=i,this.progress=a,s.UpdateVideoStyleTrimAction.call(this,t,c,l,!0,u,e.TYPE),d.CoreAssert.isTrue(null==n&&null!=o||null!=n&&null==o,void 0,"TrimVideoAction.init","VideoActions.swift",162)},c.defineClass({name:"TrimVideoAction",ctor:a,superName:"UpdateVideoStyleTrimAction",statics:{TYPE:{get:function(){return"TrimVideoAction"}}},props:{execute:function(e){var t,n=this;if(S=s.UpdateVideoStyleTrimAction.prototype.executeIfAble.call(this,e))return S;if(t=this.forma.videoContentNode){var o,i=T.TheoTimeRange.makeFromDuration(t.originalDuration),r=T.TheoTimeRange.makeFromStartAndDuration(t.offsetInOriginal||C.TheoTime.Zero,t.duration),a=this.newTrim.padBy(this.padding.seconds,i);if(d.CoreAssert.isTrue(i.contains(r),void 0,"TrimVideoAction.execute","VideoActions.swift",179),d.CoreAssert.isTrue(i.contains(this.newTrim),void 0,"TrimVideoAction.execute","VideoActions.swift",180),o=A.Host.videoUtils){var l,m,f,S=null,y=this.outputURL,F=this.progress;if(null!=(l=this.videoURL)?S=o.getAttributesForVideoAtUrl(l).then((function(e){return o.trimVideoAtUrl(l,y,a,F).then((function(t){return new s.VideoInfoUpdate(c.as(e,p.VideoInfo),c.as(t,p.VideoInfo))}))})):null!=(m=this.videoID)&&(S=o.getAttributesForVideoWithId(m).then((function(e){return o.trimVideoWithId(m,y,a,F).then((function(t){return new s.VideoInfoUpdate(c.as(e,p.VideoInfo),c.as(t,p.VideoInfo))}))}))),f=S)return f.then((function(o){var i,l,d;if((i=c.as(o,s.VideoInfoUpdate))&&(l=i.pre)&&(d=i.post)){var m=a.start,A=l.duration,p=new u.ReplaceVideoFormaContentAction(n.forma,n.outputURL,n.mimeType,d.width,d.height,d.duration,m,r.duration,m,A,c.clone([]),n.posterParams,!1,t.mediaMetadata||g.MediaMetadata.init_36a2(),t.localIdentifier);return e.designController.actions.doAction(p)}return h.CorePromise.reject("Unexpected trim results")}))}}return h.CorePromise.reject("An error occurred while trimming")}}}),a)},pjjd:function(e,t,n){var o,i=t,r=n("oAGj"),a=n("Tq01"),s=n("CWW7"),c=n("yGNn"),l=n("FNB+"),u=n("lmwz"),d=n("Kkml");i.DuplicateAction=(o=function e(t,n,o,i){void 0===i&&(i=!1),this.formaeToDuplicate=r.clone(t),this.offsetDuplicates=n,this.selectDuplicates=o,this.isDragShortcut=i,a.Action.call(this,e.TYPE)},r.defineClass({name:"DuplicateAction",ctor:o,superName:"Action",statics:{TYPE:"DuplicateAction",canAddImages:function(e){if(0==e.length)return!1;for(var t=0,n=r.iter(e);!n.done;n.next())n.value.isImage()&&(t+=1);return u.ImageFacade.canAddImages(e[0].root,t)},useSelection:function(){return new o(null,!0,!0,!1)}},props:{getUserAction:function(e){return d.UserActions.DuplicateItems(r.clone(this.formaeToDuplicate||e.selection.asFormaArray()))},execute:function(e){var t=this;return s.CreationFacade.duplicateItems(r.clone(this.formaeToDuplicate||e.selection.asFormaArray()),this.offsetDuplicates,!1,this.isDragShortcut).then((function(e){var n;return(n=r.as(e,["Array",l.Forma]))?(t.selectDuplicates&&(t.newSelection=r.clone(n)),new a.FormaActionResult(r.clone(n))):c.CorePromise.reject("did not get an array of Forma back from CreationFacade.duplicateItems")}))},updateSelection:function(e){return null!=this.newSelection&&this.selectDuplicates&&e.selection.replaceSelectionWithFormae(r.clone(this.newSelection)),this.newSelection}}}),o)},raY1:function(e,t,n){var o,i=t,r=n("oAGj"),a=n("Tq01"),s=n("CWW7"),c=n("Kkml");i.AddFormaAction=(o=function e(t,n,o){this.page=t,this.forma=n,this.params=o,a.Action.call(this,e.TYPE)},r.defineClass({name:"AddFormaAction",ctor:o,superName:"Action",statics:{TYPE:"AddFormaAction"},props:{getUserAction:function(e){return c.UserActions.AddImage()},execute:function(e){return s.CreationFacade.addForma(this.page,this.forma,this.params)}}}),o)},rsKm:function(e,t,n){var o,i,r,a=t,s=n("oAGj"),c=n("Tq01"),l=n("yGNn"),u=n("gBh/"),d=n("c+uM"),m=n("8t9B"),h=n("Kkml");a.ApplyColorThemeAction=(o=function e(t,n,o,i){void 0===o&&(o=null),void 0===i&&(i=!1),this.themeColors=s.clone(t),this.themeID=n,this.doShuffle=i,this.page=o,c.Action.call(this,e.TYPE)},s.defineClass({name:"ApplyColorThemeAction",ctor:o,superName:"Action",statics:{TYPE:"ApplyColorThemeAction"},props:{getUserAction:function(e){return this.doShuffle?h.UserActions.ShuffleColorTheme():h.UserActions.SetColorTheme()},execute:function(e){var t;return(t=this.page||s.opt(e.document,(function(e){return e.firstPage})))&&(u.ColorThemeFacade.applyColorTheme(s.clone(this.themeColors),this.themeID,t),this.doShuffle&&u.ColorThemeFacade.shuffleColorTheme(t)),l.CorePromise.resolve(new c.ActionResult)}}}),o),a.ShuffleColorThemeAction=(i=function e(t){void 0===t&&(t=null),this.page=t,c.Action.call(this,e.TYPE)},s.defineClass({name:"ShuffleColorThemeAction",ctor:i,superName:"Action",statics:{TYPE:"ShuffleColorThemeAction"},props:{getUserAction:function(e){return h.UserActions.ShuffleColorTheme()},execute:function(e){var t;return(t=this.page||s.opt(e.document,(function(e){return e.firstPage})))&&u.ColorThemeFacade.shuffleColorTheme(t),l.CorePromise.resolve(new c.ActionResult)}}}),i),a.ModifyColorThemeAction=(r=function e(t,n,o){void 0===o&&(o=null),this.color=t,this.key=n,this.page=o,c.Action.call(this,e.TYPE)},s.defineClass({name:"ModifyColorThemeAction",ctor:r,superName:"Action",statics:{TYPE:"ModifyColorThemeAction"},props:{getUserAction:function(e){return h.UserActions.ModifyColorTheme()},execute:function(e){var t,n=this;return(t=this.page||s.opt(e.document,(function(e){return e.firstPage})))&&(u.ColorThemeFacade.modifyColorTheme(this.color,this.key,t),t.root.filterByControllerKind(m.TypeLockupController.KIND).forEach((function(e){var t;if(t=s.opt(s.as(e.style,d.LockupStyle),(function(e){return e.characterStyles.Highlight}))){var o=!1;t.colors.forEachColor((function(t,i,r){i!=n.key||o||(s.opt(e.controller,(function(e){return e.styleChanged()})),o=!0)}))}}))),l.CorePromise.resolve(new c.ActionResult)}}}),r)},sTUO:function(e,t,n){var o,i,r=t,a=n("oAGj"),s=n("Tq01"),c=n("yGNn"),l=n("MYNe"),u=n("Kkml");r.ChangeZOrderAction=(o=function e(t){this.zIndex=t,s.Action.call(this,e.TYPE)},a.defineClass({name:"ChangeZOrderAction",ctor:o,superName:"Action",statics:{TYPE:"ChangeZOrderAction"},props:{getUserAction:function(e){return u.UserActions.ChangeZOrder()},execute:function(e){var t=e.selection.formaAt(0);return l.LayerFacade.setZOrder(this.zIndex,t),c.CorePromise.resolve(null)}}}),o),r.SendForwardBackwardAction=(i=function e(t,n){this.direction=t,this.formae=a.clone(n),s.Action.call(this,e.TYPE)},a.defineClass({name:"SendForwardBackwardAction",ctor:i,superName:"Action",statics:{TYPE:"SendForwardBackwardAction"},props:{getUserAction:function(e){return u.UserActions.SendForwardBackward()},execute:function(e){l.LayerFacade.sortInZOrder(a.clone(this.formae));var t=a.clone(l.LayerFacade.sortInZOrder(a.clone(e.selection.asFormaArray())));this.direction!=l.ZOrderEnum.Back&&this.direction!=l.ZOrderEnum.Forward||(this.formae=a.reverse(this.formae));for(var n=a.iter(this.formae);!n.done;n.next()){var o,i=n.value,r=l.LayerFacade.getZOrder(i),s=l.LayerFacade.getMinLayerIndex(i);if(null!=(o=a.opt(i.controller,(function(e){return e.getReorderableLayerCount()}))))switch(this.formae.length<t.length&&(this.direction==l.ZOrderEnum.Front?o-=t.length-this.formae.length:this.direction==l.ZOrderEnum.Back&&(s+=t.length-this.formae.length)),this.direction){case"forward":r<o+s-1&&l.LayerFacade.setZOrder(r+1,i);break;case"backward":r!=s&&l.LayerFacade.setZOrder(r-1,i);break;case"front":r!=o+s-1&&l.LayerFacade.setZOrder(o+s-1,i);break;case"back":r!=s&&l.LayerFacade.setZOrder(s,i)}}return c.CorePromise.resolve(null)}}}),i)},vV1H:function(e,t,n){var o,i=t,r=n("oAGj"),a=n("Tq01"),s=n("0wFF"),c=n("yGNn"),l=n("iCxV"),u=n("Kkml");i.FlipAction=(o=function e(t,n){void 0===t&&(t=!1),void 0===n&&(n=null),this.vertical=t,this.formaeToFlip=r.clone(n),a.Action.call(this,e.TYPE)},r.defineClass({name:"FlipAction",ctor:o,superName:"Action",statics:{TYPE:{get:function(){return"FlipAction"}}},props:{getUserAction:function(e){return u.UserActions.FlipItem()},execute:function(e){var t=this,n=null;return null!=this.formaeToFlip?n=r.clone(this.formaeToFlip):(n=[],e.selection.selectedCount>0&&e.selection.forEachSelected((function(e){return n.push(e)}))),r.clone(n).filter((function(e){return r.opt(e.controller,(function(e){return 1==e.flippable}))}),this).forEach((function(e){e.controller.flip(t.vertical),e.isImage()?r.opt(l.Host.logging,(function(e){return e.logToAnalytics(s.AnalyticsConstants.kAnalyticsDataImageFlipped,{})})):e.isShape()?r.opt(l.Host.logging,(function(e){return e.logToAnalytics(s.AnalyticsConstants.kAnalyticsDataShapeFlipped,{})})):e.isText()&&r.opt(l.Host.logging,(function(e){return e.logToAnalytics(s.AnalyticsConstants.kAnalyticsDataTextFlipped,{})}))})),c.CorePromise.resolve(null)}}}),o)},wpCo:function(e,t,n){var o,i=t,r=n("oAGj"),a=n("Tq01"),s=n("0wFF"),c=n("6h7+"),l=n("iCxV"),u=n("Kkml");i.AddBadgeAction=(o=function e(t,n,o){void 0===o&&(o="lockup"),this.badgeDoc=t,this.badgeID=n,this.badgeType=o,a.Action.call(this,e.TYPE)},r.defineClass({name:"AddBadgeAction",ctor:o,superName:"Action",statics:{TYPE:"AddBadgeAction"},props:{getUserAction:function(e){return u.UserActions.AddBadge()},execute:function(e){var t=this,n=e.document;return c.BadgeFacade.addBadge(this.badgeDoc,this.badgeID,n.firstPage).then((function(e){var n;return(n=r.opt(r.as(e,a.FormaActionResult),(function(e){return e.formae})))&&(t.newSelection=r.clone(n)),r.opt(l.Host.logging,(function(e){return e.logToAnalytics(s.AnalyticsConstants.kDesignIngredientAdded,{contextualData1:"designIngredientId:"+t.badgeID,contextualData2:"designIngredientType:"+t.badgeType})})),e}))},updateSelection:function(e){return null!=this.newSelection&&e.selection.replaceSelectionWithFormae(r.clone(this.newSelection)),this.newSelection}}}),o)},x6FH:function(e,t,n){var o,i,r,a,s,c=t,l=n("oAGj"),u=n("Tq01"),d=n("yGNn"),m=n("x35w"),h=n("Kkml");c.CreatePaddedCollageAction=(o=function e(){u.Action.call(this,e.TYPE)},l.defineClass({name:"CreatePaddedCollageAction",ctor:o,superName:"Action",statics:{TYPE:"CreatePaddedCollageAction"},props:{getUserAction:function(e){return h.UserActions.CreateCollage()},execute:function(e){var t,n;return(t=l.opt(e.document,(function(e){return e.firstPage})))?(n=m.GridFacade.createPaddedCollage(t))?d.CorePromise.resolve(new u.FormaActionResult([n])):d.CorePromise.reject("could not get or create page grid"):d.CorePromise.reject("no document or page?")}}}),o),c.SetGridParametersAction=(i=function e(t,n){this.spacing=t,this.margin=n,u.Action.call(this,e.TYPE)},l.defineClass({name:"SetGridParametersAction",ctor:i,superName:"Action",statics:{TYPE:"SetGridParametersAction"},props:{getUserAction:function(e){return h.UserActions.SetLayoutMargin()},execute:function(e){var t;if(t=l.opt(e.document,(function(e){return e.firstPage}))){var n;if(m.GridFacade.setPageGridParameters(t,this.spacing,this.margin),this.spacing==this.margin&&(n=m.GridFacade.getPageGrid(t,!1))&&n.spacing!=n.margin){var o=Math.min(n.spacing,n.margin);m.GridFacade.setPageGridParameters(t,o,o)}return d.CorePromise.resolve(null)}return d.CorePromise.reject("no document or page?")}}}),i),c.SwapGridFormaAction=(r=function e(t,n){this.a=t,this.b=n,u.Action.call(this,e.TYPE)},l.defineClass({name:"SwapGridFormaAction",ctor:r,superName:"Action",statics:{TYPE:"SwapGridFormaAction"},props:{getUserAction:function(e){return h.UserActions.SwapGridCells()},execute:function(e){return m.GridFacade.isChildSwappable(this.a)&&m.GridFacade.isChildSwappable(this.b)?(m.GridFacade.swapChildren(this.a,this.b),d.CorePromise.resolve(null)):d.CorePromise.reject("grid children not swappable? or no grid controller?")}}}),r),c.SetGridStyleAction=(a=function e(t,n){this.style=t,this.variation=n,u.Action.call(this,e.TYPE)},l.defineClass({name:"SetGridStyleAction",ctor:a,superName:"Action",statics:{TYPE:"SetGridStyleAction"},props:{getUserAction:function(e){return h.UserActions.SetGridStyle()},execute:function(e){var t;return(t=l.opt(e.document,(function(e){return e.firstPage})))?(m.GridFacade.applyGridStyle(this.style,this.variation,t),d.CorePromise.resolve(null)):d.CorePromise.reject("no document or page?")}}}),a),c.EnterGridLayoutModeAction=(s=function e(){u.Action.call(this,e.TYPE)},l.defineClass({name:"EnterGridLayoutModeAction",ctor:s,superName:"Action",statics:{TYPE:"EnterGridLayoutModeAction"},props:{getUserAction:function(e){return h.UserActions.EnterGridLayoutMode()},execute:function(e){var t,n;return(t=l.opt(e.document,(function(e){return e.firstPage})))&&(n=m.GridFacade.getPageGrid(t,!0))?(n.enterLayoutMode(),d.CorePromise.resolve(null)):d.CorePromise.reject("no page or grid?")}}}),s)},"y/On":function(e,t,n){var o,i,r=t,a=n("oAGj"),s=n("Tq01"),c=n("0wFF"),l=n("yGNn"),u=n("FNB+"),d=n("P83h"),m=n("pnSN"),h=n("X0GW"),A=n("iCxV"),p=n("Kkml");r.GroupAction=(o=function e(t,n,o){void 0===t&&(t=null),void 0===n&&(n=!0),void 0===o&&(o=""),this.formaeToGroup=a.clone(t),this.selectGroup=n,this.method=o,s.Action.call(this,e.TYPE)},a.defineClass({name:"GroupAction",ctor:o,superName:"Action",statics:{TYPE:"GroupAction"},props:{getUserAction:function(e){return p.UserActions.GroupItems()},execute:function(e){var t=this;return h.GroupFacade.groupItems(a.clone(this.formaeToGroup||e.selection.asFormaArray())).then((function(e){var n=a.as(e,u.Forma);if(null!=n){var o;if(t.selectGroup&&(t.newSelection=[n]),o=a.as(n,m.GroupForma)){var i=h.GroupFacade.getGroupDepth(o);a.opt(A.Host.logging,(function(e){return e.logToAnalytics(c.AnalyticsConstants.kAnalyticsDataGroupButton,{contextualData1:"count:"+o.childCount,contextualData2:"depth:"+i,contextualData3:"method:"+t.method})}))}return new s.FormaActionResult([n])}return l.CorePromise.reject("did not get a GroupForma back from GroupFacade.groupItems")}))},updateSelection:function(e){if(null!=this.newSelection&&this.selectGroup){e.selection.replaceSelectionWithFormae(a.clone(this.newSelection));for(var t=a.iter(this.newSelection);!t.done;t.next()){var n=t.value,o=new d.FormaGroupEvent(n);n.beginUpdate(o),n.endUpdate(o)}}return this.newSelection}}}),o),r.UngroupAction=(i=function e(t,n,o){void 0===t&&(t=null),void 0===n&&(n=!0),void 0===o&&(o=""),this.formaeToUngroup=a.clone(t),this.selectUngroup=n,this.method=o,s.Action.call(this,e.TYPE)},a.defineClass({name:"UngroupAction",ctor:i,superName:"Action",statics:{TYPE:"UngroupAction"},props:{getUserAction:function(e){return p.UserActions.UngroupItems()},execute:function(e){var t=this;return h.GroupFacade.ungroupItems(a.clone(this.formaeToUngroup||e.selection.asFormaArray())).then((function(e){var n;return(n=a.as(e,["Array",u.Forma]))?(t.selectUngroup&&(t.newSelection=a.clone(n)),a.opt(A.Host.logging,(function(e){return e.logToAnalytics(c.AnalyticsConstants.kAnalyticsDataUngroupButton,{contextualData1:"count:"+n.length,contextualData3:"method:"+t.method})})),new s.FormaActionResult(a.clone(n))):l.CorePromise.reject("did not get a set of forma back from GroupFacade.ungroupItems")}))},updateSelection:function(e){if(null!=this.newSelection&&this.selectUngroup){e.selection.removeStaleSelections(),e.selection.selectFormae(a.clone(this.newSelection));for(var t=a.iter(this.newSelection);!t.done;t.next()){var n=t.value,o=new d.FormaUngroupEvent(n);n.beginUpdate(o),n.endUpdate(o)}}return this.newSelection}}}),i)}}]);
//# sourceMappingURL=vendors_npm_spark_f629642e-5fbee0ec.js.map