(window.webpackJsonptheoWebApp=window.webpackJsonptheoWebApp||[]).push([[12],{"+IES":function(e,t,n){var o=t,r=n("oAGj");o.MotionLogic=r.defineProtocol("MotionLogic",{apply:"(Forma, Array<KeyFrame>, Dictionary<String>) -> Void"})},"3/rh":function(e,t,n){var o,r=t,i=n("oAGj"),a=n("4/a+");r.MotionEntryFadeIn=(o=function(){this.srcId="MotionSrcFadeIn",this.logic=new a.MotionLogicDur,this.args={st:.1,dur:.9}},i.defineClass({name:"MotionEntryFadeIn",ctor:o,statics:{_implements:function(e){return"MotionEntry"==e}}}),o)},"3OP7":function(e,t,n){var o,r=t,i=n("oAGj"),a=n("SpAV"),s=n("gXiO"),c=n("aS4X"),l=n("uMFj"),u=n("iCxV"),d=n("muPB"),p=n("C4JV");r.DocumentPersistenceFactory=(o=function(){s.CoreObject.call(this)},i.defineClass({name:"DocumentPersistenceFactory",ctor:o,superName:"CoreObject",statics:{THEO_PROPERTY_NAMESPACE:"theo#",namespacedPropertyName:function(e){return e.includes("#")?e:o.THEO_PROPERTY_NAMESPACE+e},usesJsonDocumentEncoding:function(e){return!!e.getComponentWithAbsolutePath(p.JSON_CONTENT_PATH_DCX2D)},encoderFor:function(e){return u.Host.persistUtils.useJsonDocumentEncoding()?(a.CoreAssert.info("Using JSONDocumentEncoder"),new p.JSONDocumentEncoder(e)):(a.CoreAssert.info("Using DCXDocumentEncoder"),new l.DCXDocumentEncoder(e))},decoderFor:function(e){return o.usesJsonDocumentEncoding(e)?(a.CoreAssert.info("Using JSONDocumentDecoder"),new d.JSONDocumentDecoder(e)):(a.CoreAssert.info("Using DCXDocumentDecoder"),new c.DCXDocumentDecoder(e))}}}),o)},"3hwA":function(e,t,n){var o=t,r=n("oAGj");o.IImportDataObject=r.defineProtocol("IImportDataObject",{id:"String",type:"String",name:"String",path:"String",optionalStringProperty:"(String) -> String",stringProperty:"(String, String) -> String",numberProperty:"(String, Double) -> Double",intProperty:"(String, Integer) -> Integer",booleanProperty:"(String, Boolean) -> Boolean",optionalBooleanProperty:"(String) -> Boolean",property:"(String) -> AnyObject",forEachChild:"((IImportDataObject, Integer) -> Void) -> Void",forEachComponent:"((IImportDataComponent, Integer) -> Void) -> Void"}),o.IMissingFontHelper=r.defineProtocol("IMissingFontHelper",{recordMissingFont:"(String) -> Void"}),o.IImportDataComponent=r.defineProtocol("IImportDataComponent",{id:"String",name:"String",path:"String",mimeType:"String",etag:"String",url:"String"})},"4/a+":function(e,t,n){var o,r=t,i=n("oAGj"),a=n("SpAV"),s=n("URxh"),c=n("RkYL");r.MotionLogicDur=(o=function(){},i.defineClass({name:"MotionLogicDur",ctor:o,statics:{_implements:function(e){return"MotionLogic"==e}},props:{apply:function(e,t,n){var o,r,l,u,d=(o=i.as(n.st,"Double"))||null!=o?o:0,p=d+((r=i.as(n.dur,"Double"))||null!=r?r:1),f=[];if(p>0&&t.length>0){f=[];var h=t[0],m=t[t.length-1];d!=h.time.seconds&&f.push(h),f.push(new s.KeyFrame(c.TheoTime.fromSeconds(d),h.timingFunction,h.placement,h.bounds,h.style)),f.push(new s.KeyFrame(c.TheoTime.fromSeconds(p),m.timingFunction,m.placement,m.bounds,m.style))}(l=e.animation)?l.keyFrames=f.concat():a.CoreAssert.warning("Missing animation key-frame array"),(u=i.opt(e.animation,(function(e){return e.endTime})))&&u.seconds<p&&(e.animation.endTime=c.TheoTime.fromSeconds(p))}}}),o)},"6Tzw":function(e,t,n){var o,r=t,i=n("oAGj"),a=n("0wFF"),s=n("gXiO"),c=n("FNB+"),l=n("9Lk3"),u=n("iCxV"),d=n("sIWg");r.MultiSelectUIMode=i.defineEnum("MultiSelectUIMode",{ModeWithAutoDismissAfterOneTap:0,ModeRequiresExplicitDismiss:1}),r.SelectionFacade=(o=function(){s.CoreObject.call(this)},i.defineClass({name:"SelectionFacade",ctor:o,superName:"CoreObject",statics:{isMultiSelect:function(e){var t;return!(!((t=e)&&t.selectedCount>1)||t.inCharStyleMode)},isGroupSelect:function(e){var t,n;return!(!(n=e)||1!=n.selectedCount||!(t=i.opt(i.opt(n.formaAt(0),(function(e){return e.controller})),(function(e){return e.userGroupMember})))&&null==t||!t)},isCharStyleSelection:function(e){var t,n,o;return!!((t=e)&&t.selectedCount>1&&(n=t.formaAt(0))&&(o=t.formaAt(1)))&&(n.isTypeLockup()&&o.isText())},getMultiSelectUIMode:function(){return r.MultiSelectUIMode.ModeRequiresExplicitDismiss},enableAdditionalMultiSelectGestures:function(){return!1},selectFormae:function(e){var t;if(e.length>0&&(t=i.opt(i.opt(i.opt(i.first(e),(function(e){return e.page.document})),(function(e){return e.controller})),(function(e){return e.selection})))){var n=t.selectedCount;t.selectFormae(i.clone(e));for(var o=i.iter(t.asFormaArray());!o.done;o.next()){var r,s=o.value;(r=i.opt(s.controller,(function(e){return e.userGroupRoot})))&&(t.deselectForma(s),t.selectForma(r))}var c=t.selectedCount;if(c>1){for(var l=i.iter(t.asFormaArray());!l.done;l.next())s=l.value,i.opt(s.controller,(function(e){return 0==e.canMultiSelect}))&&t.deselectForma(s);i.opt(u.Host.logging,(function(e){return e.logToAnalytics(a.AnalyticsConstants.kAnalyticsDataSelectionMultiple,{contextualData1:"oldSelectedCount:"+n,contextualData2:"newSelectedCount:"+c})}))}}},replaceSelectionWithFormae:function(e){var t;if(e.length>0&&(t=i.opt(i.opt(i.opt(i.first(e),(function(e){return e.page.document})),(function(e){return e.controller})),(function(e){return e.selection})))){var n=e.filter((function(e){return i.opt(e.controller,(function(e){return 1==e.canMultiSelect}))}),this);t.replaceSelectionWithFormae(i.clone(n))}},deselectFormae:function(e){var t;if(e.length>0&&(t=i.opt(i.opt(i.opt(i.first(e),(function(e){return e.page.document})),(function(e){return e.controller})),(function(e){return e.selection})))){t.deselectFormae(i.clone(e));for(var n=i.iter(e);!n.done;n.next()){var o,r=n.value;(o=i.opt(r.controller,(function(e){return e.userGroupRoot})))&&t.deselectForma(o)}}},canSelectParent:function(e){var t;return!!((t=i.opt(i.opt(e.document,(function(e){return e.controller})),(function(e){return e.selection})))&&t.selectedCount>=1&&t.formaAt(0))},selectParent:function(e){var t;if(t=i.opt(i.opt(e.document,(function(e){return e.controller})),(function(e){return e.selection}))){var n,r,a;if(1==t.selectedCount&&(n=t.formaAt(0))&&(r=n.parent)&&(a=r.controller)&&a.kind!=l.GridController.KIND&&a.selectable)return void t.replaceSelection(a.forma);o.deselectAllOnPage(e)}},canSelectChild:function(e){var t,n,o;if((n=i.opt(i.opt(e.document,(function(e){return e.controller})),(function(e){return e.selection})))&&1==n.selectedCount&&(o=n.formaAt(0))&&o.controller)for(var r=i.iter(o.visitAsArray(c.FormaTraversal.JustChildren));!r.done;r.next()){var a=r.value;if(((t=i.opt(a.controller,(function(e){return e.selectable})))||null!=t)&&t&&i.opt(a.controller,(function(e){return e.kind!=l.GridController.KIND})))return!0}return!1},selectChild:function(e){var t,n,o;if((n=i.opt(i.opt(e.document,(function(e){return e.controller})),(function(e){return e.selection})))&&1==n.selectedCount&&(o=n.formaAt(0))&&o.controller)for(var r=i.iter(o.visitAsArray(c.FormaTraversal.JustChildren));!r.done;r.next()){var a=r.value;((t=i.opt(a.controller,(function(e){return e.selectable})))||null!=t)&&t&&n.replaceSelection(a)}},canSelectSibling:function(e){var t,n,o,r,a=this;return!!((t=i.opt(i.opt(e.document,(function(e){return e.controller})),(function(e){return e.selection})))&&1==t.selectedCount&&(n=t.formaAt(0))&&(o=n.controller)&&(r=i.opt(o.getSiblingFormae(),(function(e){return e.filter((function(e){return i.opt(e.controller,(function(e){return 1==e.selectable}))}),a)}))))&&r.length>1},selectSibling:function(e,t){void 0===t&&(t=!0);var n,o,r,a,s,l=this;if((n=i.opt(i.opt(e.document,(function(e){return e.controller})),(function(e){return e.selection})))&&1==n.selectedCount&&(o=n.formaAt(0))&&(r=o.controller)&&(a=i.opt(r.getSiblingFormae(),(function(e){return e.filter((function(e){return i.opt(e.controller,(function(e){return 1==e.selectable}))}),l)})))&&null!=(s=i.indexOfEq(a,o,c._equality_Forma_Forma))){var u=(s+(t?1:-1))%a.length;u<0&&(u=a.length-1);var d=a[u];n.replaceSelection(d)}},marqueeSelectFormae:function(e,t){var n;if(e.length>0&&(n=i.opt(i.opt(i.opt(i.first(e),(function(e){return e.page.document})),(function(e){return e.controller})),(function(e){return e.selection})))){for(var r=!0,a=i.iter(e);!a.done;a.next()){var s=a.value;if(!n.isSelected(s)&&!n.isGroupSelected(s)){r=!1;break}}r&&(t||u.Host.platform.isMobile)?o.deselectFormae(i.clone(e)):t||u.Host.platform.isMobile?o.selectFormae(i.clone(e)):o.replaceSelectionWithFormae(i.clone(e))}},deselectAllOnPage:function(e){var t;if(t=i.opt(i.opt(e.document,(function(e){return e.controller})),(function(e){return e.selection}))){var n=t.selectedCount;t.clearSelection(!0),i.opt(u.Host.logging,(function(e){return e.logToAnalytics(a.AnalyticsConstants.kAnalyticsDataSelectionDeselectAll,{contextualData1:"oldSelectedCount:"+n})}))}},selectAllOnPage:function(e){var t;if(t=i.opt(i.opt(e.document,(function(e){return e.controller})),(function(e){return e.selection}))){var n=t.selectedCount;t.clearSelectionNoUpdate();var r=i.clone(e.selectableFormaeIntersectingRect(d.TheoRect.Huge));o.selectFormae(i.clone(r));var s=t.selectedCount;i.opt(u.Host.logging,(function(e){return e.logToAnalytics(a.AnalyticsConstants.kAnalyticsDataSelectionSelectAll,{contextualData1:"oldSelectedCount:"+n,contextualData2:"newSelectedCount:"+s})}))}}}}),o)},"6azk":function(e,t,n){var o,r,i,a=t,s=n("oAGj"),c=n("SpAV"),l=n("gXiO"),u=n("WF+G"),d=n("ZhwN");a.MiniDocumentBranch=(o=function(e){this.root_=new a.MiniDocumentNode(e,null)},s.defineClass({name:"MiniDocumentBranch",ctor:o,superName:"CoreObject",statics:{_implements:function(e){return"HostDocumentBranch"==e}},props:{root:{get:function(){return this.root_}},id:{get:function(){return this.root.nodeId}},allComponents:{get:function(){var e=[];return this.root_.findComponent((function(t){return e.push(t),!1})),e}},getValue:function(e){return this.root_.getValue(e)},appendNode:function(e,t,n){return(n||this.root_).appendNode(e,t)},removeNode:function(e){this.root_.removeNode(e)},getNodeWithAbsolutePath:function(e){return this.root_.find((function(t){return t.getAbsolutePath().asString==e}))},getChildrenOfNode:function(e){return e.children},getComponentsOfNode:function(e){return e.components},getComponentWithId:function(e){return this.root_.findComponent((function(t){return t.componentId==e}))},getPathForComponent:function(e){return e.sourceFile},getComponentWithAbsolutePath:function(e){return this.root_.findComponent((function(t){return t.absolutePath.asString==e}))},addComponent:function(e,t,n,o,r,i,a,s,c){return i.addComponent(e,t,n,o,r,a)},moveComponent:function(e,t){return t.moveComponent(e)},updateComponent:function(e,t,n){var o;return(o=s.as(e,a.MiniDocumentComponent))?(null!=t&&(o.sourceFile=t),o):(c.CoreAssert.fail("Not a Core component","MiniDocumentBranch.updateComponent","MiniDocumentBranch.swift",93),null)},transferEncodingTo:function(e){this.root_.transferEncodingTo(e);for(var t=s.iter(this.root_.components);!t.done;t.next()){var n=t.value;e.appendComponent(n.componentId,n.sourceFile,n.type)}}}}),o),a.MiniDocumentNode=(r=function(e,t){var n;this.parent_=null,this.props_={},this.children_=[],this.components_=[],l.CoreObject.call(this),this.setValue("id",s.as((n=e)||null!=n?n:d.GUIDUtils.makeGUID(),"AnyObject")),this.path=t},s.defineClass({name:"MiniDocumentNode",ctor:r,superName:"CoreObject",statics:{_implements:function(e){return"HostDocumentNode"==e}},props:{path:{get:function(){return s.as(this.props_.path,"String")},set:function(e){null==e?s.removeKey(this.props_,"path"):this.props_.path=s.as(e,"AnyObject")}},nodeId:{get:function(){var e;return(e=s.as(this.props_.id,"String"))||null!=e?e:""}},getValue:function(e){return this.props_[e]},setValue:function(e,t){null==t?s.removeKey(this.props_,e):this.props_[e]=t},removeValue:function(e){s.removeKey(this.props_,e)},appendNode:function(e,t){var n=new r(e,t);return this.children_.push(n),n.parent_=this,n},removeNode:function(e){var t;(t=s.as(e,r))?t.parent_!==this?c.CoreAssert.fail("Can't remove a non-child node","MiniDocumentNode.removeNode","MiniDocumentBranch.swift",163):(s.remove(this.children_,t),t.parent_=null):c.CoreAssert.fail("Not a Core node","MiniDocumentNode.removeNode","MiniDocumentBranch.swift",169)},children:{get:function(){return this.children_}},components:{get:function(){return this.components_}},addComponent:function(e,t,n,o,r,i){var s=new a.MiniDocumentComponent(e,t,n,o,r,i);return s.node=this,this.components_.push(s),s},moveComponent:function(e){var t,n;return(t=s.as(e,a.MiniDocumentComponent))?((n=t.node)&&s.remove(n.components_,t),this.components_.push(t),t.node=this,t):(c.CoreAssert.fail("Not a Core component","MiniDocumentNode.moveComponent","MiniDocumentBranch.swift",202),null)},getAbsolutePath:function(){var e=s.opt(this.parent_,(function(e){return e.getAbsolutePath()}))||u.CorePath.ROOT;return null==this.path?e:e.appendPart(this.path)},find:function(e){if(e(this))return this;for(var t=s.iter(this.children);!t.done;t.next()){var n;if(n=t.value.find(e))return n}return null},findComponent:function(e){for(var t=s.iter(this.components);!t.done;t.next()){var n=t.value;if(e(n))return n}for(var o=s.iter(this.children);!o.done;o.next()){var r;if(r=o.value.findComponent(e))return r}return null},transferEncodingTo:function(e){for(var t=s.iter(this.props_);!t.done;t.next()){var n=t.key,o=t.value;e.setManifestProperty(n,o,!1)}for(var r=s.iter(this.children);!r.done;r.next()){var i=r.value,a=e.findChild(i.path)||e.appendChild(i.nodeId);i.transferEncodingTo(a)}}}}),r),a.MiniDocumentComponent=(i=function(e,t,n,o,r,i){var a;this.node=null,this.componentId="",this.name=null,this.etag=null,this.relationship=null,this.name=e,this.componentId=(a=t)||null!=a?a:d.GUIDUtils.makeGUID(),this.type=n,this.relationship=o,this.path=r,this.sourceFile=i,l.CoreObject.call(this)},s.defineClass({name:"MiniDocumentComponent",ctor:i,superName:"CoreObject",statics:{_implements:function(e){return"HostDocumentComponent"==e}},props:{absolutePath:{get:function(){var e=s.opt(this.node,(function(e){return e.getAbsolutePath()}))||u.CorePath.ROOT;return null!=this.path&&(e=e.appendPart(this.path)),e}},mutableCopy:{get:function(){return this}}}}),i)},"7EVG":function(e,t,n){var o,r=t,i=n("oAGj"),a=n("gXiO");r.WatermarkFacade=(o=function(){a.CoreObject.call(this)},i.defineClass({name:"WatermarkFacade",ctor:o,superName:"CoreObject",statics:{setWatermark:function(e,t){t.watermarkEnabled=e},getWatermark:function(e){return e.watermarkEnabled}}}),o)},"95jH":function(e,t,n){var o,r=t,i=n("oAGj"),a=n("SpAV"),s=n("ascj"),c=n("URxh"),l=n("K17h"),u=n("RkYL");r.MotionLogicStacked=(o=function(){},i.defineClass({name:"MotionLogicStacked",ctor:o,statics:{_implements:function(e){return"MotionLogic"==e}},props:{updateColorTable:function(e,t){var n=t.style.colors.clone();i.opt(e.style,(function(e){return e.colors.setColor(s.ColorRole.FieldPrimary,n.fieldPrimary)})),i.opt(e.style,(function(e){return e.colors.setColor(s.ColorRole.FieldSecondary,n.fieldSecondary)}))},updateFormaAnim:function(e,t,n,o,r){var a,s=[],l=u.TheoTime.fromSeconds(t),d=u.TheoTime.fromSeconds(n);if(r.length>0){var p=r[0];this.updateColorTable(p,e),l.value>0&&s.push(new c.KeyFrame(u.TheoTime.Zero,p.timingFunction,p.placement,p.bounds,i.opt(p.style,(function(e){return e.clone()})))),s.push(new c.KeyFrame(l,p.timingFunction,p.placement,p.bounds,i.opt(p.style,(function(e){return e.clone()}))))}r.length>1&&(p=r[1],this.updateColorTable(p,e),s.push(new c.KeyFrame(d,p.timingFunction,p.placement,p.bounds,i.opt(p.style,(function(e){return e.clone()}))))),(a=e.animation)&&(a.startTime=u.TheoTime.Zero,a.endTime=d,a.keyFrames=s.concat())},apply:function(e,t,n){var o,r,s=(o=i.as(n.lineDur,"Double"))||null!=o?o:1,c=(r=i.as(n.endPadDur,"Double"))||null!=r?r:0,d=i.clone(l.MotionUtils.findTextLines(e)),p=d.length,f=i.toDouble(p)*s+c;if(t.length<8)a.CoreAssert.warning("Less than required key-frames for Motion-Logic-Stacked");else{var h=t;if(p>0){var m=0,g=i.clone(d.shift()),C=null;d.length>0&&(C=i.clone(d.pop()));for(var v=h.slice(0,2),y=i.iter(g);!y.done;y.next()){var T=y.value;this.updateFormaAnim(T,m,m+s,f,v)}m+=s;for(var P=i.iter(i.toSequence(d));!P.done;P.next()){var S=P.value,N=S.offset,E=S.element;if(0==N%2)for(var A=h.slice(2,4),_=i.iter(E);!_.done;_.next())T=_.value,this.updateFormaAnim(T,m,m+s,f,A);else for(var O=h.slice(4,6),F=i.iter(E);!F.done;F.next())T=F.value,this.updateFormaAnim(T,m,m+s,f,O);m+=s}if(null!=C)for(var D=h.slice(6,8),M=i.iter(C);!M.done;M.next())T=M.value,this.updateFormaAnim(T,m,m+s,f,D);m+=s}}i.opt(e.animation,(function(e){return e.endTime=u.TheoTime.fromSeconds(f)}))}}}),o)},"9eTw":function(e,t,n){var o=t,r=n("oAGj");o.DocumentUnitsEnum=r.defineEnum("DocumentUnitsEnum",{PIXEL:"pixel",POINT:"point",INCH:"inch",MM:"mm",CM:"cm"}),o.IExportDataObject=r.defineProtocol("IExportDataObject",{setPath:"(String) -> Void",setName:"(String) -> Void",setType:"(String) -> Void",setProperty:"(String, AnyObject) -> Void",setOptionalStringProperty:"(String, String) -> Void",setStringProperty:"(String, String) -> Void",setNumberProperty:"(String, Double) -> Void",setIntProperty:"(String, Integer) -> Void",setBooleanProperty:"(String, Boolean) -> Void",setOptionalBooleanProperty:"(String, Boolean) -> Void",findChild:"(String) -> IExportDataObject",appendChild:"(String) -> IExportDataObject",appendComponent:"(String, String, String) -> Void",setCompositeID:"(String) -> Void",setManifestProperty:"(String, AnyObject, Boolean) -> Void",setDocumentSize:"(TheoSize, String) -> Void"})},BAdM:function(e,t,n){var o,r=t,i=n("oAGj"),a=n("ytEx"),s=n("SpAV"),c=n("gXiO");r.JSONComponentDecoder=(o=function(){},i.defineClass({name:"JSONComponentDecoder",ctor:o,superName:"CoreObject",statics:{_implements:function(e){return"IImportDataComponent"==e}},props:{init_466d:function(e){this.json_=i.clone(e),c.CoreObject.call(this)},init_f390:function(e,t,n,o,r,c){var l={};null!=e&&(l[a.PROPERTY_KEY_ID]=e),null!=t&&(l[a.PROPERTY_KEY_NAME]=t),null!=n&&(l[a.PROPERTY_KEY_PATH]=n),null!=o&&(l[a.PROPERTY_KEY_MIMETYPE]=o),null!=r&&(l[a.PROPERTY_KEY_ETAG]=r),null!=c&&(l[a.PROPERTY_KEY_URL]=c),this.init_466d(i.clone(l)),s.CoreAssert.info("init "+i.toString(e)+" "+i.toString(t)+" "+i.toString(o)+" "+i.toString(n)+" "+i.toString(c))},id:{get:function(){return i.as(this.json_[a.PROPERTY_KEY_ID],"String")}},name:{get:function(){return i.as(this.json_[a.PROPERTY_KEY_NAME],"String")}},path:{get:function(){return i.as(this.json_[a.PROPERTY_KEY_PATH],"String")}},mimeType:{get:function(){return i.as(this.json_[a.PROPERTY_KEY_MIMETYPE],"String")}},etag:{get:function(){return i.as(this.json_[a.PROPERTY_KEY_ETAG],"String")}},url:{get:function(){return i.as(this.json_[a.PROPERTY_KEY_URL],"String")}}}}),o)},BQMb:function(e,t,n){var o=t,r=n("oAGj");o.MotionEntry=r.defineProtocol("MotionEntry",{srcId:"String",logic:"MotionLogic",args:"Dictionary<String>"})},C4JV:function(e,t,n){var o,r=t,i=n("oAGj"),a=n("ytEx"),s=n("SpAV"),c=n("3OP7"),l=n("iCxV"),u=n("CqFS"),d=n("9YN4");r.PROPERTY_VALUE_CANVASES="canvases",r.PROPERTY_VALUE_CANVAS="canvas",r.PROPERTY_VALUE_CANVAS1_NAME="page-1",r.PROPERTY_VALUE_ARTBOARD="artboard",r.PROPERTY_VALUE_ARTBOARD1_NAME="artboard-1",i.gvar(r,"CANVASES_PATH",(function(){return"/"+r.PROPERTY_VALUE_CANVASES})),i.gvar(r,"CANVAS1_PATH",(function(){return r.CANVASES_PATH+"/"+r.PROPERTY_VALUE_CANVAS1_NAME})),i.gvar(r,"ARTBOARD1_PATH",(function(){return r.CANVAS1_PATH+"/"+r.PROPERTY_VALUE_ARTBOARD1_NAME})),i.gvar(r,"JSON_CONTENT_PATH_DCX2D",(function(){return r.ARTBOARD1_PATH+"/"+d.TheoDocument.COMPONENT_PATH_CONTENT})),r.PROPERTY_KEY_UNITS="units",r.PROPERTY_KEY_WIDTH="width",r.PROPERTY_KEY_HEIGHT="height",r.PROPERTY_KEY_X="x",r.PROPERTY_KEY_Y="y",r.JSONDocumentEncoder=(o=function(e){this.previouslyUsedJSONDocumentEncoding=c.DocumentPersistenceFactory.usesJsonDocumentEncoding(e),u.JSONNodeEncoder.call(this,e,{},null);var t=[d.TheoDocument.COMPONENT_RELATIONSHIP_DOM,d.TheoDocument.COMPONENT_RELATIONSHIP_METADATA,d.TheoDocument.COMPONENT_RELATIONSHIP_RENDITION,r.PROPERTY_VALUE_CANVASES];this.prepareCompositeForSave(i.clone(t))},i.defineClass({name:"JSONDocumentEncoder",ctor:o,superName:"JSONNodeEncoder",statics:{_implements:function(e){return"IExportDataObject"==e}},props:{getOrCreateArtboardNode:function(){var e=this.branch_.getNodeWithAbsolutePath(r.ARTBOARD1_PATH);if(null==e){var t=this.branch_.appendNode(null,r.PROPERTY_VALUE_CANVASES,null);i.opt(t,(function(e){return e.setValue(a.PROPERTY_KEY_RELATIONSHIP,i.as(r.PROPERTY_VALUE_CANVASES,"AnyObject"))}));var n=this.branch_.appendNode(null,r.PROPERTY_VALUE_CANVAS1_NAME,t);i.opt(n,(function(e){return e.setValue(a.PROPERTY_KEY_RELATIONSHIP,i.as(r.PROPERTY_VALUE_CANVAS,"AnyObject"))})),e=this.branch_.appendNode(null,r.PROPERTY_VALUE_ARTBOARD1_NAME,n),i.opt(e,(function(e){return e.setValue(a.PROPERTY_KEY_RELATIONSHIP,i.as(r.PROPERTY_VALUE_ARTBOARD,"AnyObject"))})),i.opt(e,(function(e){return e.setValue(a.PROPERTY_KEY_NAME,i.as(r.PROPERTY_VALUE_ARTBOARD1_NAME,"AnyObject"))}))}return e},getPropertyOnNode:function(e){return e==a.PROPERTY_KEY_ID?i.as(this.branch_.getValue(a.PROPERTY_KEY_ID),"AnyObject"):u.JSONNodeEncoder.prototype.getPropertyOnNode.call(this,e)},setPropertyOnNode:function(e,t){if(u.JSONNodeEncoder.prototype.setPropertyOnNode.call(this,e,t),!this.previouslyUsedJSONDocumentEncoding)switch(e){case"name":case"type":case"children":break;default:this.branch_.root.removeValue(e)}},setDocumentSize:function(e,t){var n,o=this.getOrCreateArtboardNode();o.setValue(r.PROPERTY_KEY_X,i.as(0,"AnyObject")),o.setValue(r.PROPERTY_KEY_Y,i.as(0,"AnyObject")),o.setValue(r.PROPERTY_KEY_WIDTH,i.as(e.width,"AnyObject")),o.setValue(r.PROPERTY_KEY_HEIGHT,i.as(e.height,"AnyObject")),(n=this.branch_.getNodeWithAbsolutePath(r.CANVAS1_PATH))?n.setValue(r.PROPERTY_KEY_UNITS,i.as(t,"AnyObject")):s.CoreAssert.fail("expected to find a canvas node","JSONDocumentEncoder.setDocumentSize","JSONDocumentEncoder.swift",112)},finish:function(){var e,t=this;u.JSONNodeEncoder.prototype.finish.call(this),this.discardStashedComponents(),this.jsonFile=(e=this.jsonFile)||null!=e?e:i.opt(l.Host.persistUtils,(function(e){return e.writeJsonContentToTempFile(i.as(t.jsonNode_,"AnyObject"))}));var n=this.branch_.getComponentWithAbsolutePath(r.JSON_CONTENT_PATH_DCX2D);if(null!=n)this.branch_.updateComponent(n,this.jsonFile,!1);else{var o=this.getOrCreateArtboardNode();this.branch_.addComponent(d.TheoDocument.COMPONENT_NAME_DOM,null,d.TheoDocument.COMPONENT_MIME_TYPE_DOCUMENT_JSON,d.TheoDocument.COMPONENT_RELATIONSHIP_DOM,d.TheoDocument.COMPONENT_PATH_CONTENT,o,this.jsonFile,!1,null)}}}}),o)},C654:function(e,t,n){var o,r=t,i=n("oAGj"),a=n("FNB+"),s=n("3/rh"),c=n("Pn67"),l=n("nQ+V"),u=n("pmb0"),d=n("nUE5"),p=n("K17h"),f=n("RkYL"),h=n("zjod"),m=n("mxdD");r.ANIMATE_ICON=!1,r.MotionLogicStackedRoot=(o=function(){},i.defineClass({name:"MotionLogicStackedRoot",ctor:o,statics:{_implements:function(e){return"MotionLogic"==e}},props:{apply:function(e,t,n){var o,g,C,v,y=(o=i.as(n.lineDur,"Double"))||null!=o?o:1,T=(g=i.as(n.delay,"Double"))||null!=g?g:0,P=(C=i.as(n.fadeInDur,"Double"))||null!=C?C:1,S=(v=i.as(n.endPadDur,"Double"))||null!=v?v:0,N=0,E=[],A=[],_=[],O=new c.MotionEntryNone,F=new s.MotionEntryFadeIn,D=new l.MotionEntryStacked;e.visitAll(a.FormaTraversal.PreOrder,(function(e){var t;if(u.MotionFacade.applyEntryToForma(e,O),e.isTypeLockup())E.push(e);else if(t=i.as(e,h.VideoForma)){var n;t.isSticker()?(A.push(t),(n=p.MotionUtils.getGifDur(t)-P)>S&&(S=n)):(n=m.VideoFacade.getDurationInSecondsForVideo(t))>N&&(N=n)}else r.ANIMATE_ICON&&e.hasIntent(a.Forma.INTENT_ICON)&&_.push(e)}));var M=0,x=E.length>1||_.length>0;if(0==A.length&&(S=2),E.length>0){for(var b=i.clone(p.MotionUtils.getTitleLockups(i.clone(E))),R=i.clone(b.shift()),I=i.clone(b.shift()),L=M,k=i.iter(R);!k.done;k.next()){var w,V=k.value,Y=d.MotionSource.getSourceAnimation(D.srcId,V);D.logic.apply(V,Y,{lineDur:y,endPadDur:x?T:0}),null!=(w=i.opt(V.animation,(function(e){return e.endTime.seconds})))&&w>L&&(L=w)}M=L;for(var j=i.iter(I);!j.done;j.next()){var K=j.value;Y=d.MotionSource.getSourceAnimation(F.srcId,K),F.logic.apply(K,Y,{st:M,dur:P})}}if(r.ANIMATE_ICON)for(var U=i.iter(_);!U.done;U.next()){var B=U.value;Y=d.MotionSource.getSourceAnimation(F.srcId,e),F.logic.apply(B,Y,{st:M,dur:P})}x&&(M+=P);var H=M+S;if(N>0&&(H=Math.ceil(H/N)*N,0==!A.length&&(H-=P)),A.length>0){H+=P;for(var G=i.iter(A);!G.done;G.next()){var X=G.value;Y=d.MotionSource.getSourceAnimation(F.srcId,X),F.logic.apply(X,Y,{st:M,dur:P}),i.opt(X.animation,(function(e){return e.endTime=f.TheoTime.fromSeconds(H)}))}}i.opt(e.animation,(function(e){return e.animationStyle.endTime=f.TheoTime.fromSeconds(H)}))}}}),o)},CqFS:function(e,t,n){var o,r,i=t,a=n("oAGj"),s=n("ytEx"),c=n("SpAV"),l=n("x0BK"),u=n("3OP7"),d=n("FNB+");i.PREFIX_COMPONENT="component:",i.PROPERTY_KEY_CHILDREN="children",i.PROPERTY_KEY_EXTERNAL_URL="external-url",i.JSONNodeEncoder=(o=function(e,t,n){this.manifestEncoder_=null,this.jsonNode_=t,this.parentEncoder_=n,s.BaseNodeEncoder.call(this,e,e.root)},r={},a.defineClass({name:"JSONNodeEncoder",ctor:o,superName:"BaseNodeEncoder",statics:{PROPERTY_KIND_NAMESPACED:{get:function(){return void 0===r.PROPERTY_KIND_NAMESPACED&&(r.PROPERTY_KIND_NAMESPACED=u.DocumentPersistenceFactory.namespacedPropertyName(d.Forma.PROPERTY_KIND)),r.PROPERTY_KIND_NAMESPACED}},_implements:function(e){return"IExportDataObject"==e}},props:{getPropertyOnNode:function(e){return this.jsonNode_[e]},setPropertyOnNode:function(e,t){var n,r;null!=t?(this.jsonNode_[e]=t,(n=this.manifestEncoder_)&&null!=(r=a.as(t,"String"))&&(e==s.PROPERTY_KEY_PATH?n.setPath(r):e==s.PROPERTY_KEY_TYPE?n.setType(r):e==o.PROPERTY_KIND_NAMESPACED&&n.setStringProperty(d.Forma.PROPERTY_KIND,r))):a.removeKey(this.jsonNode_,e)},createChildEncoder:function(e){var t={};t[s.PROPERTY_KEY_ID]=a.as(e,"AnyObject");var n=a.as(this.getPropertyOnNode(i.PROPERTY_KEY_CHILDREN),["Array","AnyObject"]);null==n&&(n=[]),n.push(t),this.setPropertyOnNode(i.PROPERTY_KEY_CHILDREN,n),c.CoreAssert.isTrue(this.getPropertyOnNode(i.PROPERTY_KEY_CHILDREN)===n,void 0,"JSONNodeEncoder.createChildEncoder","JSONNodeEncoder.swift",64);var r=new o(this.branch_,t,this);return c.CoreAssert.isTrue(a.as(r.jsonNode_,"AnyObject")===a.as(t,"AnyObject"),void 0,"JSONNodeEncoder.createChildEncoder","JSONNodeEncoder.swift",67),r},findChild:function(e){return null==e?null:(t=this.getManifestEncoder().findChild(e))?t:s.BaseNodeEncoder.prototype.findChild.call(this,e);var t},appendComponent:function(e,t,n){s.BaseNodeEncoder.prototype.appendComponent.call(this,e,t,n);var o=this.branch_.getValue(s.PROPERTY_KEY_ID),r=i.PREFIX_COMPONENT+o+"/"+e+"/"+a.replaceAll(n,"/","+");this.setProperty(i.PROPERTY_KEY_EXTERNAL_URL,a.as(r,"AnyObject"))},getManifestEncoder:function(){var e,t,n;return null==this.manifestEncoder_&&(null==this.parentEncoder_?this.manifestEncoder_=new l.DCXNodeEncoder(this.branch_,this.branch_.root):this.manifestEncoder_=this.parentEncoder_.getManifestEncoder().createChildEncoder(this.id),null!=(e=a.as(this.getPropertyOnNode(s.PROPERTY_KEY_PATH),"String"))&&a.opt(this.manifestEncoder_,(function(t){return t.setPath(e)})),null!=(t=a.as(this.getPropertyOnNode(s.PROPERTY_KEY_TYPE),"String"))&&a.opt(this.manifestEncoder_,(function(e){return e.setType(t)})),null!=(n=this.getPropertyOnNode(o.PROPERTY_KIND_NAMESPACED))&&a.opt(this.manifestEncoder_,(function(e){return e.setProperty(d.Forma.PROPERTY_KIND,n)}))),this.manifestEncoder_},finish:function(){s.BaseNodeEncoder.prototype.finish.call(this),this.parentEncoder_=null,this.manifestEncoder_=null}}}),o)},K17h:function(e,t,n){var o,r,i=t,a=n("oAGj"),s=n("gXiO"),c=n("FNB+"),l=n("cmoc"),u=n("ZK0l"),d=n("iCxV"),p=n("c+uM"),f=n("7Ta2"),h=n("enh0"),m=n("Vm85"),g=n("8t9B"),C=n("sIWg"),v=n("RkYL"),y=n("zjod");i.TextLine=(o=function(){this.words=[],this.shadows=[],this.bounds=C.TheoRect.Zero,this.isKnockout=!1},a.defineClass({name:"TextLine",ctor:o}),o),i.MotionUtils=(r=function(){s.CoreObject.call(this)},a.defineClass({name:"MotionUtils",ctor:r,superName:"CoreObject",statics:{SAME_LINE_THRESHOLD:20,sortTextLines:function(e){var t=a.clone(e);return a.sortInPlace(t,(function(e,t){return e.bounds.minY<t.bounds.minY})),t},findTextLines2:function(e){var t=m.TextFacade.getTextLook(e),n=[];if(p.LockupStyle.isKnockoutLook(t)&&!d.Host.textModelUtils.usePGMRenderer()){var o=e.boundsInCoordSpace(e.totalPlacement),s=new i.TextLine;s.words.push(e),s.isKnockout=!0,s.bounds=o||C.TheoRect.Zero,n.push(s)}else{var l={};e.visitAll(c.FormaTraversal.PreOrder,(function(e){var t;if(t=a.as(e,h.TextForma)){for(var n=!1,o=Math.floor(t.baselineBoundsInCoordSpace(t.placement).maxY),s=a.iter(l,!0);!s.done;s.next()){var c=s.key;if(Math.abs(c-o)<r.SAME_LINE_THRESHOLD){n=!0,o=c;break}}var u=t.boundsInCoordSpace(t.totalPlacement);if(n)l[o].bounds=l[o].bounds.unionWith(u),l[o].words.push(t);else{var d=new i.TextLine;d.words.push(t),d.bounds=u||C.TheoRect.Zero,l[o]=d}}}));for(var u=a.sort(a.keys(l,"numeric")),f=a.iter(u);!f.done;f.next()){var g=f.value;n.push(l[g])}}return n},findTextLines:function(e){var t=m.TextFacade.getTextLook(e),n=[];if(p.LockupStyle.isKnockoutLook(t)&&t!=p.LockupTextLook.KnockoutOnly&&!d.Host.textModelUtils.usePGMRenderer()){var o=[];o.push(e),n.push(a.clone(o))}else{var r={};e.visitAll(c.FormaTraversal.PreOrder,(function(e){var t;(t=a.as(e,h.TextForma))&&(null==r[t.rowIndex]?r[t.rowIndex]=[a.as(e,c.Forma)]:r[t.rowIndex].push(e))}));for(var i=a.sort(a.keys(r,"numeric")),s=a.iter(i);!s.done;s.next()){var l=s.value;n.push(a.clone(r[l]))}}return n},getTitleLockups:function(e){if(0==e.length)return[];for(var t=a.clone(e),n={},o=a.iter(t);!o.done;o.next()){var r=o.value,i=(new f.RoleSuggester).getRole(r).role;n[r.formaID]=i}a.sortInPlace(t,(function(e,t){return e.controller.currentHeightScale>t.controller.currentHeightScale}));var s,c=t.shift(),l=[c],u=[];if(s=a.as(c.controller,g.TypeLockupController))for(var d=a.iter(t);!d.done;d.next()){var p;if(r=d.value,p=a.as(r.controller,g.TypeLockupController)){var h=p.getCurrentFontSize(),m=s.getCurrentFontSize();Math.abs(h-m)/Math.min(h,m)<.05?l.push(r):u.push(r)}}return[l,u]},getGifDur:function(e){var t,n,o=0;return e.isSticker()&&(n=a.as(e,y.VideoForma))&&(o=(t=a.opt(n.videoContentNode,(function(e){return e.duration.seconds})))||null!=t?t:0),o},determineLoopDur:function(e,t){var n=r.getGifDur(e);if(n>0){var o=t/n;n*=Math.ceil(o)}return n},createOpacityStyle:function(e,t){var n;if(!(e instanceof y.VideoForma||e instanceof l.FrameForma)&&(n=e.controller)){var o=a.as(n,u.GroupController);a.opt(o,(function(e){return e.beginBlockedUpdate()}));var r=e.style.clone();n.applyOpacity(t);var i,s=e.style.clone();return(i=a.as(s,p.LockupStyle))&&(i.textOpacity=t,i.backingOpacity=t),e.applyStyle(r),a.opt(o,(function(e){return e.endBlockedUpdate()})),s}var c=e.style.clone();return c.opacity=t,c},getCurrentAnimationStyle:function(e){return a.opt(a.opt(e,(function(e){return e.firstPage.root.animation})),(function(e){return e.animationStyle}))},invalidateAnimation:function(e){a.opt(e.firstPage.root.animation,(function(e){return e.invalidate()}))},isCurrentAnimationValid:function(e){var t;return!!(t=a.opt(e,(function(e){return e.firstPage.root.animation})))&&t.valid&&!t.animationStyle.modifiesFormaTree},determineTotalDuration:function(e){return a.opt(e.root.animation,(function(e){return e.animationStyle.endTime}))||v.TheoTime.Zero}}}),r)},K9Oa:function(e,t,n){var o,r=t,i=n("oAGj"),a=n("gXiO"),s=n("ylxa"),c=n("iCxV"),l=n("3DEm"),u=n("sIWg");r.PageFacade=(o=function(){a.CoreObject.call(this)},i.defineClass({name:"PageFacade",ctor:o,superName:"CoreObject",statics:{kMinPageDimension:50,kMaxPageDimension:6e3,getMinPageDimensionForUnits:function(e,t){var n=o.getNumDecimalPlacesForUnits(e),r=o.unitsToPixelsFactor(e,t),a=o.kMinPageDimension/r;if(0!=n){var s=1/Math.pow(10,i.toDouble(n)),c=.5/Math.pow(10,i.toDouble(n));a=l.MathUtils.nearestMultiple(a+c,s)}return a},getMaxPageDimensionForUnits:function(e,t){var n=o.getNumDecimalPlacesForUnits(e),r=o.unitsToPixelsFactor(e,t),a=o.kMaxPageDimension/r;if(0!=n){var s=1/Math.pow(10,i.toDouble(n)),c=.5/Math.pow(10,i.toDouble(n));a=l.MathUtils.nearestMultiple(a-c,s)}return a},pageDimensionIsInRange:function(e,t,n){return!o.pageDimensionIsTooSmall(e,t,n)&&!o.pageDimensionIsTooLarge(e,t,n)},pageDimensionIsTooSmall:function(e,t,n){var r=o.convertStringToPixelsValue(e,t,n),i=o.getMinPageDimensionForUnits(t,n);return r<o.unitsToPixelsFactor(t,n)*i},pageDimensionIsTooLarge:function(e,t,n){var r=o.convertStringToPixelsValue(e,t,n),i=o.getMaxPageDimensionForUnits(t,n);return r>o.unitsToPixelsFactor(t,n)*i},setPageDesignSize:function(e,t){e.setPageSizeFromDesignSize(t)},getNumDecimalPlacesForUnits:function(e){var t=0;return e==s.PageExportFormat.INCHES?t=2:e==s.PageExportFormat.MILLIMETERS&&(t=1),t},unitsToPixelsFactor:function(e,t){return e==s.PageExportFormat.MILLIMETERS?s.FormaPageExportData.MM_TO_INCHES*t:e==s.PageExportFormat.INCHES?t:1},convertStringToPixelsValue:function(e,t,n){var r;return((r=i.opt(c.Host.locale,(function(t){return t.convertStringToNumber(e)})))||null!=r?r:i.toDouble(e))*o.unitsToPixelsFactor(t,n)},convertPixelsToUnitsString:function(e,t,n){var r,a=e/o.unitsToPixelsFactor(t,n),s=o.getNumDecimalPlacesForUnits(t);if(null!=c.Host.locale)return r=c.Host.locale.formatNumber(a,s);if((r=i.toString("%."+s+"f",a)).includes("."))for(;r.endsWith("0");)r=r.substr(0,r.length-1);return r.endsWith(".")&&(r=r.substr(0,r.length-1)),r},aspectRatioIsVeryTallOrWide:function(e){var t=u.TheoRect.fromSize(e);return t.aspectRatio>=5||t.aspectRatio<=.2}}}),o)},KkVW:function(e,t,n){var o,r=t,i=n("oAGj"),a=n("4/a+");r.MotionEntryDropIn=(o=function(){this.srcId="MotionSrcDropIn",this.logic=new a.MotionLogicDur,this.args={st:0,dur:1.5}},i.defineClass({name:"MotionEntryDropIn",ctor:o,statics:{_implements:function(e){return"MotionEntry"==e}}}),o)},Pn67:function(e,t,n){var o,r=t,i=n("oAGj"),a=n("YeWL");r.MotionEntryNone=(o=function(){this.srcId="",this.logic=new a.MotionLogicClear,this.args={st:0,dur:1}},i.defineClass({name:"MotionEntryNone",ctor:o,statics:{_implements:function(e){return"MotionEntry"==e}}}),o)},Puiz:function(e,t,n){var o,r=t,i=n("oAGj"),a=n("RO7T"),s=n("SpAV"),c=n("lWlM"),l=n("iCxV"),u=n("BAdM"),d=n("CqFS");r.PREFIX_CP="cp:",r.PREFIX_AC="ac:",r.JSONNodeDecoder=(o=function(e,t){this.node_=t,a.BaseNodeDecoder.call(this,e)},i.defineClass({name:"JSONNodeDecoder",ctor:o,superName:"BaseNodeDecoder",statics:{_implements:function(e){return"IImportDataObject"==e}},props:{getPropertyOnNode:function(e){return i.as(this.node_[e],"AnyObject")},forEachChild:function(e){var t,n=0;if(t=i.as(this.node_[d.PROPERTY_KEY_CHILDREN],["Array","Any"]))for(var r=i.iter(t);!r.done;r.next()){var a,s=r.value;(a=i.as(s,["Dictionary","String","Any"]))&&(e(new o(this.branch_,a),n),n+=1)}},forEachComponent:function(e){var t,n=0;if(null!=(t=i.as(this.property(d.PROPERTY_KEY_EXTERNAL_URL),"String"))){var o,a,p,f=null;if(t.startsWith(r.PREFIX_CP))null!=(o=i.opt(l.Host.brandkitManager,(function(e){return e.getFilePathForEncodedURL(t)})))?null!=(a=i.opt(l.Host.persistUtils,(function(e){return e.mimeTypeForFileAtPath(o)})))&&null!=(p=i.opt(l.Host.persistUtils,(function(e){return e.fileUrlForPath(o)})))?f=u.JSONComponentDecoder.init_f390(i.opt(l.Host.resourceUtils,(function(e){return e.makeGUID()})),null,this.id,a,null,p):s.CoreAssert.warning("Could not open downloaded file at "+o+"!"):s.CoreAssert.warning("Do not have a CP file for "+t+"!");else if(t.startsWith(r.PREFIX_AC)){var h=t.substr(r.PREFIX_AC.length).split("/")[1];(m=this.branch_.getComponentWithId(h))?f=new c.DCXComponentDecoder(this.branch_,m):s.CoreAssert.warning("No component with id "+h+"!")}else if(t.startsWith(d.PREFIX_COMPONENT)){var m;h=t.substr(d.PREFIX_COMPONENT.length).split("/")[1],(m=this.branch_.getComponentWithId(h))?f=new c.DCXComponentDecoder(this.branch_,m):s.CoreAssert.warning("No component with id "+h+"!")}else s.CoreAssert.warning("Unrecognized external URL format: "+t+"!");null!=f?(e(f,n),n+=1):s.CoreAssert.warning("No component found for "+t)}}}}),o)},RO7T:function(e,t,n){var o,r=t,i=n("oAGj"),a=n("ytEx"),s=n("SpAV"),c=n("gXiO"),l=n("3OP7");r.BaseNodeDecoder=(o=function(e){this.branch_=e,c.CoreObject.call(this)},i.defineClass({name:"BaseNodeDecoder",ctor:o,superName:"CoreObject",statics:{_implements:function(e){return"IImportDataObject"==e}},props:{id:{get:function(){return i.as(this.getPropertyOnNode(a.PROPERTY_KEY_ID),"String")}},name:{get:function(){return i.as(this.getPropertyOnNode(a.PROPERTY_KEY_NAME),"String")}},type:{get:function(){return i.as(this.getPropertyOnNode(a.PROPERTY_KEY_TYPE),"String")}},path:{get:function(){return i.as(this.getPropertyOnNode(a.PROPERTY_KEY_PATH),"String")}},getPropertyOnNode:function(e){return s.CoreAssert.fail("must be overridden","BaseNodeDecoder.getPropertyOnNode","BaseNodeDecoder.swift",35),null},optionalStringProperty:function(e){return i.as(this.property(e),"String")},stringProperty:function(e,t){var n;return(n=i.as(this.property(e),"String"))||null!=n?n:t},numberProperty:function(e,t){var n;return(n=i.as(this.property(e),"Double"))||null!=n?n:t},intProperty:function(e,t){var n;return(n=i.as(this.property(e),"Int"))||null!=n?n:t},booleanProperty:function(e,t){var n;return(n=i.as(this.property(e),"Bool"))||null!=n?n:t},optionalBooleanProperty:function(e){return i.as(this.property(e),"Bool")},property:function(e){var t=l.DocumentPersistenceFactory.namespacedPropertyName(e);return i.as(this.getPropertyOnNode(t),"AnyObject")},forEachChild:function(e){s.CoreAssert.fail("must be overridden","BaseNodeDecoder.forEachChild","BaseNodeDecoder.swift",69)},forEachComponent:function(e){s.CoreAssert.fail("must be overridden","BaseNodeDecoder.forEachComponent","BaseNodeDecoder.swift",73)}}}),o)},SAU6:function(e,t,n){var o,r=t,i=n("oAGj"),a=n("C654");r.MotionEntryStackedRoot=(o=function(){this.srcId="",this.logic=new a.MotionLogicStackedRoot,this.args={lineDur:.3,delay:.5,fadeInDur:.5,endPadDur:3.5}},i.defineClass({name:"MotionEntryStackedRoot",ctor:o,statics:{_implements:function(e){return"MotionEntry"==e}}}),o)},Vm85:function(e,t,n){var o,r=t,i=n("oAGj"),a=n("SpAV"),s=n("CWW7"),c=n("gXiO"),l=n("jo4Y"),u=n("fWxZ"),d=n("ylxa"),p=n("c+uM"),f=n("EoOi"),h=n("8t9B"),m=n("3UhB"),g=n("oKI3"),C=n("uUew");r.SpacingSequence=i.defineEnum("SpacingSequence",{NextLineSpacing:0,NextShapePadding:1,NextShadowAngle:2,NextLetterTracking:3,NextLineSpacingAndPadding:4}),r.describeSpacingSequence=function(e){switch(e){case 0:return"NextLineSpacing";case 1:return"NextShapePadding";case 2:return"NextShadowAngle";case 3:return"NextLetterTracking";case 4:return"NextLineSpacingAndPadding"}},r.TextFacade=(o=function(){c.CoreObject.call(this)},i.defineClass({name:"TextFacade",ctor:o,superName:"CoreObject",statics:{setText:function(e,t){var n;if(n=i.as(t.controller,h.TypeLockupController)){var o=n.getCurrentFontSize(),r=e;r=m.TypeLockupUtils.fixUpQuotes(r,e),i.opt(n.contentNode,(function(e){return e.removeText()})),i.opt(n.contentNode,(function(e){return e.insert(r,0)})),n.snapSizeToBounds(),n.snapToClosestExistingSize(o),n.updateGroup()}},setFont:function(e,t,n){void 0===n&&(n=!1);for(var o=i.iter(t);!o.done;o.next()){var r,a=o.value;(r=i.as(a.controller,h.TypeLockupController))&&(m.TypeLockupUtils.applyFontToController(e,r),n&&r.selectCharStyleForma(),i.opt(r.lockupStyle,(function(e){return e.layout==p.LockupLayout.Auto}))&&r.snapSizeToBounds())}},getFontForForma:function(e){var t;return(t=i.as(e.controller,h.TypeLockupController))?t.styleController.targetedFont:null},getSecondaryFontForForma:function(e){var t;return(t=i.as(e.controller,h.TypeLockupController))?i.opt(t.lockupStyle,(function(e){return e.font})):null},getLayoutForForma:function(e){var t;return(t=i.as(e.controller,h.TypeLockupController))?t.styleController.targetedLockupStyle.layout:p.LockupLayout.UNSET},getAlignmentForForma:function(e){var t;return(t=i.as(e.controller,h.TypeLockupController))?t.styleController.targetedLockupStyle.alignment:p.LockupAlignment.UNSET},getVerticalAlignmentForForma:function(e){var t;return(t=i.as(e.controller,h.TypeLockupController))?t.styleController.targetedLockupStyle.verticalAlignment:p.VerticalLockupAlignment.UNSET},getTextPathIDForForma:function(e){var t;return(t=i.as(e.controller,h.TypeLockupController))?t.styleController.targetedLockupStyle.pathID:g.TextPathID.UNSET},setLayoutAndAlignment:function(e,t,n,o,r,a,s){void 0===o&&(o=!1),void 0===r&&(r=g.TextPathID.UNSET),void 0===a&&(a=null),void 0===s&&(s=p.VerticalLockupAlignment.UNSET);for(var c=i.iter(n);!c.done;c.next()){var l,u=c.value;if(l=i.as(u.controller,h.TypeLockupController)){var d=l.styleController.targetedLockupStyle.clone();l.beginBlockedUpdate(),e==p.LockupLayout.Auto&&t==p.LockupAlignment.UNSET&&(l.styleController.targetedLockupStyle.layoutVariation=f.TypographyVariation.Unset),e!=p.LockupLayout.SKIP&&(l.styleController.targetedLockupStyle.layout=e),t!=p.LockupAlignment.SKIP&&(l.styleController.targetedLockupStyle.alignment=t),null!=s&&s!=p.VerticalLockupAlignment.UNSET&&(l.styleController.targetedLockupStyle.verticalAlignment=s),l.styleController.targetedLockupStyle.pathID=r,l.styleController.targetedLockupStyle.customPath=a,l.styleController.onLayoutChanged(d),l.endBlockedUpdate(),o||l.styleChanged(),o&&(l.styleController.targetedLockupStyle.spacing=i.toDouble(p.LockupLayout.UNSET),l.styleChanged(),l.selectCharStyleForma()),e==p.LockupLayout.Auto&&l.snapSizeToBounds()}}},getLineSpacingForForma:function(e){var t;return(t=i.as(e.controller,h.TypeLockupController))?t.styleController.targetedLockupStyle.spacing:0},setLineSpacing:function(e,t,n){void 0===n&&(n=!1);for(var o=i.iter(t);!o.done;o.next()){var r,a=o.value;(r=i.as(a.controller,h.TypeLockupController))&&(r.styleController.targetedLockupStyle.spacing=e,n&&r.styleChanged(),r.styleController.onSpacingChanged())}},setLeading:function(e,t,n){for(var o=i.iter(n);!o.done;o.next()){var r,a=o.value;(r=i.as(a.controller,h.TypeLockupController))&&(r.setLineSpacingAndBounds(e,t),r.styleController.onSpacingChanged())}},getTrackingForForma:function(e){var t;return(t=i.as(e.controller,h.TypeLockupController))?t.styleController.targetedLockupStyle.tracking:0},setTracking:function(e,t,n){for(var o=i.iter(n);!o.done;o.next()){var r,a=o.value;(r=i.as(a.controller,h.TypeLockupController))&&(r.setLetterSpacingAndBounds(e,t),r.styleController.onTrackingChanged())}},getPaddingForForma:function(e){var t;return(t=i.as(e.controller,h.TypeLockupController))?t.styleController.targetedLockupStyle.padding:0},setPadding:function(e,t){for(var n=i.iter(t);!n.done;n.next()){var o,r=n.value;(o=i.as(r.controller,h.TypeLockupController))&&o.styleController.setPaddingFromSlider(e)}},matchNextSize:function(e,t,n){for(var o=0,r=i.iter(n);!r.done;r.next()){var a,s=r.value;(a=i.as(s.controller,h.TypeLockupController))&&(o=a.matchNextSize(i.clone(e),t))}return o},matchNearestSize:function(e,t,n,o){for(var r=0,a=i.iter(o);!a.done;a.next()){var s,c=a.value;(s=i.as(c.controller,h.TypeLockupController))&&(r=s.setSizeSliderValue(e,i.clone(t),n))}return r},getLineBreakForForma:function(e){var t;return!!(t=i.as(e.controller,h.TypeLockupController))&&t.styleController.targetedLockupStyle.lineBreakAtCharacterStyleSizeChange},setLineBreak:function(e,t,n){void 0===n&&(n=!1);for(var o=i.iter(t);!o.done;o.next()){var r,a=o.value;(r=i.as(a.controller,h.TypeLockupController))&&(r.styleController.targetedLockupStyle.lineBreakAtCharacterStyleSizeChange=e,n&&(r.styleChanged(),r.selectCharStyleForma()))}},setNextSpacingSequence:function(e,t){for(var n=i.iter(t);!n.done;n.next()){var o,r=n.value;if(o=i.as(r.controller,h.TypeLockupController))switch(e){case 0:o.styleController.setNextSpacingOption();break;case 1:o.styleController.setNextPaddingOption();break;case 2:o.styleController.setNextShadowAngle();break;case 3:o.styleController.setNextTrackingOption();break;case 4:o.styleController.setNextSpacingAndPaddingOption();break;default:a.CoreAssert.isTrue(!1,void 0,"TextFacade.setNextSpacingSequence","TextFacade.swift",362)}}},getTextLook:function(e){var t;return(t=i.as(e.controller,h.TypeLockupController))?t.styleController.targetedLockupStyle.textLook:p.LockupTextLook.Fill},getOutlineStrokeWeightPercent:function(e){var t;return(t=i.as(e.controller,h.TypeLockupController))?t.styleController.getStrokeWeightPercentForUI():0},getShadowOffsetPercent:function(e){var t;return(t=i.as(e.controller,h.TypeLockupController))?t.styleController.getShadowOffsetPercentForUI():0},setTextLook:function(e,t){for(var n=i.iter(t);!n.done;n.next()){var o,r=n.value;(o=i.as(r.controller,h.TypeLockupController))&&(o.styleController.setTextLook(e),o.styleChanged())}},setTextEffectsAttributes:function(e,t,n,o){for(var r=i.iter(o);!r.done;r.next()){var a,s=r.value;if((a=i.as(s.controller,h.TypeLockupController))&&(isNaN(e)||(a.styleController.targetedStrokeWeight=e),isNaN(t)||(a.styleController.targetedShadowOffset=t,a.styleChanged()),!isNaN(n))){var c=n<0?360+n:n;a.styleController.targetedShadowAngle=c}}},replaceTextForLockup:function(e,t){var n,o;if((n=i.as(e.controller,h.TypeLockupController))&&(a.CoreAssert.isTrue(null!=n.contentNode,void 0,"TextFacade.replaceTextForLockup","TextFacade.swift",442),o=n.contentNode)){var r=t,c=n.text,l=0==r.trim().length;if(r!=c||l)if(l)s.CreationFacade.deleteFormae([e],null);else{var u,d=null;(p.LockupStyle.layoutSupportsAlignments(n.lockupStyle.layout)||1==n.numLines()&&n.lockupStyle.layout!=p.LockupLayout.Path)&&(d=n.getPin(!0,!0)),r=m.TypeLockupUtils.fixUpQuotes(r,c),o.removeText(),o.insert(r,0),(u=d)&&n.matchPreviousPin(u),n.snapSizeToBounds()}}},replaceTextAndPreserveFontSize:function(e,t){var n,o;if((n=i.as(e.controller,h.TypeLockupController))&&(a.CoreAssert.isTrue(null!=n.contentNode,void 0,"TextFacade.replaceTextAndPreserveFontSize","TextFacade.swift",483),o=n.contentNode)){var r=t,s=n.text,c=0==r.trim().length;if(r!=s||c)if(c)i.opt(i.opt(e.page.document,(function(e){return e.controller})),(function(t){return t.doAction(new l.DeleteAction([e]))}));else{r=m.TypeLockupUtils.fixUpQuotes(r,s);var u=n.getCurrentFontSize();n.beginBlockedUpdate(),o.removeText(),o.insert(r,0),n.endBlockedUpdate(),n.updateGroupWithFontSize(u),n.snapSizeToBounds()}}},setHightlightMethod:function(e,t,n){void 0===n&&(n=!1);for(var o=i.iter(t);!o.done;o.next()){var r,a=o.value;if(r=i.as(a.controller,h.TypeLockupController)){if(n&&e!=h.HighlightMethod.Numbers)if(e==h.HighlightMethod.Manual)r.clearCharStyle(),r.selectCharStyleForma();else if(r.highlightMethod==e&&e!=h.HighlightMethod.Manual){var s=e;r.highlightMethod=h.HighlightMethod.toCaseValue(s+1)}else e!=h.HighlightMethod.Manual?r.highlightMethod==h.HighlightMethod.OddRows?r.highlightMethod=h.HighlightMethod.Bracket:r.highlightMethod==h.HighlightMethod.Bracket?r.highlightMethod=h.HighlightMethod.InsideBracket:r.highlightMethod==h.HighlightMethod.InsideBracket?r.highlightMethod=h.HighlightMethod.EvenRows:r.highlightMethod=e:r.highlightMethod=e;if(e==h.HighlightMethod.Manual&&n)return;if(n){var c=e==h.HighlightMethod.Numbers,l=e!=h.HighlightMethod.Numbers;r.autoApplyCharStyle(!0,c,l)}else r.applyPredefinedCharStyle(e);n&&r.selectCharStyleForma()}}},setCharStyleMode:function(e,t){var n;(n=i.as(e.controller,h.TypeLockupController))&&(t?(i.opt(i.opt(e.page.document,(function(e){return e.controller})),(function(e){return e.selection.inCharStyleMode=!0})),0==n.charStyleRanges.length&&n.styleController.pickVisibleColorsForCharStyle(),n.selectCharStyleForma(),n.autoApplyCharStyle(!1,!1,!1),n.selectCharStyleForma()):i.opt(i.opt(e.page.document,(function(e){return e.controller})),(function(e){return e.selection.inCharStyleMode=!1})))},applyCharStyle:function(e,t,n,o,r){var s;return(s=i.as(i.opt(e.lockupForma,(function(e){return e.controller})),h.TypeLockupController))?s.applyCharStyle(e,t,n,o,r):(a.CoreAssert.fail("cannot applyCharStyle, not a text forma","TextFacade.applyCharStyle","TextFacade.swift",603),new C.TextRange(0,0))},updateCharStyleRange:function(e,t,n){var o;(o=i.as(e.controller,h.TypeLockupController))?o.textChanged(t,n):a.CoreAssert.fail("cannot update character style, not a text forma","TextFacade.updateCharStyleRange","TextFacade.swift",618)},applyTextStyleSuggestion:function(e,t,n,o){var r;return(r=i.as(t.controller,h.TypeLockupController))?r.applyTextStyleSuggestion(e,n,o):(a.CoreAssert.fail("cannot apply text style, not a text forma","TextFacade.applyTextStyleSuggestion","TextFacade.swift",633),null)},applyNextTextEmphasisSuggestion:function(e,t){var n,o;return(n=i.as(e.controller,h.TypeLockupController))&&(o=t)?n.applyNextTextEmphasisSuggestion(o):(a.CoreAssert.fail("cannot apply next text emphasis","TextFacade.applyNextTextEmphasisSuggestion","TextFacade.swift",647),null)},standardPPI:72,getStandardPageSize:function(e){var t=e.getPageExportData();return new d.FormaPageExportData(t.dimensions,t.format,o.standardPPI).pixelDimensions},toInternalFontSize:function(e,t){var n=o.getStandardPageSize(t),r=u.FormaPage.DEFAULT_PAGE_SIZE;return Math.max(r.width,r.height)*e/Math.max(n.width,n.height)},toUserFontSize:function(e,t){return e/o.toInternalFontSize(1,t)},setFontSize:function(e,t,n){var r;if(r=i.opt(i.first(t),(function(e){return e.page})))for(var a=o.toInternalFontSize(e,r),s=i.iter(t);!s.done;s.next()){var c,l=s.value;(c=i.as(l.controller,h.TypeLockupController))&&c.setFontSize(a,n)}},getStandardFontSizes:function(){return[18,24,36,48,60,132]},getMinimumFontSize:function(){return 12},getMaximumFontSize:function(){return 500}}}),o)},YeWL:function(e,t,n){var o,r=t,i=n("oAGj"),a=n("URxh"),s=n("pmb0"),c=n("RkYL");r.MotionLogicClear=(o=function(){},i.defineClass({name:"MotionLogicClear",ctor:o,statics:{_implements:function(e){return"MotionLogic"==e}},props:{apply:function(e,t,n){var o,r,l=(o=i.as(n.st,"Double"))||null!=o?o:0,u=l+((r=i.as(n.dur,"Double"))||null!=r?r:1),d=a.FormaAnimation.init_9e82(s.MotionFacade.getCurrentAnimationStyle(),c.TheoTime.fromSeconds(l),c.TheoTime.fromSeconds(u),t.concat());e.animation=d}}}),o)},YxjU:function(e,t,n){var o,r=t,i=n("oAGj"),a=n("URxh"),s=n("tGKA"),c=n("K17h"),l=n("oKlP"),u=n("RkYL"),d=n("xm77");r.MotionSourceFadeInV=(o=function(){},i.defineClass({name:"MotionSourceFadeInV",ctor:o,statics:{getSrcKeyframes:function(e){var t=[],n=u.TheoTime.Zero,o=u.TheoTime.fromSeconds(1),r=s.Matrix2D.translation(new l.TheoPoint(0,-400)),i=s.Matrix2D.Identity,p=c.MotionUtils.createOpacityStyle(e,0),f=e.style.clone();return t.push(new a.KeyFrame(n,d.TimingFunctionType.EaseInOut,r,null,p)),t.push(new a.KeyFrame(o,d.TimingFunctionType.EaseInOut,i,null,f)),t}}}),o)},aS4X:function(e,t,n){var o,r=t,i=n("oAGj"),a=n("hEh8");r.DCXDocumentDecoder=(o=function(e){a.DCXNodeDecoder.call(this,e,e.root)},i.defineClass({name:"DCXDocumentDecoder",ctor:o,superName:"DCXNodeDecoder",statics:{_implements:function(e){return"IImportDataObject"==e}},props:{getPropertyOnNode:function(e){var t=a.DCXNodeDecoder.prototype.getPropertyOnNode.call(this,e);return null==t&&(t=i.as(this.branch_.getValue(e),"AnyObject")),t}}}),o)},c2hD:function(e,t,n){var o,r=t,i=n("oAGj"),a=n("URxh"),s=n("tGKA"),c=n("K17h"),l=n("oKlP"),u=n("RkYL"),d=n("xm77");r.MotionSourceFadeInH=(o=function(){},i.defineClass({name:"MotionSourceFadeInH",ctor:o,statics:{getSrcKeyframes:function(e){var t=[],n=u.TheoTime.Zero,o=u.TheoTime.fromSeconds(1),r=s.Matrix2D.translation(new l.TheoPoint(400,0)),i=s.Matrix2D.Identity,p=c.MotionUtils.createOpacityStyle(e,0),f=e.style.clone();return t.push(new a.KeyFrame(n,d.TimingFunctionType.EaseInOut,r,null,p)),t.push(new a.KeyFrame(o,d.TimingFunctionType.EaseInOut,i,null,f)),t}}}),o)},f9IM:function(e,t,n){var o,r=t,i=n("oAGj"),a=n("URxh"),s=n("c2hD"),c=n("YxjU"),l=n("RkYL");r.MotionSourceStacked=(o=function(){},i.defineClass({name:"MotionSourceStacked",ctor:o,statics:{getSrcKeyframes:function(e){var t=[],n=c.MotionSourceFadeInV.getSrcKeyframes(e),o=s.MotionSourceFadeInH.getSrcKeyframes(e);return t.push(n[0]),t.push(new a.KeyFrame(l.TheoTime.fromSeconds(.25),n[1].timingFunction,n[1].placement,n[1].bounds,n[1].style)),t.push(new a.KeyFrame(l.TheoTime.fromSeconds(.25),o[0].timingFunction,o[0].placement,o[0].bounds,o[0].style)),t.push(new a.KeyFrame(l.TheoTime.fromSeconds(.5),o[1].timingFunction,o[1].placement,o[1].bounds,o[1].style)),t.push(new a.KeyFrame(l.TheoTime.fromSeconds(.5),o[0].timingFunction,o[0].placement.inverse,o[0].bounds,o[0].style)),t.push(new a.KeyFrame(l.TheoTime.fromSeconds(.75),o[1].timingFunction,o[1].placement,o[1].bounds,o[1].style)),t.push(new a.KeyFrame(l.TheoTime.fromSeconds(.75),n[0].timingFunction,n[0].placement.inverse,n[0].bounds,n[0].style)),t.push(new a.KeyFrame(l.TheoTime.fromSeconds(1),n[1].timingFunction,n[1].placement,n[1].bounds,n[1].style)),t}}}),o)},fAXt:function(e,t,n){var o,r=t,i=n("oAGj"),a=n("0wFF"),s=n("SpAV"),c=n("gXiO"),l=n("6ZWm"),u=n("cmoc"),d=n("X0GW"),p=n("iCxV"),f=n("lmwz"),h=n("tGKA"),m=n("oKlP");r.TransformFacade=(o=function(){c.CoreObject.call(this)},i.defineClass({name:"TransformFacade",ctor:o,superName:"CoreObject",statics:{translateForma:function(e,t){e.move(h.Matrix2D.translation(t))},nudgeFormaeInPageSpace:function(e,t){if(s.CoreAssert.isTrue(e.length>0,"can't nudge 0 formae","TransformFacade.nudgeFormaeInPageSpace","TransformFacade.swift",25),0!=e.length){var n,r=1,c=i.first(e);(n=i.opt(i.opt(c,(function(e){return e.page.view})),(function(e){return e.getViewportTransform()})))&&(r=Math.sqrt(Math.abs(n.determinant)));var l=t.divide(r);l=l.multiply(2),o.translateFormaeInPageSpace(i.clone(e),l),e.length>1?i.opt(p.Host.logging,(function(t){return t.logToAnalytics(a.AnalyticsConstants.kAnalyticsDataMultipleNudged,{contextualData1:"formae count: "+e.length})})):c.isImage()?i.opt(p.Host.logging,(function(e){return e.logToAnalytics(a.AnalyticsConstants.kAnalyticsDataImageNudged,{})})):c.isShape()?i.opt(p.Host.logging,(function(e){return e.logToAnalytics(a.AnalyticsConstants.kAnalyticsDataShapeNudged,{})})):c.isText()&&i.opt(p.Host.logging,(function(e){return e.logToAnalytics(a.AnalyticsConstants.kAnalyticsDataTextNudged,{})}))}},translateFormaeInPageSpace:function(e,t){o.transformFormaeInPageSpaceAboutPoint(i.clone(e),h.Matrix2D.translation(t),m.TheoPoint.ZERO)},transformFormaeInPageSpaceAboutPoint:function(e,t,n,o){var r;void 0===o&&(o=null);for(var a=h._asterisk_Matrix2D_Matrix2D(h._asterisk_Matrix2D_Matrix2D(h.Matrix2D.translation(m._negate_TheoPoint(n)),t),h.Matrix2D.translation(n)),s=i.iter(e);!s.done;s.next()){var c,p,g=s.value,C=g;if(null==g.controller||g.controller.floating&&!f.ImageFacade.inCropMode(g)||(c=i.as(g,u.FrameForma))&&(C=c.childAt(0)),p=C.parent){var v,y=C.placement,T=h._asterisk_Matrix2D_Matrix2D(h._asterisk_Matrix2D_Matrix2D(p.totalPlacement,a),p.totalPlacement.inverse);if(C.move(T),v=i.as(p.controller,l.FrameController)){var P;(P=i.opt(o,(function(e){return e.transformValues})))&&(C.placement=C.placement.scaleTo(P.xscale,P.yscale));var S=y.transformValues.xscale;v.updateAfterChildTransform(),Math.abs(S-C.placement.transformValues.xscale)<.001&&1!=t.transformValues.xscale&&(C.placement=y,v.updateCropModeImage())}((r=i.opt(i.opt(C.parent,(function(e){return e.controller})),(function(e){return e.userGroup})))||null!=r)&&r&&d.GroupFacade.updateUserGroupHierarchy(C.parent)}}},transformInPageSpaceAboutFormaUV:function(e,t,n){o.transformFormaeInPageSpaceAboutPoint([e],t,h._asterisk_TheoPoint_Matrix2D(e.bounds.evalXY(n.x,n.y),e.totalPlacement))},transformAboutFormaCenter:function(e,t){var n;if(n=e.parent){var r=new m.TheoPoint(.5,.5);if(n.controller instanceof l.FrameController){var i=n.bounds.transform(e.parent.totalPlacement).center,a=e.totalPlacement.inverse.transformPoint(i);r=e.bounds.locatePoint(a)}o.transformInPageSpaceAboutFormaUV(e,t,r)}else s.CoreAssert.fail("trying to rotate a forma which doesnt have a parent","TransformFacade.transformAboutFormaCenter","TransformFacade.swift",143)},scaleForma:function(e,t){var n=h.Matrix2D.scalingXY(t,t);o.transformAboutFormaCenter(e,n)},flipForma:function(e,t){var n=t?h.Matrix2D.scalingXY(1,-1):h.Matrix2D.scalingXY(-1,1);o.transformAboutFormaCenter(e,n)},rotateForma:function(e,t){var n=h.Matrix2D.rotation(Math.cos(t),Math.sin(t));o.transformAboutFormaCenter(e,n)},currentRotation:function(e){var t,n,o;return(t=i.as(e,u.FrameForma))&&(n=i.opt(i.opt(t.page.document,(function(e){return e.controller})),(function(e){return e.selection})))&&n.inCropMode&&(o=f.ImageFacade.getImageFormaForForma(t))?o.rotation():e.rotation()}}}),o)},hEh8:function(e,t,n){var o,r=t,i=n("oAGj"),a=n("RO7T"),s=n("lWlM");r.DCXNodeDecoder=(o=function(e,t){this.node_=t,a.BaseNodeDecoder.call(this,e)},i.defineClass({name:"DCXNodeDecoder",ctor:o,superName:"BaseNodeDecoder",statics:{_implements:function(e){return"IImportDataObject"==e}},props:{getPropertyOnNode:function(e){return i.as(this.node_.getValue(e),"AnyObject")},forEachChild:function(e){for(var t=0,n=i.iter(this.branch_.getChildrenOfNode(this.node_));!n.done;n.next()){var r=n.value;e(new o(this.branch_,r),t),t+=1}},forEachComponent:function(e){for(var t=0,n=i.iter(this.branch_.getComponentsOfNode(this.node_));!n.done;n.next()){var o=n.value;e(new s.DCXComponentDecoder(this.branch_,o),t),t+=1}}}}),o)},lWlM:function(e,t,n){var o,r=t,i=n("oAGj"),a=n("gXiO"),s=n("iCxV");r.DCXComponentDecoder=(o=function(e,t){this.branch_=e,this.component_=t,a.CoreObject.call(this)},i.defineClass({name:"DCXComponentDecoder",ctor:o,superName:"CoreObject",statics:{_implements:function(e){return"IImportDataComponent"==e}},props:{id:{get:function(){return this.component_.componentId}},name:{get:function(){return this.component_.name}},path:{get:function(){return this.component_.path}},mimeType:{get:function(){return this.component_.type}},etag:{get:function(){return this.component_.etag}},url:{get:function(){var e;return null!=(e=this.branch_.getPathForComponent(this.component_))?i.opt(s.Host.persistUtils,(function(t){return t.fileUrlForPath(e)})):null}}}}),o)},muPB:function(e,t,n){var o,r=t,i=n("oAGj"),a=n("ytEx"),s=n("SpAV"),c=n("iCxV"),l=n("C4JV"),u=n("Puiz");r.JSONDocumentDecoder=(o=function(e){var t,n,o,r={};(t=e.getComponentWithAbsolutePath(l.JSON_CONTENT_PATH_DCX2D))&&null!=(n=e.getPathForComponent(t))?null!=(o=i.opt(c.Host.persistUtils,(function(e){return e.readJsonContentFromFile(n)})))&&(r=o):s.CoreAssert.warning("Could not find dom component!"),u.JSONNodeDecoder.call(this,e,r)},i.defineClass({name:"JSONDocumentDecoder",ctor:o,superName:"JSONNodeDecoder",statics:{getRequiredSynchronousComponents:function(e){return[l.JSON_CONTENT_PATH_DCX2D]},_implements:function(e){return"IImportDataObject"==e}},props:{getPropertyOnNode:function(e){if(e==a.PROPERTY_KEY_ID)return i.as(this.branch_.getValue(a.PROPERTY_KEY_ID),"AnyObject");var t=u.JSONNodeDecoder.prototype.getPropertyOnNode.call(this,e);return null==t&&(t=i.as(this.branch_.getValue(e),"AnyObject")),t}}}),o)},mxdD:function(e,t,n){var o,r=t,i=n("oAGj"),a=n("gXiO"),s=n("FNB+"),c=n("cmoc"),l=n("VkKB"),u=n("RkYL"),d=n("sW6f"),p=n("zjod"),f=n("QTen");r.VideoFacade=(o=function(){a.CoreObject.call(this)},i.defineClass({name:"VideoFacade",ctor:o,superName:"CoreObject",statics:{getVideoFormaForForma:function(e){var t;return(t=i.as(e,c.FrameForma))&&t.childCount>0?i.as(t.childAt(0),p.VideoForma):i.as(e,p.VideoForma)},getTrueVideoFormaForForma:function(e){var t;return(t=o.getVideoFormaForForma(e))&&!t.isSticker()?t:null},setTransientTimeForVideoForma:function(e,t,n,r){var i,a;(i=o.getVideoStyleForForma(e))&&(a=o.getVideoContentForForma(e))&&(i.setTransientTime(t,n),a.setTransientOffset(r))},resetTransientTimeForVideoForma:function(e){var t,n;(t=o.getVideoStyleForForma(e))&&(n=o.getVideoContentForForma(e))&&(t.resetTransientTime(),n.resetTransientOffset())},changeVideoVolume:function(e,t){for(var n=i.iter(e);!n.done;n.next()){var r,a=n.value;(r=o.getVideoStyleForForma(a))&&(r.volumeLevel=t)}},getVideosOnPage:function(e,t){return void 0===t&&(t=!0),e.root.filterWithCallback((function(e){return e instanceof p.VideoForma&&(t||!e.isSticker())}))},getVideoCountOnPage:function(e,t){void 0===t&&(t=!0);for(var n=0,o=i.iter(e.root.visitAsArray(s.FormaTraversal.PreOrder));!o.done;o.next()){var r=o.value;r instanceof p.VideoForma&&(t||!r.isSticker())&&(n+=1)}return n},getStickerCountOnPage:function(e){for(var t=0,n=i.iter(e.root.visitAsArray(s.FormaTraversal.PreOrder));!n.done;n.next()){var o,r,a=n.value;(o=i.as(a,p.VideoForma))&&(r=i.opt(o.contentNode,(function(e){return e.mediaMetadata})))&&o.isSticker()&&r.sourceName==l.MediaMetadata.kMediaGiphySourceName&&(t+=1)}return t},videoContentIsLivePhoto:function(e){var t;return null!=(t=i.opt(e,(function(e){return e.getTag(d.VideoContentNode.LIVE_PHOTO_TAG)})))&&"true"==t},formaIsLivePhoto:function(e){var t;return!!(t=o.getVideoContentForForma(e))&&o.videoContentIsLivePhoto(t)},formaIsGIFVideo:function(e){var t;return!!(t=o.getVideoContentForForma(e))&&t.isGIF},getVideoContentForForma:function(e){var t;return(t=o.getVideoFormaForForma(e))?t.videoContentNode:null},getVideoStyleForForma:function(e){var t;return(t=o.getVideoFormaForForma(e))?i.as(t.style,f.VideoStyle):null},getStartTimeForVideoForma:function(e,t){void 0===t&&(t=!1);var n,r,i,a=u.TheoTime.Zero;return(n=o.getVideoStyleForForma(e))&&(a=n.startTime),t&&(r=o.getVideoContentForForma(e))&&(i=r.offsetInOriginal)&&(a=a.add(i)),a},getDurationInSecondsForVideo:function(e){return o.getDurationForVideo(e).seconds},getVideoTimeForVideoWithTimeInTotalLoop:function(e,t){var n=o.getDurationInSecondsForVideo(e),r=t.seconds%n;return u.TheoTime.fromSeconds(r,t.timescale)},getDurationForVideo:function(e){var t,n,o=u.TheoTime.Zero;if(t=e.videoContentNode)if(n=i.as(e.style,f.VideoStyle))o=n.duration;else{var r=i.clone(t.times);r.length>0&&(o=r[r.length-1])}return o},addVideoContent:function(e,t,n,o,r,a,s,c,l,u,p,f){var h,m,g;return(h=i.as(i.opt(e,(function(e){return e.createNode(d.VideoContentNode.KIND,null)})),d.VideoContentNode))?(h.url=t,h.mimeType=n,h.width=o,h.height=r,h.duration=a,h.mediaMetadata=l,h.localIdentifier=u,h.setTimes(i.clone(p)),f&&h.setTag(d.VideoContentNode.LIVE_PHOTO_TAG,"true"),(m=s)&&(h.offsetInOriginal=m),(g=c)&&(h.originalDuration=g),h):null}}}),o)},nPwb:function(e,t,n){var o,r=t,i=n("oAGj");r.PGMFacade=(o=function(){},i.defineClass({name:"PGMFacade",ctor:o}),o)},"nQ+V":function(e,t,n){var o,r=t,i=n("oAGj"),a=n("95jH");r.MotionEntryStacked=(o=function(){this.srcId="MotionSourceStacked",this.logic=new a.MotionLogicStacked,this.args={lineDur:.3,endPadDur:1}},i.defineClass({name:"MotionEntryStacked",ctor:o,statics:{_implements:function(e){return"MotionEntry"==e}}}),o)},nUE5:function(e,t,n){var o,r=t,i=n("oAGj"),a=n("SpAV"),s=n("wL85"),c=n("qTtJ"),l=n("f9IM");r.MotionSource=(o=function(){},i.defineClass({name:"MotionSource",ctor:o,statics:{getSourceAnimation:function(e,t){return"MotionSourceStacked"==e?l.MotionSourceStacked.getSrcKeyframes(t):"MotionSrcFadeIn"==e?c.MotionSrcFadeIn.getSrcKeyframes(t):"MotionSrcDropIn"==e?s.MotionSrcDropIn.getSrcKeyframes(t):(""!=e&&a.CoreAssert.warning("Unknown source animation: "+e),[])}}}),o)},qTtJ:function(e,t,n){var o,r=t,i=n("oAGj"),a=n("URxh"),s=n("tGKA"),c=n("K17h"),l=n("RkYL"),u=n("xm77");r.MotionSrcFadeIn=(o=function(){},i.defineClass({name:"MotionSrcFadeIn",ctor:o,statics:{getSrcKeyframes:function(e){var t=[],n=l.TheoTime.Zero,o=l.TheoTime.fromSeconds(1),r=s.Matrix2D.Identity,i=s.Matrix2D.Identity,d=c.MotionUtils.createOpacityStyle(e,0),p=e.style.clone();return t.push(new a.KeyFrame(n,u.TimingFunctionType.Linear,r,null,d)),t.push(new a.KeyFrame(o,u.TimingFunctionType.Linear,i,null,p)),t}}}),o)},txj3:function(e,t,n){var o,r=t,i=n("oAGj"),a=n("SpAV"),s=n("ThKb");r.NNMLPClassifier=(o=function(e,t,n){this._finalSoftmax=!0,void 0===n&&(n=!0),a.CoreAssert.isTrue(e.length==t.length,void 0,"NNMLPClassifier.init","NNMLPClassifier.swift",18),this._coefficients=i.clone(e),this._intercepts=i.clone(t);var o=e.length;this._classNum=e[o-1].rows,this._finalSoftmax=n,i.defctor(this)},i.defineClass({name:"NNMLPClassifier",ctor:o,props:{predict:function(e){return a.CoreAssert.isTrue(1==e.cols,void 0,"NNMLPClassifier.predict","NNMLPClassifier.swift",28),i.clone(this.forwardPropagate(e)).AL},forwardPropagate:function(e){for(var t={},n=[],o=e,r=this.hiddenLayerNumber(),a=i.iter(i.range(0,r,!1));!a.done;a.next()){var s=a.value,c=o,l=this._coefficients[s],u=this._intercepts[s],d=i.clone(this.linearActivationForward(c,l,u,"relu"));o=d.A,n.push(i.clone(d.cache))}if(1!=this._classNum&&this._finalSoftmax){var p=i.clone(this.linearActivationForward(o,this._coefficients[r],this._intercepts[r],"softmax"));n.push(i.clone(p.cache)),t.AL=p.A,t.caches=i.clone(n)}else{var f=i.clone(this.linearActivationForward(o,this._coefficients[r],this._intercepts[r],"sigmoid"));n.push(i.clone(f.cache)),t.AL=f.A,t.caches=i.clone(n)}return t},backwardPropagate:function(e,t,n){var o={},r=[],c=[],l=[],u=n.length;a.CoreAssert.isTrue(e.cols==t.cols&&e.rows==t.rows,void 0,"NNMLPClassifier.backwardPropagate","NNMLPClassifier.swift",104);var d=i.clone(n[u-1]);if(1==this._classNum){var p=s.TheoMatrix.ones(t.rows,t.cols),f=t.divide(e).subtract(p.subtract(t).divide(p.subtract(e))).multiplyConstant(-1),h=i.clone(this.linearActivationBackward(f,i.clone(d),"sigmoid"));r.push(h.dAprev),c.push(h.dW),l.push(h.db)}else{var m=e.subtract(t),g=i.clone(this.linearActivationBackward(m,i.clone(d),"softmax"));r.push(g.dAprev),c.push(g.dW),l.push(g.db)}for(var C=i.iter(i.range(0,u-2,!0).reversed());!C.done;C.next()){var v=C.value;d=i.clone(n[v]);var y=i.clone(this.linearActivationBackward(r[r.length-1],i.clone(d),"relu"));r.push(y.dAprev),c.push(y.dW),l.push(y.db)}return o.dAs=i.reverse(r),o.dWs=i.reverse(c),o.dbs=i.reverse(l),o},computeCost:function(e,t){var n=t.cols;if(a.CoreAssert.isTrue(n>0,void 0,"NNMLPClassifier.computeCost","NNMLPClassifier.swift",139),1==this._classNum){var o=s.TheoMatrix.ones(t.rows,t.cols),r=t.multiply(e.matrixLog()),c=o.subtract(t).multiply(o.subtract(e).matrixLog()),l=r.add(c);return i.toDouble(i.toInt(-1/n))*l.sumRows().value(0,0)}return t.transpose().matrixMultiply(e.matrixLog()).value(0,0)*(-1/i.toDouble(n))},linearForward:function(e,t,n){var o={};return o.Z=t.matrixMultiply(e).add(n),o.cache={A:e,W:t,b:n},o},linearActivationForward:function(e,t,n,o){var r={},a={},s=i.clone(this.linearForward(e,t,n)),c=s.Z;return a.linearCache=s.cache,a.activationCache=c,r.cache=i.clone(a),"sigmoid"==o?r.A=c.sigmoid():"relu"==o?r.A=c.relu():"softmax"==o&&(r.A=this.softmaxActivation(c)),r},hiddenLayerNumber:function(){return this._coefficients.length-1},linearBackward:function(e,t,n,o){var r={},s=t.cols,c=e.matrixMultiply(t.transpose()).multiplyConstant(i.toDouble(i.toInt(1/s))),l=e.sumColumns().multiplyConstant(i.toDouble(i.toInt(1/s))),u=n.transpose().matrixMultiply(e);return a.CoreAssert.isTrue(c.cols==n.cols&&c.rows==n.rows,void 0,"NNMLPClassifier.linearBackward","NNMLPClassifier.swift",223),a.CoreAssert.isTrue(l.cols==o.cols&&l.rows==o.rows,void 0,"NNMLPClassifier.linearBackward","NNMLPClassifier.swift",224),a.CoreAssert.isTrue(u.cols==t.cols&&u.rows==t.rows,void 0,"NNMLPClassifier.linearBackward","NNMLPClassifier.swift",225),r.dAprev=u,r.dW=c,r.db=l,r},linearActivationBackward:function(e,t,n){var o=i.clone(t.linearCache),r=o.A,a=o.W,s=o.b,c=t.activationCache,l={};if("sigmoid"==n){var u=this.sigmoidBackward(e,c);l=i.clone(this.linearBackward(u,r,a,s))}else"relu"==n?(u=this.reluBackward(e,c),l=i.clone(this.linearBackward(u,r,a,s))):"softmax"==n&&(u=e,l=i.clone(this.linearBackward(u,r,a,s)));return l},softmaxActivation:function(e){a.CoreAssert.isTrue(1==e.cols,void 0,"NNMLPClassifier.softmaxActivation","NNMLPClassifier.swift",266);var t=e.exp(),n=t.sum();return t.multiplyConstant(i.toDouble(1/n))},sigmoidBackward:function(e,t){var n=s.TheoMatrix.ones(t.rows,t.cols),o=t.sigmoid(),r=e.multiply(o).multiply(n.subtract(o));return a.CoreAssert.isTrue(r.cols==t.cols&&r.rows==t.rows,void 0,"NNMLPClassifier.sigmoidBackward","NNMLPClassifier.swift",277),r},reluBackward:function(e,t){a.CoreAssert.isTrue(e.cols==t.cols&&e.rows==t.rows,void 0,"NNMLPClassifier.reluBackward","NNMLPClassifier.swift",282);for(var n=[],o=i.iter(i.range(0,e.rows,!1));!o.done;o.next()){for(var r=o.value,c=[],l=i.iter(i.range(0,e.cols,!1));!l.done;l.next()){var u=l.value;t.value(r,u)>=0?c.push(e.value(r,u)):c.push(0)}n.push(i.clone(c))}var d=new s.TheoMatrix(i.clone(n));return a.CoreAssert.isTrue(d.cols==t.cols&&d.rows==t.rows,void 0,"NNMLPClassifier.reluBackward","NNMLPClassifier.swift",296),d}}}),o)},uMFj:function(e,t,n){var o,r=t,i=n("oAGj"),a=n("x0BK"),s=n("9YN4");r.DCXDocumentEncoder=(o=function(e){a.DCXNodeEncoder.call(this,e,e.root);var t=[s.TheoDocument.COMPONENT_RELATIONSHIP_METADATA,s.TheoDocument.COMPONENT_RELATIONSHIP_RENDITION];this.prepareCompositeForSave(i.clone(t))},i.defineClass({name:"DCXDocumentEncoder",ctor:o,superName:"DCXNodeEncoder",statics:{_implements:function(e){return"IExportDataObject"==e}},props:{finish:function(){a.DCXNodeEncoder.prototype.finish.call(this),this.discardStashedComponents()}}}),o)},uj1m:function(e,t,n){var o,r=t,i=n("oAGj"),a=n("iCxV"),s=n("ThKb");r.MLPModel=(o=function(e,t,n,o,r,a,s,c){this.featureScalingMean=e,this.featureScalingStd=t,this.coefficients=i.clone(n),this.intercepts=i.clone(o),this.shapes=i.clone(r||[]),this.fonts=i.clone(a||[]),this.layouts=i.clone(s||[]),this.roles=i.clone(c||[]),this.fontMap={},this.finalSoftmax=!0},i.defineClass({name:"MLPModel",ctor:o,statics:{cache:{},loadNNModel:function(e){if(null==o.cache[e]){var t,n=null;if(t=i.opt(a.Host.learning,(function(t){return t.loadNNJSON(e)}))){var r,c=new s.TheoMatrix([t.featureScalingMean]),l=new s.TheoMatrix([t.featureScalingStd]);if(r=i.as(t.model,["Dictionary","String","Any"])){for(var u=i.clone(r.coefs),d=[],p=i.iter(u);!p.done;p.next()){var f=p.value;d.push(new s.TheoMatrix(i.clone(f)).transpose())}for(var h=i.clone(r.intercepts),m=[],g=i.iter(h);!g.done;g.next()){var C=g.value;m.push(new s.TheoMatrix([C]).transpose())}for(var v={},y=i.iter(["shapes","fonts","layouts","roles"]);!y.done;y.next()){var T=y.value;null!=r[T]?v[T]=i.clone(r[T]):v[T]=[]}n=new o(c,l,i.clone(d),i.clone(m),i.clone(v.shapes),i.clone(v.fonts),i.clone(v.layouts),i.clone(v.roles))}}o.cache[e]=n}return o.cache[e]}},props:{data:function(){for(var e=[],t=[],n=i.iter(this.coefficients);!n.done;n.next()){var o=n.value;e.push(i.clone(o.transpose().asArray))}for(var r=i.iter(this.intercepts);!r.done;r.next()){var a=r.value;t.push(i.clone(a.transpose().asFlatArray))}return i.clone(i.as({model:{coefs:e,intercepts:t,shapes:this.shapes,fonts:this.fonts,layouts:this.layouts,roles:this.roles},featureScalingMean:this.featureScalingMean.asFlatArray,featureScalingStd:this.featureScalingStd.asFlatArray},["Dictionary","String","Any"]))}}}),o)},wL85:function(e,t,n){var o,r=t,i=n("oAGj"),a=n("URxh"),s=n("tGKA"),c=n("oKlP"),l=n("RkYL"),u=n("xm77");r.MotionSrcDropIn=(o=function(){},i.defineClass({name:"MotionSrcDropIn",ctor:o,statics:{getSrcKeyframes:function(e){var t=[],n=l.TheoTime.Zero,o=l.TheoTime.fromSeconds(1),r=s.Matrix2D.translation(new c.TheoPoint(0,-400)),i=s.Matrix2D.Identity,d=e.style.clone();return t.push(new a.KeyFrame(n,u.TimingFunctionType.Linear,r,null,d)),t.push(new a.KeyFrame(o,u.TimingFunctionType.Linear,i,null,d)),t}}}),o)},x0BK:function(e,t,n){var o,r=t,i=n("oAGj"),a=n("ytEx"),s=n("SpAV");r.DCXNodeEncoder=(o=function(e,t){this.node_=t,a.BaseNodeEncoder.call(this,e,t)},i.defineClass({name:"DCXNodeEncoder",ctor:o,superName:"BaseNodeEncoder",statics:{_implements:function(e){return"IExportDataObject"==e}},props:{getPropertyOnNode:function(e){return i.as(this.node_.getValue(e),"AnyObject")},setPropertyOnNode:function(e,t){null!=t?this.node_.setValue(e,t):this.node_.removeValue(e)},createChildEncoder:function(e){var t=this.branch_.appendNode(e,null,this.node_);return new o(this.branch_,t)},findChild:function(e){return null==e?null:(t=this.branch_.getChildrenOfNode(this.node_).find((function(t){return i.as(t.getValue(a.PROPERTY_KEY_PATH),"String")==e}),this))?(s.CoreAssert.info(i.toString(this.id)+" foundChild "+t.nodeId),new o(this.branch_,t)):a.BaseNodeEncoder.prototype.findChild.call(this,e);var t}}}),o)},ytEx:function(e,t,n){var o,r=t,i=n("oAGj"),a=n("SpAV"),s=n("gXiO"),c=n("3OP7"),l=n("iCxV");r.PROPERTY_KEY_ID="id",r.PROPERTY_KEY_TYPE="type",r.PROPERTY_KEY_NAME="name",r.PROPERTY_KEY_PATH="path",r.PROPERTY_KEY_MIMETYPE="mimeType",r.PROPERTY_KEY_ETAG="etag",r.PROPERTY_KEY_URL="url",r.PROPERTY_KEY_RELATIONSHIP="rel",r.BaseNodeEncoder=(o=function(e,t){this.childNodeEncoders_=[],this.branch_=e,this.componentNode_=t,s.CoreObject.call(this)},i.defineClass({name:"BaseNodeEncoder",ctor:o,superName:"CoreObject",statics:{_implements:function(e){return"IExportDataObject"==e}},props:{prepareCompositeForSave:function(e){a.CoreAssert.isTrue(null==this.stashNode_,"creating a stashNode when we already have one?","BaseNodeEncoder.prepareCompositeForSave","BaseNodeEncoder.swift",33),this.stashNode_=this.createTempNode(this.branch_.root);for(var t=i.iter(this.branch_.allComponents);!t.done;t.next()){var n=t.value;null!=n.relationship&&e.includes(n.relationship)||this.branch_.moveComponent(n,this.createTempNode(this.stashNode_))}for(var o=i.iter(this.branch_.getChildrenOfNode(this.branch_.root));!o.done;o.next()){var s=o.value,c=i.as(s.getValue(r.PROPERTY_KEY_RELATIONSHIP),"String");null!=c&&e.includes(c)||s.nodeId!=this.stashNode_.nodeId&&this.branch_.removeNode(s)}},createTempNode:function(e){var t=i.opt(l.Host.resourceUtils,(function(e){return e.makeGUID()}));return this.branch_.appendNode(t,t,e)},discardStashedComponents:function(){this.branch_.removeNode(this.stashNode_)},getPropertyOnNode:function(e){return a.CoreAssert.fail("must be overridden","BaseNodeEncoder.getPropertyOnNode","BaseNodeEncoder.swift",77),null},setPropertyOnNode:function(e,t){a.CoreAssert.fail("must be overridden","BaseNodeEncoder.setPropertyOnNode","BaseNodeEncoder.swift",82)},id:{get:function(){return i.as(this.getPropertyOnNode(r.PROPERTY_KEY_ID),"String")}},path:{get:function(){return i.as(this.getPropertyOnNode(r.PROPERTY_KEY_PATH),"String")}},setName:function(e){this.setPropertyOnNode(r.PROPERTY_KEY_NAME,i.as(e,"AnyObject"))},setType:function(e){this.setPropertyOnNode(r.PROPERTY_KEY_TYPE,i.as(e,"AnyObject"))},setPath:function(e){this.setPropertyOnNode(r.PROPERTY_KEY_PATH,i.as(e,"AnyObject"))},setProperty:function(e,t){var n=c.DocumentPersistenceFactory.namespacedPropertyName(e);this.setPropertyOnNode(n,t)},setOptionalStringProperty:function(e,t){this.setProperty(e,i.as(t,"AnyObject"))},setStringProperty:function(e,t){this.setProperty(e,i.as(t,"AnyObject"))},setNumberProperty:function(e,t){a.CoreAssert.isFalse(isNaN(t),"Can't set NaN for prop "+e+".","BaseNodeEncoder.setNumberProperty","BaseNodeEncoder.swift",119),this.setProperty(e,i.as(t,"AnyObject"))},setIntProperty:function(e,t){this.setProperty(e,i.as(t,"AnyObject"))},setBooleanProperty:function(e,t){this.setProperty(e,i.as(t,"AnyObject"))},setOptionalBooleanProperty:function(e,t){this.setProperty(e,i.as(t,"AnyObject"))},createChildEncoder:function(e){return a.CoreAssert.fail("must be overridden","BaseNodeEncoder.createChildEncoder","BaseNodeEncoder.swift",136),new o(this.branch_,this.componentNode_)},findChild:function(e){return null==e?null:this.childNodeEncoders_.find((function(t){return t.path==e}),this)},appendChild:function(e){var t=this.createChildEncoder(e);return this.childNodeEncoders_.push(t),t},appendComponent:function(e,t,n){var o,r=i.opt(l.Host.pathUtils,(function(e){return e.absolutePathFromURL(t)})),a=e,s=i.clone(i.opt(i.opt(l.Host.pathUtils,(function(e){return e.lastPathComponentFromURL(t)})),(function(e){return e.split(".")})));if(null!=s&&s.length>1){var c=i.last(s);i.isEmpty(c)||(a+="."+c)}if(o=this.branch_.getComponentWithId(e)){if(this.nodeHasComponentWithPath(o.path)||i.opt(o.path,(function(e){return 1==e.includes("/")}))){var u=o.mutableCopy;u.path=a,o=this.branch_.updateComponent(u,null,!1)}this.branch_.moveComponent(o,this.componentNode_)}else i.opt(r,(function(e){return 1==e.startsWith("shapes/")}))||this.branch_.addComponent(e,e,n,null,a,this.componentNode_,r,!0,null)},nodeHasComponentWithPath:function(e){if(null!=e)for(var t=i.iter(this.branch_.getComponentsOfNode(this.componentNode_));!t.done;t.next())if(t.value.path==e)return!0;return!1},setCompositeID:function(e){},setDocumentSize:function(e,t){},setManifestProperty:function(e,t,n){n?this.getManifestEncoder().setProperty(e,t):this.getManifestEncoder().setPropertyOnNode(e,t)},getManifestEncoder:function(){return this},finish:function(){for(var e=i.iter(this.childNodeEncoders_);!e.done;e.next())e.value.finish()}}}),o)}}]);
//# sourceMappingURL=vendors_npm_spark_28b70a57-d1921194.js.map