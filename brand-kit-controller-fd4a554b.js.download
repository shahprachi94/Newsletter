(window.webpackJsonp=window.webpackJsonp||[]).push([["brand-kit-controller","authoring-context"],{1692:function(e,t,n){var o,i;o=[n(3),n(0),n(1),n(2),n(10),n(7),n(21),n(128),n(517),n(14),n(40),n(8),n(2596),n(2597),n(2598),n(692),n(610),n(93),n(548),n(690),n(64)],void 0===(i=function(e,t,n,o,i,a,r,s,u,c,d,l,h,g,f,m,p,b,y,v,C){"use strict";var F=new i.default({color:"#0000ff",name:"authoring-context"}),w=["is-body-font","is-body-font-italic","is-body-font-bold","is-body-font-bold-italic"],k={"is-body-font":"Regular","is-body-font-italic":"Italic","is-body-font-bold":"Bold","is-body-font-bold-italic":"Bold Italic"};return o.Model.extend({CURRENT_AC_VERSION:2,CUSTOM_FONTS_AC_VERSION:3,COLLABORATION_AC_VERSION:4,CURRENT_FONT_METRICS_VERSION:1,getACVersion:function(){return l.hasFeature("enable-custom-fonts")&&(this.CURRENT_AC_VERSION=this.CUSTOM_FONTS_AC_VERSION),this.CURRENT_AC_VERSION},upgradeVersionForCollaboration:function(){return this.composite.saveChanges(function(e){return e.getValue("ac#version")<this.COLLABORATION_AC_VERSION&&e.setValue("ac#version",this.COLLABORATION_AC_VERSION),this}.bind(this),!0)},isDefault:function(){return this.composite.getDCXRoot().getValue("ac#default")},getId:function(){return this.composite.getDCXComposite().id},getURN:function(){return this.composite.getDCXComposite().assetId},belongsToUser:function(){return this.composite.belongsToUser()},forcePull:function(){return this.syncGroup.getComposite(this.composite.get("id"),void 0,!0)},getCollaborationHref:function(){return"assets/"+this.composite.get("syncGroupName")+"/"+this.composite.get("id")},setComposite:function(e){this.composite=e},getType:function(){return this.composite.getDCXRoot().getValue("ac#type")||"brand-kit"},getVersion:function(){return this.composite.get("ac#version")},restrictedAccess:function(){return this.activated()&&!l.hasFeature("entitle-brand-kit")},activate:function(){this.composite.getDCXRoot().setValue("ac#activated",!0)},activated:function(){return!!this.composite.getDCXRoot().getValue("ac#activated")},deactivate:function(){this.composite.getDCXRoot().setValue("ac#activated",!1)},hasBeenEntitled:function(){return!!this.composite.getDCXRoot().getValue("ac#has-been-entitled")},recordEntitlmentIfInterested:function(){return!(this.hasBeenEntitled()||!l.hasFeature("entitle-brand-kit"))&&(this.composite.getDCXRoot().setValue("ac#activated",!0),!0)},getNameUI:function(e){e=e||30;var t,n=this.getName();if(n.length>e)for(t=n.split(" ");t.length&&n.length>e;)t.pop(),n=t.join(" ")+"...";return n},getDefaultName:function(){var e=window.adobeIMS.getUserProfile().first_name||"";return e?e+"'s Authoring Context":"My Authoring Context"},getName:function(){return this.composite.get("name")||this.getDefaultName()},setName:function(e,t){if(t){var o=this.composite.getDCXRoot();return this.composite.set("name",e),o.setValue("name",e),n.resolve()}return this.composite.saveChanges((function(t){t.setValue("name",e)}))},save:function(e){return this.composite.saveChanges(function(e){return e.setValue("ac#version",this.CURRENT_AC_VERSION),this}.bind(this),e)},getAssetsWithRole:function(e,n){return this.composite.acquireNestedChildren(e,!0).then(function(e){return e=t.filter(e||[],function(e){return this.hasRole(e,n)}.bind(this))}.bind(this))},getAssetWithUniqueRole:function(e,t){return this.getAssetsWithRole(e,t).then((function(e){return e[0]}))},hasRole:function(e,n){e.getValue("ac#roles");return t.includes(e.getValue("ac#roles")||[],n)},removeRole:function(e,n){var o=e.getValue("ac#roles");o&&(o=t.without(o,n),e.setValue("ac#roles",o))},addRole:function(e,n){if("string"==typeof n&&(n=n&&n.replace(/^\s*/,"").replace(/\s*$/,""))){var o=e.getValue("ac#roles")||[];t.includes(o,n)||(o.push(n),e.setValue("ac#roles",o))}},setUniqueRoles:function(e,o,i,a){return this.composite.acquireNestedChildren(e,!0).then(function(e){return e=e||[],t.each(e,function(e){t.each(i,function(t){this.removeRole(e,t)}.bind(this))}.bind(this)),t.each(i,function(e){this.addRole(o,e)}.bind(this)),a?n.resolve():this.composite.saveChanges(function(e){}.bind(this))}.bind(this))},setUniqueRole:function(e,t,n){return this.setUniqueRoles(e,t,[n])},setUniqueRolesSync:function(e,n,o){var i=this.composite.acquireNestedChildrenSync(e);i=i||[],t.each(i,function(e){t.each(o,function(t){this.removeRole(e,t)}.bind(this))}.bind(this)),t.each(o,function(e){this.addRole(n,e)}.bind(this))},createTheme:function(e,t,o,i){return this.composite.acquireNestedMap("themes",!0).then(function(a){var r=this.composite.addChildPath(void 0,void 0,a);r.setValue("type","application/vnd.adobe.adobespark.theme+json"),r.setValue("ac#format",e),r.setValue("ac#created",(new Date).toISOString());var s=n.resolve(),u=t(r,this);return u&&u.then&&"function"==typeof u.then&&(s=u),s.then(function(){return this.updateThemeThumbnail(r,r.getValue("theme#data"),o)}.bind(this)).then(function(){return i?r:this.composite.saveChanges((function(){})).then((function(){return r}))}.bind(this))}.bind(this))},updateThemeThumbnail:function(e,n,o){var i=document.createElement("canvas");i.width=520,i.height=280;var a=o(i.getContext("2d"),e),r=this.composite.getDCXComposite().current,u=t.find(r.getComponentsOf(e),(function(e){return"rendition"===e.relationship})),c=this,d=function(){var t=s(i.toDataURL("image/jpeg"));return c.composite.pushComponentWithRetry({name:"thumbnail.jpg",path:"thumbnail",absolutePath:"/themes/"+e.id+"/thumbnail",parent:e,relationship:"rendition",type:"image/jpeg",file:t,isUpdate:!!u})};return a&&a.then&&"function"==typeof a.then?a.then(d):d()},updateThemeThumbnails:function(e){return n.all(t.map(e,function(e){var t=e.theme,n=e.themeController;if(n.generateThemeRendition&&"function"==typeof n.generateThemeRendition)return this.updateThemeThumbnail(t,t.getValue("theme#data"),n.generateThemeRendition.bind(n))}.bind(this)))},getThemeById:function(e){return this.composite.getChildWithMap("themes."+e)},getThemeThumbnailHrefAsync:function(e,o){var i=this.composite.getDCXComposite().current,a=t.find(i.getComponentsOf(e),(function(e){return"rendition"===e.relationship}));return a?this.composite.getImageComponentHref(a,o||500):n.resolve()},getFormatThemes:function(e){return this.composite.acquireNestedChildren("themes",!0).then(function(n){return n=t.filter(n||[],function(t){return t.getValue("ac#format")===e}.bind(this))}.bind(this))},duplicateTheme:function(e,t){var o=n.defer();return this.composite.acquireNestedMap("themes",!0).then(function(n){var o,i=n._owner,a=r.AdobeDCXUtil.generateUuid(),s=e.id;return e._data.id=a,e._data.path=a,o=i.copyChild(e,n,void 0,a,a),e._data.id=s,e._data.path=s,t?o:this.composite.saveChanges((function(e){})).then(function(){return o}.bind(this))}.bind(this)).then(function(e){o.resolve(e)}.bind(this)),o.promise},removeTheme:function(e,t){if(this.composite.removeChild(e),!t)return this.composite.saveChanges((function(e){}))},deleteNamedImageAsset:function(e,t){var n=this.composite.getDCXComposite().current,o=n.getComponentWithAbsolutePath("/"+t+"/"+e.getValue("path")+"/image");return o&&n.removeComponent(o),this.composite.removeChild(e),this.save()},_processImageAsset:function(e,t,o,i,a,r){var s=this.composite.getDCXRoot(),u=this.composite.getDCXComposite().current.getComponentWithAbsolutePath("/"+t+"/"+e+"/image");return this.composite.acquireNestedMap(t+"."+e,!0).then(function(e){return e.setValue("type","application/vnd.adobe.element.image+dcx"),e.setValue("ac#application","spark-web"),this.addRole(e,o),(i&&i.length?this.setUniqueRoles(t,e,i,r):n.resolve()).then(function(){return this.composite.pushComponentWithRetry(a(e,!!u)).then(function(){return r?(s.setValue("ac#version",this.CURRENT_AC_VERSION),e):this.composite.saveChanges(function(e){e.setValue("ac#version",this.CURRENT_AC_VERSION)}.bind(this)).then((function(){return e}))}.bind(this))}.bind(this))}.bind(this))},uploadImageAsset:function(e,t,o,i,a,r,u){var c,d=document.createElement("canvas"),l=d.getContext("2d");if(r){var h=n.defer(),g=new Image;g.onload=function(){var e=g.width,t=g.height,n=e/t;n>1&&e>r?t=1/n*(e=r):t>r&&(e=n*(t=r)),d.width=e,d.height=t,l.drawImage(g,0,0,e,t);var o=s(d.toDataURL("image/png"));h.resolve(o)},g.src=URL.createObjectURL(o),c=h.promise}else c=n.resolve(o);return c.then(function(n){return this._processImageAsset(e,t,i,a,function(o,i){var a={type:n.type,isUpdate:i,parent:o,relationship:"primary",file:n};return i?a.absolutePath="/"+t+"/"+e+"/image":a.path="image",a}.bind(this),u)}.bind(this))},updateImageAsset:function(e,t,n,o,i,a,r){return this._processImageAsset(e,t,a,r,function(a,r){var s={type:o||"image/jpg",path:"image",isUpdate:r,parent:a,relationship:"primary",copyFrom:{source:i,assetId:n}};return r?s.absolutePath="/"+t+"/"+e+"/image":s.path="image",s}.bind(this))},getMappedImageAsset:function(e,t,o){var i=this.composite.getChildWithMap(e);return i?this.composite.getImageComponentHref(i,t,o):n.resolve(null)},hrefForImage:function(e,t,n,o){return this.getMappedImageAsset(e+"."+t.getValue("path")+".!image",n,o)},delete:function(){var e=this.getURN();return C.load().then(function(t){return this.composite.delete().then(function(){return t.SparkStorageLoader.flushLocalAuthoringContext(e)}.bind(this))}.bind(this))},getColorsByRole:function(){return this.getColors().then((function(e){var n={};return t.each(e,(function(e){t.each(e.getRoles(),(function(t){n[t]=e}))})),n}))},getDerivedColors:function(e,o){return(e?n.resolve(e):this.getColorWithUniqueRole("base-color")).then(function(t){return e=t,this.getColors("derived-from-"+e.getId())}.bind(this)).then(function(n){n=t.sortBy(n,(function(e){return t.find(e.getRoles(),(function(e){return 0===e.search("shade-")})).replace(/^shade-/,"")}));var i=!1;return t.each(n,(function(t){if(t.hex()===e.hex()&&e.hasRole("base-color")&&!t.hasRole("base-color"))return i=!0,!1})),i?this.updateDerivedColors(e.hex()).then(function(){return this.getDerivedColors(void 0,o)}.bind(this)):t.filter(n,function(e){var n=!0;return t.each(o,(function(t){n&&(n=!e.hasRole(t))})),n}.bind(this))}.bind(this))},updateDerivedColors:function(e,o,i,a){var r,s=["base-color"],c=-1,d=u.hexToRgb(e),l=[],h=function(e,t,n){return this.addColorHexSync(t,[],n,["shade-"+e,"derived"])}.bind(this);return(o?this.getColors("derived-from-"+o.getId()):n.resolve([])).then(function(e){t.each(e,function(e){var n,o;t.each(e.getRoles(),(function(e){-1!=e.search("shade-")?n=e:-1!=e.search("derived-from-")&&(o=e)}));var i=e.getData();this.removeRole(i,o);var a=parseInt(n.replace(/^shade-/,""));e.hasRole("base-color")&&(c=a);for(var r=0,u=s.length;r<u;r++){var d=s[r];this.removeRole(i,d)}l[a]=e}.bind(this));var o,g=u.calcShints(d);t.each(g,function(e,t){var n=l[t];if(e.r===d.r&&e.g===d.g&&e.b===d.b){r=-1===c?n=h(t,u.rgbToHex(e)):n;for(var i=0,a=s.length;i<a;i++){var g=s[i];this.addRole(r.getData(),g)}o=t}n?n.setRGB(e):n=h(t,u.rgbToHex(e)),l[t]=n}.bind(this));var f,m=n.resolve();return a&&(f=o>3?o-2:o+2,m=n.all([this.setUniqueRoles("colors",l[1].getData(),["chrome-background-color","chrome-header-cta-background-color","chrome-footer-background-color"],i),this.setUniqueRoles("colors",l[f].getData(),["chrome-text-color"],i)])),t.each(l,function(e){e&&this.addRole(e.getData(),"derived-from-"+r.getId())}.bind(this)),i?m.then(function(){return{baseColor:r,shades:l}}.bind(this)):m.then(function(){return this.save().then(function(){return{baseColor:r,shades:l}}.bind(this))}.bind(this))}.bind(this))},removeDerivedColors:function(e){return this.composite.acquireNestedChildren("colors",!0).then(function(n){t.each(n,function(n){if(this.hasRole(n,"derived-from-"+e.getId())){var o=new g;o.setData(n),t.find(o.getRoles(),(function(e){return 0===e.indexOf("shade-")}))?this.removeColor(o,!0):console.warn("Unexpected no shade role",n.getRoles())}}.bind(this))}.bind(this))},getColorWithUniqueRole:function(e){return this.getAssetWithUniqueRole("colors",e).then(function(e){if(e){var t=new g;return t.setData(e),t}return null}.bind(this))},getColors:function(e,n){return this.composite.acquireNestedChildren("colors",!0).then(function(o){var i=[];return t.each(o,function(o){if(e&&!this.hasRole(o,e)||t.intersection(o.getValue("ac#roles"),n).length);else{var a=new g;a.setData(o),i.push(a)}}.bind(this)),i}.bind(this))},addColorHex:function(e,n,o,i){return this.composite.acquireNestedMap("colors",!0).then(function(a){var r=this.composite.addChildPath(void 0,void 0,a),s=new g;return s.setData(r),s.setHex(e),o?s.setName(o):s.generateName(),t.each(i||[],function(e){this.addRole(r,e)}.bind(this)),this.composite.saveChanges((function(){})).then(function(){return n&&n.length?this.setUniqueRoles("colors",r,n).then(function(){return s}.bind(this)):s}.bind(this))}.bind(this))},addColorHexSync:function(e,n,o,i){var a=this.composite.acquireNestedMapSync("colors"),r=this.composite.acquireNestedChildrenSync("colors"),s=this.composite.addChildPath(void 0,void 0,a),u=new g;return u.setData(s),u.setHex(e),o?u.setName(o):u.generateName(),t.each(i||[],function(e){this.addRole(s,e)}.bind(this)),t.each(r,function(e){t.each(n,function(t){this.removeRole(e,t)}.bind(this))}.bind(this)),t.each(n,function(e){this.addRole(s,e)}.bind(this)),u},removeColor:function(e,t){if(this.composite.removeChild(e.getData()),!t)return this.composite.saveChanges((function(e){}))},getFonts:function(e){return this.composite.acquireNestedChildren("fonts",!0).then(function(n){var o=[];return t.each(n,function(t){if(e&&!this.hasRole(t,e));else{var n=new f;n.setData(t),o.push(n)}}.bind(this)),o}.bind(this))},getFontWithUniqueRole:function(e){return l.hasFeature("enable-custom-fonts")?this.getFontWithRole(e):this.getAssetWithUniqueRole("fonts",e).then(function(e){if(e){var t=new f;return t.setData(e),t}return null}.bind(this))},addFontFace:function(e,t){var o=new m;return o.setAC(this),o.createFont(e,[t]),n.resolve(o)},addFontWithUniqueRoles:function(e,t,o,i){return this.composite.acquireNestedMap("fonts",!0).then(function(a){var r=this.composite.addChildPath(void 0,void 0,a),s=new f;r.setValue("type","application/vnd.adobe.element.font+dcx"),r.setValue("ac#application","spark-web"),s.setData(r),s.setName(e),s.setValue({source:t,lookupKey:e});var u=n.resolve();return o&&o.length&&(u=this.setUniqueRoles("fonts",r,o)),u.then(function(){if(!i)return this.composite.saveChanges((function(){}))}.bind(this)).then(function(){return s}.bind(this))}.bind(this))},addFont:function(e,o,i,a){return this.composite.acquireNestedMap("fonts",a).then(function(r){var s=this.composite.addChildPath(void 0,void 0,r),u=new f;s.setValue("type","application/vnd.adobe.element.font+dcx"),s.setValue("ac#application","spark-web"),u.setData(s),u.setName(e),u.setValue({source:o,lookupKey:e});n.resolve();return i&&t.each(i,function(e){this.addRole(s,e)}.bind(this)),a?u:this.save().then(function(){return u}.bind(this))}.bind(this))},addFauxFont:function(e,t,n,o,i,a){var r=this.composite.acquireNestedMapSync("all-fonts"),s=this.composite.addChildPath(void 0,void 0,r),u=new m;return s.setValue("type","application/vnd.adobe.element.font+dcx"),s.setValue("ac#application","spark-web"),u.setData(s),u.setName(e+" "+t),u.setValue({source:"faux-font",subgroupName:e,faceName:t,cssName:n,metrics:{metrics:{weight:o,style:i}}}),this.addRole(s,a),this.addRole(s,"custom"),u},findFauxFont:function(e,t,n,o){return this.getCustomFontSubgroup(e).find((function(e){return e.isFauxFont()&&e.fontStyle()==n&&e.fontWeight()==t}))},removeFont:function(e,t){return this.composite.removeChild(e.getData()),t?n.resolve():this.composite.saveChanges((function(e){}))},removeFontWithNode:function(e){return this.composite.removeChild(e),this.composite.saveChanges((function(e){}))},convertFontNodeToAuthoringContextFontFace:function(e){var t=new m;return t.setAC(this),t.setData(e),t},getAllFonts:function(e){var n=this.composite.acquireNestedChildrenSync("all-fonts"),o=[];return t.each(n,function(t){var n=new m;n.setAC(this),n.setData(t),e&&n.isFauxFont(),o.push(n)}.bind(this)),o},getFontById:function(e){var t=this.composite.getChildWithMap("all-fonts.[id="+e+"]");if(t){var n=new m;return n.setAC(this),n.setData(t),n}return null},getFontByLookupKey:function(e){var n=this.getAllFonts();return t.find(n,(function(t){return t.lookupKey()==e}))},getCustomFontByName:function(e,t){return this.composite.getChildWithMap(t+".[name="+e+"]")},getFontWithRole:function(e){return l.hasFeature("enable-custom-fonts")?this.getFontsWithRole(e)[0]:(console.warn("Illegalty, custom-font API without feature flag!"),this.getFontWithUniqueRole(e))},getFontsWithRole:function(e){var n=this.composite.acquireNestedChildrenSync("all-fonts"),o=[];return t.each(n,function(t){if(this.hasRole(t,e)){var n=new m;n.setAC(this),n.setData(t),o.push(n)}}.bind(this)),o},getFontWithRoles:function(e){return this.getFontsWithRoles(e)[0]},getFontsWithRoles:function(e){var n=this.composite.acquireNestedChildrenSync("all-fonts"),o=[];return t.each(n,function(n){var i=!1;if(t.each(e,function(e){if(this.hasRole(n,e))return i=!0,!1}.bind(this)),i){var a=new m;a.setAC(this),a.setData(n),o.push(a)}}.bind(this)),o},getFontSubgroups:function(e,n){var o=this.composite.acquireNestedChildrenSync("all-fonts"),i={};return t.each(o,function(t){var o=new m;o.setAC(this),o.setData(t),n&&o.isFauxFont()||(!e||o.isCustomFont()||o.isBodyFont())&&this._organizeBySubgroup(o,i)}.bind(this)),i},_organizeBySubgroup:function(e,t){var n=e.subgroupName(),o=t[n];o?o.push(e):t[n]=new p([e])},getCustomFontSubgroups:function(e,n){var o=this.getCustomFonts(n),i={};return t.each(o,function(t){e&&!t.isBodyFont()||this._organizeBySubgroup(t,i)}.bind(this)),i},getCustomFontSubgroup:function(e,n){var o,i=this.getCustomFonts(n);return t.each(i,function(t){t.subgroupName()==e&&(o?o.push(t):o=new p([t]))}.bind(this)),o},getFontSubgroup:function(e,n){var o,i=this.getAllFonts(n);return t.each(i,function(t){t.subgroupName()==e&&(o?o.push(t):o=new p([t]))}.bind(this)),o},guessCustomBodyFontSet:function(e){var n=this.getCustomFontSubgroup(e),o=this.getCustomBodyFontSet(e),i=new p([]);return t.each(w,function(e){var t=o.getFontWithRole(e),a=-1!=e.search(/bold/i)?700:400,r=-1!=e.search(/italic/i)?"italic":"normal";t||n.each(function(e){if(e.fontWeight()==a&&e.fontStyle()==r)return t=e,!1}.bind(this)),i.add(t)}.bind(this)),i},establishCustomBodyFontSet:function(e){var n=this.getCustomFontSubgroup(e),o=this.getCustomBodyFontSet(e),i=new p([]),a=n.getPropFromFirst("cssName");return t.each(w,function(t){var r=o.getFontWithRole(t),s=-1!=t.search(/bold/i)?700:400,u=-1!=t.search(/italic/i)?"italic":"normal";if(!r&&(n.each(function(e){if(e.fontWeight()==s&&e.fontStyle()==u)return(r=e).addRole(t),!1}.bind(this)),!r)){if("is-body-font"==t)throw new Error("Normal face was not found - cannot establish body font set without a normal face");this.addFauxFont(e,k[t],a,s,u,t)}i.add(r)}.bind(this)),i},getCustomBodyFontSet:function(e){var n=this.getCustomFontSubgroup(e);if(n&&n.length){var o=new p([]);n.at(0);return t.each(w,function(e){var t=n.getFontWithRole(e);t&&o.add(t,{role:e})}.bind(this)),o}},getFontCollectionWithRoles:function(e){var t=this.getFontsWithRoles(e);return new p(t)},generateFontRenditions:function(e){return b.ENABLE_UPLOADED_FONTS_RENDITIONS?n.allSettled([this.generateFontRendition(e,e.friendlyName(),"rendition"),this.generateFontRendition(e,e.faceName(),"face-rendition"),this.generateFontRendition(e,e.subgroupName(),"family-rendition")]):n.resolve()},generateFontRendition:function(e,o,i){var a=n.defer(),r=e.getData(),u=this.composite.getDCXComposite().current.getComponentsOf(r),c=t.find(u,(function(e){return e.name==i}));return e.loadFont().then(function(){var t=v.generateCanvas(e.cssName(),o,{weight:e.fontWeight(),style:e.fontStyle(),padding:2,fnNormal:function(t){return b.getFontNormalized(t,e.getMetrics())}}),n=s(t.toDataURL("image/png"));a.resolve(this.composite.pushComponentWithRetry({type:"image/png",path:i,isUpdate:!!c,parent:r,relationship:"rendition",file:n},"image/png"))}.bind(this)),a.promise},uploadCustomFontMetrics:function(e,t,o){o.category="Spark Client Generated";var i=this.composite.getChildWithMap(t+".[name="+e+"]");return i?(i.getValue("font#data").metrics=o,this.composite.saveChanges(function(e){e.setValue("ac#version",this.CURRENT_AC_VERSION)}.bind(this))):(console.warn("Error: no font wrapper defined in dcx for metrics"),n.reject(new Error("AuthoringContextCls::uploadCustomFontMetrics")))},createFontCollection:function(e){var n=new p;return t.each(e,(function(e){n.add(e)})),n},convertPostFaceToJSON:function(e){return b.convertPostFaceToJSON(e)},convertPostFaceToAC:function(e){return b.convertPostFaceToAC(e)},createOrUpdateFontFiles:function(e,o){var i=this.composite.getDCXComposite(),s=i.current,u=s.getComponentsOf(e),d=t.reduce(u,function(e,t){return e[t.getValue("name")]=t.getValue("id"),e}.bind(this),{}),h=n.defer(),g=function(n,o,i){if(n)return F.error("Upload failed with "+n.message,n),0===u.length?(F.error("Removing newly created font node"),this.removeFontWithNode(e).then((function(){h.reject(n)}))):h.reject(n);var a;if(!!t.find(Object.keys(d),(function(e){return!!d[e]}))){var r=i.absolutePath||"/"+i.path;a=s.getComponentWithAbsolutePath(r),a=s.updateComponentWithUploadResults(a,o)}else a=s.addComponentWithUploadResults(i.name,i.relationship,i.path,e,o)}.bind(this),f=new FormData;f.append("calculateSubsets",l.hasFeature("enable-custom-fonts-subsets")),f.append("compositeId",i.id),f.append("componentList",encodeURIComponent(JSON.stringify(d))),t.each(o,(function(e,t){e&&f.append("file"+t,e)}));var m=c.v4(),p={otf:!0,ttf:!0,woff:!0},b={method:"PUT",url:"/fonts",dataType:"json",data:f,processData:!1,contentType:!1,beforeSend:function(e){e.setRequestHeader("X-Request-Id",m)},success:function(e,n,o){if(200!=o.status&&201!=o.status)return g(new Error("Upload came back with "+o.status+" "+o.responseText));var a=o.responseJSON;t.each(a,(function(e){var t=new r.AdobeDCXComponent._UploadResults(i.id);t.records[e.componentId]=new r.AdobeDCXComponent._UploadRecord(e.componentId,e.etag,e.latestVersion,e.md5,e.size,e.type),g(null,t,{name:e.ext,path:e.ext,relationship:p[e.ext]?"primary":"subset"})})),h.resolve()},error:function(e){return g(e)}};return a.ajax(b),h.promise},createOrUpdateCustomFont:function(e,n,o,i){this.composite.getDCXComposite().current;var a,r,s=this.composite.getChildWithMap("all-fonts.[name="+name+"]");if(!s){a=this.composite.acquireNestedMapSync("all-fonts"),(s=this.composite.addChildPath(void 0,void 0,a)).setValue("name",e+" "+n),s.setValue("type","application/vnd.adobe.element.custom-font+dcx"),s.setValue("ac#application","spark-web"),this.addRole(s,"custom"),r={source:"user-uploaded",subgroupName:e,faceName:n,cssName:o};var u=s.getValue("font#data");s.setValue("font#data",t.extend({},u,r,i||{}))}var c=new m;return c.setAC(this),c.setData(s),c},acquireSparkFont:function(e){var t=this.getFontByLookupKey(e);if(t)return t;var n=this.composite.acquireNestedMapSync("all-fonts"),o=this.composite.addChildPath(void 0,void 0,n);o.setValue("type","application/vnd.adobe.element.font+dcx"),o.setValue("ac#application","spark-web"),o.setValue("font#data",{source:"spark-provided",lookupKey:e});var i=new m;return i.setAC(this),i.setData(o),i},_hrefForCustomFontRenditionAsync:function(e,o){n.defer();var i=this.composite.getDCXComposite().current.getComponentsOf(e),a=t.find(i,(function(e){return"rendition"===e.getValue("rel")&&(!o||e.getValue("path")===o)}));if(a)return this.composite._privateGetComponentHref(a).then((function(e){return e.indexOf("/id/")>=0&&(e=e.replace(/\/id/,"/image_assets")),e}))},getSubsetIdsForCharacterList:function(e){var n={},o=[];return t.each(e,function(e){for(var t=0,i=h.length;t<i;t++){var a=h[t],r=parseInt(a.range[0],16),s=parseInt(a.range[1],16);if(e>=r&&e<=s&&!n[a.id]){n[a.id]=!0,o.push(a.id);break}}}.bind(this)),o},_hrefForCustomFontAsync:function(e,o){var i;if("string"==typeof e)i=this.composite.getChildWithMap("all-fonts.[name="+e+"].!"+o);else{var a=e,r=this.composite.getDCXComposite().current.getComponentsOf(a);if(o)i=t.find(r,(function(e){return e.path==o}));else{var s,u,c=t.filter(r,(function(e){return"primary"==e.getValue("rel")}));if(1==c.length)i=c[0];else t.each(c,(function(e){"otf"==e.name&&(s=e),"ttf"==e.name&&(u=e)})),i=s||u||void 0}}return i?this.composite._privateGetComponentHref(i).then((function(e){e.indexOf("/id/")>=0&&(e=e.replace(/\/id/,"/image_assets"));var t=i.name;return t&&(e+="&mime=application/"+t),e})):n.resolve(null)},getComponentForCustomFont:function(e,n){var o,i=this.composite.getDCXComposite().current,a=e.getData(),r=i.getComponentsOf(a);if(n)o=t.find(r,(function(e){return e.path==n}));else{var s,u,c=t.filter(r,(function(e){return"primary"==e.getValue("rel")}));if(1==c.length)o=c[0];else t.each(c,(function(e){"otf"==e.name&&(s=e),"ttf"==e.name&&(u=e),"ttf"==e.name&&(u=e)})),o=s||u||void 0}return o},getCustomFonts:function(e){var n=this.getFontsWithRole("custom");return e?t.filter(n,(function(e){return!e.isFauxFont()})):n},getDataPageInfo:function(e,t){var n,o=this.composite.getChildWithMap(t);return o&&(n=o.getValue(t+"#data"))?e?n[e]:n:e?"":{}},setDataPageInfo:function(e,o,i,a){var r;return"object"==typeof e?r=e:(r={})[e]=o,this.composite.acquireNestedMap(i,!0).then(function(e){e.setValue("ac#application","spark-web"),e.setValue("type","application/vnd.adobe.spark."+i+"+dcx");var o=e.getValue(i+"#data")||{};return t.each(r,(function(e,t){o[t]=e})),e.setValue(i+"#data",o),a?n.resolve():this.composite.saveChanges(function(e){}.bind(this))}.bind(this))},getViewerPageInfo:function(e){return this.getDataPageInfo(e,"viewerpage")},setViewerPageInfo:function(e,t,n){return this.setDataPageInfo(e,t,"viewerpage",n)},getOutroInfo:function(e){return this.getDataPageInfo(e,"videooutro")},setOutroInfo:function(e,t,n){return this.setDataPageInfo(e,t,"videooutro",n)},fullUpdate:function(){},isFullUpdateNeeded:function(){},validateAndRepair:function(){return n.resolve(this)},upgrade:function(){var e=this.composite.getDCXRoot().getValue("ac#version");if(this.getACVersion(),e>this.CURRENT_AC_VERSION&&window.marvel.logger.traceflow("brand-kit","[BrandKit] found newer brand (v"+e+" > v"+this.CURRENT_AC_VERSION+")."),e<this.CURRENT_AC_VERSION&&l.hasFeature("enable-custom-fonts")){var t=this.composite.getChildWithMap("fonts"),n=this.composite.getChildWithMap("all-fonts");n&&t&&(this.composite.removeChild(n),n=null),t?t.setValue("path","all-fonts"):n||this.composite.acquireNestedMapSync("all-fonts"),this.composite.getDCXRoot().setValue("ac#version",this.CURRENT_AC_VERSION)}return this.validateAndRepair()},getThemeletById:function(e){var n=this.composite.acquireNestedChildrenSync("themes"),o=null;return t.each(n,(function(t,n){t.id===e&&(o=t)})),o},getThemeUpdateInterface:function(){var e=this,o=l.hasFeature("enable-brand-kit-in-progress"),i={};return n.all(t.map(d.apps,(function(t){var n=t.typeName;if(o||l.hasFeature("enable-brand-kit-"+n+"-themes"))return t.getThemeController(e).then((function(e){i[n]=e}))}))).then(function(){var a={themeControllers:i,forEachTheme:function(n){var a=e.composite.acquireNestedChildrenSync("themes"),r=[];return t.each(a,(function(e,t){var a=e.getValue("ac#format");if(o||l.hasFeature("enable-brand-kit-"+a+"-themes")){var s=i[a];r.push(n(e,s))}})),r},getThemesUsingAssets:function(e){var t=[];return a.forEachTheme((function(n,o){if(o.areAssetsUsed&&"function"==typeof o.areAssetsUsed)try{o.areAssetsUsed(n,e)&&t.push({theme:n,themeController:o})}catch(e){console.warn("ignoring exception from format themeController - please fix themeController.areAssetsUsed(theme, assets).",o)}})),t},updateThemesWithAssets:function(e,o){if(o)return n.all(t.map(e,(function(e){var t=e.theme,n=e.themeController;if(n.updateLinkedAssets&&"function"==typeof n.updateLinkedAssets)return n.updateLinkedAssets(t,o)})))},relinkThemesWithAssets:function(e,o){var i;if(o)return i=o[0]&&!t.isArray(o[0])?t.map(o,(function(e){return[e.old,e.new]})):t.extend([],o),n.all(t.map(e,(function(e){var t=e.theme,n=e.themeController;return n.relinkAssetsWithRoles&&"function"==typeof n.relinkAssetsWithRoles?n.relinkAssetsWithRoles(t,o):n.relinkAssets&&"function"==typeof n.relinkAssets?n.relinkAssets(t,i):void 0})))}};return a}.bind(this))}})}.apply(t,o))||(e.exports=i)},2596:function(e){e.exports=JSON.parse('[{"name":"Control characters","id":"control-characters","range":["0000","001F"]},{"name":"Basic Latin","id":"basic-latin","range":["0020","007F"]},{"name":"Latin-1 Supplement","id":"latin-1-supplement","range":["0080","00FF"]},{"name":"Latin Extended-A","id":"latin-extended-a","range":["0100","017F"]},{"name":"Latin Extended-B","id":"latin-extended-b","range":["0180","024F"]},{"name":"IPA Extensions","id":"ipa-extensions","range":["0250","02AF"]},{"name":"Spacing Modifier Letters","id":"spacing-modifier-letters","range":["02B0","02FF"]},{"name":"Combining Diacritical Marks","id":"combining-diacritical-marks","range":["0300","036F"]},{"name":"Greek and Coptic","id":"greek-and-coptic","range":["0370","03FF"]},{"name":"Cyrillic","id":"cyrillic","range":["0400","04FF"]},{"name":"Cyrillic Supplement","id":"cyrillic-supplement","range":["0500","052F"]},{"name":"Armenian","id":"armenian","range":["0530","058F"]},{"name":"Hebrew","id":"hebrew","range":["0590","05FF"]},{"name":"Arabic","id":"arabic","range":["0600","06FF"]},{"name":"Syriac","id":"syriac","range":["0700","074F"]},{"name":"Arabic Supplement","id":"arabic-supplement","range":["0750","077F"]},{"name":"Thaana","id":"thaana","range":["0780","07BF"]},{"name":"NKo","id":"nko","range":["07C0","07FF"]},{"name":"Samaritan","id":"samaritan","range":["0800","083F"]},{"name":"Mandaic","id":"mandaic","range":["0840","085F"]},{"name":"Syriac Supplement","id":"syriac-supplement","range":["0860","086F"]},{"name":"Arabic Extended-A","id":"arabic-extended-a","range":["08A0","08FF"]},{"name":"Devanagari","id":"devanagari","range":["0900","097F"]},{"name":"Bengali","id":"bengali","range":["0980","09FF"]},{"name":"Gurmukhi","id":"gurmukhi","range":["0A00","0A7F"]},{"name":"Gujarati","id":"gujarati","range":["0A80","0AFF"]},{"name":"Oriya","id":"oriya","range":["0B00","0B7F"]},{"name":"Tamil","id":"tamil","range":["0B80","0BFF"]},{"name":"Telugu","id":"telugu","range":["0C00","0C7F"]},{"name":"Kannada","id":"kannada","range":["0C80","0CFF"]},{"name":"Malayalam","id":"malayalam","range":["0D00","0D7F"]},{"name":"Sinhala","id":"sinhala","range":["0D80","0DFF"]},{"name":"Thai","id":"thai","range":["0E00","0E7F"]},{"name":"Lao","id":"lao","range":["0E80","0EFF"]},{"name":"Tibetan","id":"tibetan","range":["0F00","0FFF"]},{"name":"Myanmar","id":"myanmar","range":["1000","109F"]},{"name":"Georgian","id":"georgian","range":["10A0","10FF"]},{"name":"Hangul Jamo","id":"hangul-jamo","range":["1100","11FF"]},{"name":"Ethiopic","id":"ethiopic","range":["1200","137F"]},{"name":"Ethiopic Supplement","id":"ethiopic-supplement","range":["1380","139F"]},{"name":"Cherokee","id":"cherokee","range":["13A0","13FF"]},{"name":"Unified Canadian Aboriginal Syllabics","id":"unified-canadian-aboriginal-syllabics","range":["1400","167F"]},{"name":"Ogham","id":"ogham","range":["1680","169F"]},{"name":"Runic","id":"runic","range":["16A0","16FF"]},{"name":"Tagalog","id":"tagalog","range":["1700","171F"]},{"name":"Hanunoo","id":"hanunoo","range":["1720","173F"]},{"name":"Buhid","id":"buhid","range":["1740","175F"]},{"name":"Tagbanwa","id":"tagbanwa","range":["1760","177F"]},{"name":"Khmer","id":"khmer","range":["1780","17FF"]},{"name":"Mongolian","id":"mongolian","range":["1800","18AF"]},{"name":"Unified Canadian Aboriginal Syllabics Extended","id":"unified-canadian-aboriginal-syllabics-extended","range":["18B0","18FF"]},{"name":"Limbu","id":"limbu","range":["1900","194F"]},{"name":"Tai Le","id":"tai-le","range":["1950","197F"]},{"name":"New Tai Lue","id":"new-tai-lue","range":["1980","19DF"]},{"name":"Khmer Symbols","id":"khmer-symbols","range":["19E0","19FF"]},{"name":"Buginese","id":"buginese","range":["1A00","1A1F"]},{"name":"Tai Tham","id":"tai-tham","range":["1A20","1AAF"]},{"name":"Combining Diacritical Marks Extended","id":"combining-diacritical-marks-extended","range":["1AB0","1AFF"]},{"name":"Balinese","id":"balinese","range":["1B00","1B7F"]},{"name":"Sundanese","id":"sundanese","range":["1B80","1BBF"]},{"name":"Batak","id":"batak","range":["1BC0","1BFF"]},{"name":"Lepcha","id":"lepcha","range":["1C00","1C4F"]},{"name":"Ol Chiki","id":"ol-chiki","range":["1C50","1C7F"]},{"name":"Cyrillic Extended C","id":"cyrillic-extended-c","range":["1C80","1C8F"]},{"name":"Sundanese Supplement","id":"sundanese-supplement","range":["1CC0","1CCF"]},{"name":"Vedic Extensions","id":"vedic-extensions","range":["1CD0","1CFF"]},{"name":"Phonetic Extensions","id":"phonetic-extensions","range":["1D00","1D7F"]},{"name":"Phonetic Extensions Supplement","id":"phonetic-extensions-supplement","range":["1D80","1DBF"]},{"name":"Combining Diacritical Marks Supplement","id":"combining-diacritical-marks-supplement","range":["1DC0","1DFF"]},{"name":"Latin Extended Additional","id":"latin-extended-additional","range":["1E00","1EFF"]},{"name":"Greek Extended","id":"greek-extended","range":["1F00","1FFF"]},{"name":"General Punctuation","id":"general-punctuation","range":["2000","206F"]},{"name":"Superscripts and Subscripts","id":"superscripts-and-subscripts","range":["2070","209F"]},{"name":"Currency Symbols","id":"currency-symbols","range":["20A0","20CF"]},{"name":"Combining Diacritical Marks for Symbols","id":"combining-diacritical-marks-for-symbols","range":["20D0","20FF"]},{"name":"Letterlike Symbols","id":"letterlike-symbols","range":["2100","214F"]},{"name":"Number Forms","id":"number-forms","range":["2150","218F"]},{"name":"Arrows","id":"arrows","range":["2190","21FF"]},{"name":"Mathematical Operators","id":"mathematical-operators","range":["2200","22FF"]},{"name":"Miscellaneous Technical","id":"miscellaneous-technical","range":["2300","23FF"]},{"name":"Control Pictures","id":"control-pictures","range":["2400","243F"]},{"name":"Optical Character Recognition","id":"optical-character-recognition","range":["2440","245F"]},{"name":"Enclosed Alphanumerics","id":"enclosed-alphanumerics","range":["2460","24FF"]},{"name":"Box Drawing","id":"box-drawing","range":["2500","257F"]},{"name":"Block Elements","id":"block-elements","range":["2580","259F"]},{"name":"Geometric Shapes","id":"geometric-shapes","range":["25A0","25FF"]},{"name":"Miscellaneous Symbols","id":"miscellaneous-symbols","range":["2600","26FF"]},{"name":"Dingbats","id":"dingbats","range":["2700","27BF"]},{"name":"Miscellaneous Mathematical Symbols-A","id":"miscellaneous-mathematical-symbols-a","range":["27C0","27EF"]},{"name":"Supplemental Arrows-A","id":"supplemental-arrows-a","range":["27F0","27FF"]},{"name":"Braille Patterns","id":"braille-patterns","range":["2800","28FF"]},{"name":"Supplemental Arrows-B","id":"supplemental-arrows-b","range":["2900","297F"]},{"name":"Miscellaneous Mathematical Symbols-B","id":"miscellaneous-mathematical-symbols-b","range":["2980","29FF"]},{"name":"Supplemental Mathematical Operators","id":"supplemental-mathematical-operators","range":["2A00","2AFF"]},{"name":"Miscellaneous Symbols and Arrows","id":"miscellaneous-symbols-and-arrows","range":["2B00","2BFF"]},{"name":"Glagolitic","id":"glagolitic","range":["2C00","2C5F"]},{"name":"Latin Extended-C","id":"latin-extended-c","range":["2C60","2C7F"]},{"name":"Coptic","id":"coptic","range":["2C80","2CFF"]},{"name":"Georgian Supplement","id":"georgian-supplement","range":["2D00","2D2F"]},{"name":"Tifinagh","id":"tifinagh","range":["2D30","2D7F"]},{"name":"Ethiopic Extended","id":"ethiopic-extended","range":["2D80","2DDF"]},{"name":"Cyrillic Extended-A","id":"cyrillic-extended-a","range":["2DE0","2DFF"]},{"name":"Supplemental Punctuation","id":"supplemental-punctuation","range":["2E00","2E7F"]},{"name":"CJK Radicals Supplement","id":"cjk-radicals-supplement","range":["2E80","2EFF"]},{"name":"Kangxi Radicals","id":"kangxi-radicals","range":["2F00","2FDF"]},{"name":"Ideographic Description Characters","id":"ideographic-description-characters","range":["2FF0","2FFF"]},{"name":"CJK Symbols and Punctuation","id":"cjk-symbols-and-punctuation","range":["3000","303F"]},{"name":"Hiragana","id":"hiragana","range":["3040","309F"]},{"name":"Katakana","id":"katakana","range":["30A0","30FF"]},{"name":"Bopomofo","id":"bopomofo","range":["3100","312F"]},{"name":"Hangul Compatibility Jamo","id":"hangul-compatibility-jamo","range":["3130","318F"]},{"name":"Kanbun","id":"kanbun","range":["3190","319F"]},{"name":"Bopomofo Extended","id":"bopomofo-extended","range":["31A0","31BF"]},{"name":"CJK Strokes","id":"cjk-strokes","range":["31C0","31EF"]},{"name":"Katakana Phonetic Extensions","id":"katakana-phonetic-extensions","range":["31F0","31FF"]},{"name":"Enclosed CJK Letters and Months","id":"enclosed-cjk-letters-and-months","range":["3200","32FF"]},{"name":"CJK Compatibility","id":"cjk-compatibility","range":["3300","33FF"]},{"name":"CJK Unified Ideographs Extension A","id":"cjk-unified-ideographs-extension-a","range":["3400","4DBF"]},{"name":"Yijing Hexagram Symbols","id":"yijing-hexagram-symbols","range":["4DC0","4DFF"]},{"name":"CJK Unified Ideographs","id":"cjk-unified-ideographs","range":["4E00","9FFF"]},{"name":"Yi Syllables","id":"yi-syllables","range":["A000","A48F"]},{"name":"Yi Radicals","id":"yi-radicals","range":["A490","A4CF"]},{"name":"Lisu","id":"lisu","range":["A4D0","A4FF"]},{"name":"Vai","id":"vai","range":["A500","A63F"]},{"name":"Cyrillic Extended-B","id":"cyrillic-extended-b","range":["A640","A69F"]},{"name":"Bamum","id":"bamum","range":["A6A0","A6FF"]},{"name":"Modifier Tone Letters","id":"modifier-tone-letters","range":["A700","A71F"]},{"name":"Latin Extended-D","id":"latin-extended-d","range":["A720","A7FF"]},{"name":"Syloti Nagri","id":"syloti-nagri","range":["A800","A82F"]},{"name":"Common Indic Number Forms","id":"common-indic-number-forms","range":["A830","A83F"]},{"name":"Phags-pa","id":"phags-pa","range":["A840","A87F"]},{"name":"Saurashtra","id":"saurashtra","range":["A880","A8DF"]},{"name":"Devanagari Extended","id":"devanagari-extended","range":["A8E0","A8FF"]},{"name":"Kayah Li","id":"kayah-li","range":["A900","A92F"]},{"name":"Rejang","id":"rejang","range":["A930","A95F"]},{"name":"Hangul Jamo Extended-A","id":"hangul-jamo-extended-a","range":["A960","A97F"]},{"name":"Javanese","id":"javanese","range":["A980","A9DF"]},{"name":"Myanmar Extended-B","id":"myanmar-extended-b","range":["A9E0","A9FF"]},{"name":"Cham","id":"cham","range":["AA00","AA5F"]},{"name":"Myanmar Extended-A","id":"myanmar-extended-a","range":["AA60","AA7F"]},{"name":"Tai Viet","id":"tai-viet","range":["AA80","AADF"]},{"name":"Meetei Mayek Extensions","id":"meetei-mayek-extensions","range":["AAE0","AAFF"]},{"name":"Ethiopic Extended-A","id":"ethiopic-extended-a","range":["AB00","AB2F"]},{"name":"Latin Extended-E","id":"latin-extended-e","range":["AB30","AB6F"]},{"name":"Cherokee Supplement","id":"cherokee-supplement","range":["AB70","ABBF"]},{"name":"Meetei Mayek","id":"meetei-mayek","range":["ABC0","ABFF"]},{"name":"Hangul Syllables","id":"hangul-syllables","range":["AC00","D7AF"]},{"name":"Hangul Jamo Extended-B","id":"hangul-jamo-extended-b","range":["D7B0","D7FF"]},{"name":"High Surrogates","id":"high-surrogates","range":["D800","DB7F"]},{"name":"High Private Use Surrogates","id":"high-private-use-surrogates","range":["DB80","DBFF"]},{"name":"Low Surrogates","id":"low-surrogates","range":["DC00","DFFF"]},{"name":"Private Use Area","id":"private-use-area","range":["E000","F8FF"]},{"name":"CJK Compatibility Ideographs","id":"cjk-compatibility-ideographs","range":["F900","FAFF"]},{"name":"Alphabetic Presentation Forms","id":"alphabetic-presentation-forms","range":["FB00","FB4F"]},{"name":"Arabic Presentation Forms-A","id":"arabic-presentation-forms-a","range":["FB50","FDFF"]},{"name":"Variation Selectors","id":"variation-selectors","range":["FE00","FE0F"]},{"name":"Vertical Forms","id":"vertical-forms","range":["FE10","FE1F"]},{"name":"Combining Half Marks","id":"combining-half-marks","range":["FE20","FE2F"]},{"name":"CJK Compatibility Forms","id":"cjk-compatibility-forms","range":["FE30","FE4F"]},{"name":"Small Form Variants","id":"small-form-variants","range":["FE50","FE6F"]},{"name":"Arabic Presentation Forms-B","id":"arabic-presentation-forms-b","range":["FE70","FEFF"]},{"name":"Halfwidth and Fullwidth Forms","id":"halfwidth-and-fullwidth-forms","range":["FF00","FFEF"]},{"name":"Specials","id":"specials","range":["FFF0","FFFF"]},{"name":"Linear B Syllabary","id":"linear-b-syllabary","range":["10000","1007F"]},{"name":"Linear B Ideograms","id":"linear-b-ideograms","range":["10080","100FF"]},{"name":"Aegean Numbers","id":"aegean-numbers","range":["10100","1013F"]},{"name":"Ancient Greek Numbers","id":"ancient-greek-numbers","range":["10140","1018F"]},{"name":"Ancient Symbols","id":"ancient-symbols","range":["10190","101CF"]},{"name":"Phaistos Disc","id":"phaistos-disc","range":["101D0","101FF"]},{"name":"Lycian","id":"lycian","range":["10280","1029F"]},{"name":"Carian","id":"carian","range":["102A0","102DF"]},{"name":"Coptic Epact Numbers","id":"coptic-epact-numbers","range":["102E0","102FF"]},{"name":"Old Italic","id":"old-italic","range":["10300","1032F"]},{"name":"Gothic","id":"gothic","range":["10330","1034F"]},{"name":"Old Permic","id":"old-permic","range":["10350","1037F"]},{"name":"Ugaritic","id":"ugaritic","range":["10380","1039F"]},{"name":"Old Persian","id":"old-persian","range":["103A0","103DF"]},{"name":"Deseret","id":"deseret","range":["10400","1044F"]},{"name":"Shavian","id":"shavian","range":["10450","1047F"]},{"name":"Osmanya","id":"osmanya","range":["10480","104AF"]},{"name":"Osage","id":"osage","range":["104B0","104FF"]},{"name":"Elbasan","id":"elbasan","range":["10500","1052F"]},{"name":"Caucasian Albanian","id":"caucasian-albanian","range":["10530","1056F"]},{"name":"Linear A","id":"linear-a","range":["10600","1077F"]},{"name":"Cypriot Syllabary","id":"cypriot-syllabary","range":["10800","1083F"]},{"name":"Imperial Aramaic","id":"imperial-aramaic","range":["10840","1085F"]},{"name":"Palmyrene","id":"palmyrene","range":["10860","1087F"]},{"name":"Nabataean","id":"nabataean","range":["10880","108AF"]},{"name":"Hatran","id":"hatran","range":["108E0","108FF"]},{"name":"Phoenician","id":"phoenician","range":["10900","1091F"]},{"name":"Lydian","id":"lydian","range":["10920","1093F"]},{"name":"Meroitic Hieroglyphs","id":"meroitic-hieroglyphs","range":["10980","1099F"]},{"name":"Meroitic Cursive","id":"meroitic-cursive","range":["109A0","109FF"]},{"name":"Kharoshthi","id":"kharoshthi","range":["10A00","10A5F"]},{"name":"Old South Arabian","id":"old-south-arabian","range":["10A60","10A7F"]},{"name":"Old North Arabian","id":"old-north-arabian","range":["10A80","10A9F"]},{"name":"Manichaean","id":"manichaean","range":["10AC0","10AFF"]},{"name":"Avestan","id":"avestan","range":["10B00","10B3F"]},{"name":"Inscriptional Parthian","id":"inscriptional-parthian","range":["10B40","10B5F"]},{"name":"Inscriptional Pahlavi","id":"inscriptional-pahlavi","range":["10B60","10B7F"]},{"name":"Psalter Pahlavi","id":"psalter-pahlavi","range":["10B80","10BAF"]},{"name":"Old Turkic","id":"old-turkic","range":["10C00","10C4F"]},{"name":"Old Hungarian","id":"old-hungarian","range":["10C80","10CFF"]},{"name":"Rumi Numeral Symbols","id":"rumi-numeral-symbols","range":["10E60","10E7F"]},{"name":"Brahmi","id":"brahmi","range":["11000","1107F"]},{"name":"Kaithi","id":"kaithi","range":["11080","110CF"]},{"name":"Sora Sompeng","id":"sora-sompeng","range":["110D0","110FF"]},{"name":"Chakma","id":"chakma","range":["11100","1114F"]},{"name":"Mahajani","id":"mahajani","range":["11150","1117F"]},{"name":"Sharada","id":"sharada","range":["11180","111DF"]},{"name":"Sinhala Archaic Numbers","id":"sinhala-archaic-numbers","range":["111E0","111FF"]},{"name":"Khojki","id":"khojki","range":["11200","1124F"]},{"name":"Multani","id":"multani","range":["11280","112AF"]},{"name":"Khudawadi","id":"khudawadi","range":["112B0","112FF"]},{"name":"Grantha","id":"grantha","range":["11300","1137F"]},{"name":"Newa","id":"newa","range":["11400","1147F"]},{"name":"Tirhuta","id":"tirhuta","range":["11480","114DF"]},{"name":"Siddham","id":"siddham","range":["11580","115FF"]},{"name":"Modi","id":"modi","range":["11600","1165F"]},{"name":"Mongolian Supplement","id":"mongolian-supplement","range":["11660","1167F"]},{"name":"Takri","id":"takri","range":["11680","116CF"]},{"name":"Ahom","id":"ahom","range":["11700","1173F"]},{"name":"Warang Citi","id":"warang-citi","range":["118A0","118FF"]},{"name":"Zanabazar Square","id":"zanabazar-square","range":["11A00","11A4F"]},{"name":"Soyombo","id":"soyombo","range":["11A50","11AAF"]},{"name":"Pau Cin Hau","id":"pau-cin-hau","range":["11AC0","11AFF"]},{"name":"Bhaiksuki","id":"bhaiksuki","range":["11C00","11C6F"]},{"name":"Marchen","id":"marchen","range":["11C70","11CBF"]},{"name":"Masaram Gondi","id":"masaram-gondi","range":["11D00","11D5F"]},{"name":"Cuneiform","id":"cuneiform","range":["12000","123FF"]},{"name":"Cuneiform Numbers and Punctuation","id":"cuneiform-numbers-and-punctuation","range":["12400","1247F"]},{"name":"Early Dynastic Cuneiform","id":"early-dynastic-cuneiform","range":["12480","1254F"]},{"name":"Egyptian Hieroglyphs","id":"egyptian-hieroglyphs","range":["13000","1342F"]},{"name":"Anatolian Hieroglyphs","id":"anatolian-hieroglyphs","range":["14400","1467F"]},{"name":"Bamum Supplement","id":"bamum-supplement","range":["16800","16A3F"]},{"name":"Mro","id":"mro","range":["16A40","16A6F"]},{"name":"Bassa Vah","id":"bassa-vah","range":["16AD0","16AFF"]},{"name":"Pahawh Hmong","id":"pahawh-hmong","range":["16B00","16B8F"]},{"name":"Miao","id":"miao","range":["16F00","16F9F"]},{"name":"Ideographic Symbols and Punctuation","id":"ideographic-symbols-and-punctuation","range":["16FE0","16FFF"]},{"name":"Tangut","id":"tangut","range":["17000","187FF"]},{"name":"Tangut Components","id":"tangut-components","range":["18800","18AFF"]},{"name":"Kana Supplement","id":"kana-supplement","range":["1B000","1B0FF"]},{"name":"Kana Extended-A","id":"kana-extended-a","range":["1B100","1B12F"]},{"name":"Nushu","id":"nushu","range":["1B170","1B2FF"]},{"name":"Duployan","id":"duployan","range":["1BC00","1BC9F"]},{"name":"Shorthand Format Controls","id":"shorthand-format-controls","range":["1BCA0","1BCAF"]},{"name":"Byzantine Musical Symbols","id":"byzantine-musical-symbols","range":["1D000","1D0FF"]},{"name":"Musical Symbols","id":"musical-symbols","range":["1D100","1D1FF"]},{"name":"Ancient Greek Musical Notation","id":"ancient-greek-musical-notation","range":["1D200","1D24F"]},{"name":"Tai Xuan Jing Symbols","id":"tai-xuan-jing-symbols","range":["1D300","1D35F"]},{"name":"Counting Rod Numerals","id":"counting-rod-numerals","range":["1D360","1D37F"]},{"name":"Mathematical Alphanumeric Symbols","id":"mathematical-alphanumeric-symbols","range":["1D400","1D7FF"]},{"name":"Sutton SignWriting","id":"sutton-signwriting","range":["1D800","1DAAF"]},{"name":"Glagolitic Supplement","id":"glagolitic-supplement","range":["1E000","1E02F"]},{"name":"Mende Kikakui","id":"mende-kikakui","range":["1E800","1E8DF"]},{"name":"Adlam","id":"adlam","range":["1E900","1E95F"]},{"name":"Arabic Mathematical Alphabetic Symbols","id":"arabic-mathematical-alphabetic-symbols","range":["1EE00","1EEFF"]},{"name":"Mahjong Tiles","id":"mahjong-tiles","range":["1F000","1F02F"]},{"name":"Domino Tiles","id":"domino-tiles","range":["1F030","1F09F"]},{"name":"Playing Cards","id":"playing-cards","range":["1F0A0","1F0FF"]},{"name":"Enclosed Alphanumeric Supplement","id":"enclosed-alphanumeric-supplement","range":["1F100","1F1FF"]},{"name":"Enclosed Ideographic Supplement","id":"enclosed-ideographic-supplement","range":["1F200","1F2FF"]},{"name":"Miscellaneous Symbols and Pictographs","id":"miscellaneous-symbols-and-pictographs","range":["1F300","1F5FF"]},{"name":"Emoticons (Emoji)","id":"emoticons-(emoji)","range":["1F600","1F64F"]},{"name":"Ornamental Dingbats","id":"ornamental-dingbats","range":["1F650","1F67F"]},{"name":"Transport and Map Symbols","id":"transport-and-map-symbols","range":["1F680","1F6FF"]},{"name":"Alchemical Symbols","id":"alchemical-symbols","range":["1F700","1F77F"]},{"name":"Geometric Shapes Extended","id":"geometric-shapes-extended","range":["1F780","1F7FF"]},{"name":"Supplemental Arrows-C","id":"supplemental-arrows-c","range":["1F800","1F8FF"]},{"name":"Supplemental Symbols and Pictographs","id":"supplemental-symbols-and-pictographs","range":["1F900","1F9FF"]},{"name":"CJK Unified Ideographs Extension B","id":"cjk-unified-ideographs-extension-b","range":["20000","2A6DF"]},{"name":"CJK Unified Ideographs Extension C","id":"cjk-unified-ideographs-extension-c","range":["2A700","2B73F"]},{"name":"CJK Unified Ideographs Extension D","id":"cjk-unified-ideographs-extension-d","range":["2B740","2B81F"]},{"name":"CJK Unified Ideographs Extension E","id":"cjk-unified-ideographs-extension-e","range":["2B820","2CEAF"]},{"name":"CJK Unified Ideographs Extension F","id":"cjk-unified-ideographs-extension-f","range":["2CEB0","2EBEF"]},{"name":"CJK Compatibility Ideographs Supplement","id":"cjk-compatibility-ideographs-supplement","range":["2F800","2FA1F"]},{"name":"Tags","id":"tags","range":["E0000","E007F"]},{"name":"Variation Selectors Supplement","id":"variation-selectors-supplement","range":["E0100","E01EF"]}]')},2597:function(e,t,n){var o,i;o=[n(3),n(0),n(1),n(621),n(517)],void 0===(i=function(e,t,n,o,i){"use strict";return o.extend({type:"color",valueProp:"color#data",friendlyName:function(){return this._data.getValue("name")},setPrivate:function(){return this._data.setValue("private",!0)},generateName:function(){this.setName(i.nameThatColor(this.rgb()))},isBaseColor:function(){return t.includes(this.getRoles()||[],"base-color")},isDerived:function(){return t.includes(this.getRoles()||[],"derived")},setRGB:function(e){var t={mode:"RGB",value:e};this._data.setValue("type","application/vnd.adobe.color+json"),this._data.setValue("color#data",t),this._data.setValue("ac#application","spark-web")},setHex:function(e){this.setRGB(i.hexToRgb(e))},getValue:function(){return this.rgb()},rgb:function(){var e=this._getValue();return e?e.value:{r:0,g:0,b:0}},hex:function(){return i.rgbToHex(this.rgb())},hsl:function(){return i.rgbToHsl(this.rgb())},lightened:function(e){return i.lighten(this.rgb(),e)}})}.apply(t,o))||(e.exports=i)},2598:function(e,t,n){var o,i;o=[n(3),n(0),n(1),n(621),n(93)],void 0===(i=function(e,t,n,o,i){"use strict";return o.extend({type:"font",valueProp:"font#data",friendlyName:function(){return this._data.getValue("name")},getFontFaceName:function(e,t){return t||console.warn("NOTE: AuthoringContextFont.getFontFaceName() has been deprecated - use AuthoringContextFont.getFontFace() instead."),i.getFont(e||this.getLookupKey()).then((function(e){return e&&e.face?e.face.metrics.family:""}))},getFontSubgroupName:function(e,t){return t||console.warn("NOTE: AuthoringContextFont.getFontSubgroupName() has been deprecated - use AuthoringContextFont.getFontSubgroup() instead."),i.getFont(e||this.getLookupKey()).then((function(e){return e&&e.face?e.subgroup.name+" "+e.face.name:""}))},getFontFace:function(e){return i.getFont(e||this.getLookupKey()).then((function(e){return e&&e.subgroup&&e.face?e.subgroup.name+" "+e.face.name:""}))},getFontSubgroup:function(e){return i.getFont(e||this.getLookupKey()).then((function(e){return e&&e.subgroup?e.subgroup.name:""}))},getLookupKey:function(){var e=this._getValue();if(e)return e.lookupKey},setLookupKey:function(e){var t=this._getValue();"object"==typeof e&&"tk-synced"===e.type?this._setTypekitSyncedFont(e,t):t.lookupKey=e,this.setValue(t)},_setTypkitSyncedFont:function(e,t){console.warn("set synced font info",e),t.lookupKey=null,t.source="tk-synced"},getCSSName:function(e){return i.getFont(e||this.getLookupKey()).then((function(e){return e?e.subgroup.cssName:""}))},getInfo:function(e){return n.all([this.getFontFaceName(e,!0),this.getFontSubgroupName(e,!0),this.getCSSName(e),this.getFontStyles(e),this.getFontFace(e),this.getFontSubgroup(e)]).spread(function(t,n,o,i,a,r){return{acFont:this,id:e||this.getId(),lookupKey:e||this.getLookupKey(),faceName:t,subgroupName:n,cssName:o,fontStyle:i.style,fontWeight:i.weight,face:a,subgroup:r}}.bind(this))},getFontStyles:function(e){return i.getFont(e||this.getLookupKey()).then((function(e){if(e&&e.face){var t=e.face.typekitKey.split("");return{style:{i:"italic",n:"normal"}[t[0]],weight:{1:100,2:200,3:300,4:400,5:500,6:600,7:700,8:800,9:900}[t[1]]}}}))}})}.apply(t,o))||(e.exports=i)},2599:function(e,t,n){n(0);var o,i,a,r=n(2600),s=n(1),u=!1;try{u=!!window}catch(e){}e.exports&&!u||(o=n(4),i=o.cps,a=o.key);e.exports=function(e,t){return r.extend({host:i,endPoints:{resource:"/api/v2/resources/:resourcePath",resourceS3:"/api/v2/resources/:resourcePath/\\:S3",resourceMetadata:"/api/v2/resources/:resourcePath/\\:metadata",alias:"/api/v2/"+e+"/alias",asset:"/api/v2/"+e+"/assets/:assetId",assets:"/api/v2/"+e+"/assets",health:"/api/v2/health",videoEmbed:"/api/v2/"+e+"/assets/:asset_id/video/embed",website:"/api/v2/"+e+"/assets/:asset_id/website",site:"/content/2/site/:assetId/:itemPath",like:"/api/v2/"+e+"/assets/:assetId/likes",unlike:"/api/v2/"+e+"/assets/:assetId/likes",report:"/api/v2/"+e+"/assets/:assetId/report",artwork:"/api/v2/"+e+"/assets/:assetId/artwork",original:"/api/v2/"+e+"/assets/:assetId/original",originalForPath:"/api/v2/"+e+"/assets/:assetId/original/:path",originalForPathAndVersion:"/api/v2/"+e+"/assets/:assetId/original/:path/version/:version",serverCopy:"/api/v2/resources/:resourcePath/\\:copy"},protocol:"https:",defaultParams:{api_key:a},getResourceMetadata:function(e,t){return this.request({method:"GET",url:this.url("resourceMetadata",{},e),token:t})},checkAsset:function(e){return this.request({method:"GET",url:this.url("asset",{},e)}).then((function(e){return 200==e.statusCode}))},getAsset:function(e){return this.request({method:"GET",url:this.url("asset",{},e)})},getOriginalForPath:function(e,t,n){var o;return o=n?this.url("originalForPathAndVersion",{},e,t,n):this.url("originalForPath",{},e,t),this.request({method:"GET",url:o})},getMetadata:function(e){return this.request({method:"GET",url:this.url("asset",{},e)}).then((function(e){return e.body}))},checkResource:function(e,t){return this.request({method:"GET",url:this.url("resourceS3",{},e),token:t}).then((function(e){return 200==e.statusCode}))},uploadResource:function(e,n,o,i,a){var r={"Content-Type":n};i&&(r["If-Match"]="*");var s={method:"PUT",url:this.url("resource",{},e),body:o,headers:r,token:a};return"application/json"==n&&(s.json=!0),this.request(s).then((function(e){return t?e:e.body}))},publishAsset:function(e,n,o,i,a,r){var s,u,c;return o?(u="PUT",c=this.url("asset",{},o),s=i):(u="POST",c=this.url("assets"),s={resource_path:e,resource_type:n,metadata:i}),this.request({method:u,url:c,json:!0,body:s,token:a,serviceToken:r}).then((function(e){if(t)return e;var n=e.headers.Location||e.headers.location;if(n){var i=n.replace(/\/*$/,"").split("/");o=i[i.length-1]}return o}))},updateMetadata:function(e,t){return this.publishAsset(void 0,void 0,e,t)},serverSideCopy:function(e,t){if(!t||!t.length)return s.resolve([]);var n=s.defer(),i=function(e){this.request({method:"GET",url:e+"?api_key="+o.key}).then((function(t){var o=t.body;"in_progress"==o.status||"queued"==o.status?setTimeout((function(){i(e)}),500):"done"==o.status?n.resolve(o.outputs):"failed"==o.status?n.reject(new Error("CP server side copy failed with error code: "+o.error_code)):n.reject(new Error("CP server side copy returned illegal status: "+o.status+" : url:"+t.responseURL))})).catch((function(e){n.reject(new Error("CP server side copy failed with error: "+e.message+" "+e.stack))}))}.bind(this);return this.request({method:"POST",url:this.url("serverCopy",{},e),json:!0,body:{copy:{files:t}}}).then((function(e){var t=e.headers.Location||e.headers.location;i(t)})),n.promise},updateArtwork:function(e,t,n){return this.request({method:"PUT",url:this.url("artwork",{},e),token:n,json:!0,body:{resource_path:t}})},reserveAlias:function(e){return this.request({method:"POST",url:this.url("alias",{}),token:e}).then((function(e){if(console.log({type:"pageServerPublish",message:"alias was not passed in meaning we need to reserve one. got: "+e.body.alias}),200==e.statusCode)return e.body.alias;throw new Error("CP came back with "+e.statusCode+" "+e.body)}))}})}},2600:function(e,t,n){var o,i=n(0),a=n(1);function r(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}var s=n(2601),u=!1;try{u=!!window}catch(e){}if(e.exports&&!u)o=function(e){return a.resolve(e)};else{var c=n(7);o=function(){return c.getAccessToken()}}var d={methods:{setHost:function(e){this.host=e},setDefaultParams:function(e){this.defaultParams=e},setProtocol:function(e){this.protocol=e},url:function(e,t){var n=Array.prototype.slice.call(arguments);if(e=this.endPoints[e]){var o,a=2,r=!1,s=e.replace(/[^\\]{1}\:([^\/]*)/g,(function(e,t){if("string"==typeof(o=n[a++])||"number"==typeof o)return"/"+o;r=!0}));if(s=s.replace(/\\\:/,":"),a>2&&a!=n.length)throw new Error("URL helper must be called with same number of path params to match endpoint string");if(r)throw new Error("URL helper must be called with string arguments only");t=i.extend({},this.defaultParams,t||{});var u="";for(var c in a=0,t)t.hasOwnProperty(c)&&(u+=(a?"&":"?")+c+"="+t[c],a++);return(this.protocol||"http:")+"//"+this.host+s+u}},request:function(e){var t=i.extend({},e),n=i.extend({},t.headers),u=r()+r()+"-"+r()+"-"+r()+"-"+r()+"-"+r()+r()+r();n["X-Request-Id"]=u,t.json&&(n["Content-Type"]="application/json",t.body=JSON.stringify(t.body)),delete t.json;t.method,t.url;return o(t.token).then(function(e){return t.serviceToken?(n["X-User-Token"]=e,n.Authorization=t.serviceToken):n.Authorization=e,delete t.token,delete t.serviceToken,t.headers=n,function(e){var t=a.defer();return s(e,(function(e,n){e?t.reject(e):t.resolve(n)})),t.promise}(t)}.bind(this)).then((function(e){var t;try{t=JSON.parse(e.body)}catch(n){t=e.body}return e.body=t,!e.headers&&e.getAllResponseHeaders&&(e.headers=function(e){var t={};if(!e)return t;for(var n=(e=e.replace(/^(\r?\n)*/,"")).split("\r\n"),o=0;o<n.length;o++){var i=n[o],a=i.indexOf(": ");if(a>0){var r=i.substring(0,a),s=i.substring(a+2);t[r]=s}}return t}(e.getAllResponseHeaders())),e}))}},mixin:function(e){return e.prototype=i.extend(e.prototype,d.methods),e},extend:function(e){return i.extend(e,d.methods)}};e.exports=d},2601:function(e,t,n){var o,i,a;i=[],void 0===(a="function"==typeof(o=function(){var e=XMLHttpRequest;if(!e)throw new Error("missing XMLHttpRequest");function t(a,r){if("function"!=typeof r)throw new Error("Bad callback given: "+r);if(!a)throw new Error("No options given");var s=a.onResponse;if((a="string"==typeof a?{uri:a}:JSON.parse(JSON.stringify(a))).onResponse=s,a.verbose&&(t.log=function(){var e,t,n={},a=["trace","debug","info","warn","error"];for(t=0;t<a.length;t++)n[e=a[t]]=o,"undefined"!=typeof console&&console&&console[e]&&(n[e]=i(console,e));return n}()),a.url&&(a.uri=a.url,delete a.url),!a.uri&&""!==a.uri)throw new Error("options.uri is a required argument");if("string"!=typeof a.uri)throw new Error("options.uri must be a string");for(var u=["proxy","_redirectsFollowed","maxRedirects","followRedirect"],c=0;c<u.length;c++)if(a[u[c]])throw new Error("options."+u[c]+" is not supported");if(a.callback=r,a.method=a.method||"GET",a.headers=a.headers||{},a.body=a.body||null,a.timeout=a.timeout||t.DEFAULT_TIMEOUT,a.headers.host)throw new Error("Options.headers.host is not supported");a.json&&(a.headers.accept=a.headers.accept||"application/json","GET"!==a.method&&(a.headers["content-type"]="application/json"),"boolean"!=typeof a.json?a.body=JSON.stringify(a.json):"string"!=typeof a.body&&(a.body=JSON.stringify(a.body)));var d=function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t.join("&")};if(a.qs){var l="string"==typeof a.qs?a.qs:d(a.qs);-1!==a.uri.indexOf("?")?a.uri=a.uri+"&"+l:a.uri=a.uri+"?"+l}if(a.form){if("string"==typeof a.form)throw"form name unsupported";if("POST"===a.method){var h=(a.encoding||"application/x-www-form-urlencoded").toLowerCase();switch(a.headers["content-type"]=h,h){case"application/x-www-form-urlencoded":a.body=d(a.form).replace(/%20/g,"+");break;case"multipart/form-data":var g=function(e){var t={};t.boundry="-------------------------------"+Math.floor(1e9*Math.random());var n=[];for(var o in e)e.hasOwnProperty(o)&&n.push("--"+t.boundry+'\nContent-Disposition: form-data; name="'+o+'"\n\n'+e[o]+"\n");return n.push("--"+t.boundry+"--"),t.body=n.join(""),t.length=t.body.length,t.type="multipart/form-data; boundary="+t.boundry,t}(a.form);a.body=g.body,a.headers["content-type"]=g.type;break;default:throw new Error("unsupported encoding:"+h)}}}return a.onResponse=a.onResponse||o,!0===a.onResponse&&(a.onResponse=r,a.callback=o),!a.headers.authorization&&a.auth&&(a.headers.authorization="Basic "+function(e){var t,n,o,i,a,r,s,u,c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",d=0,l=0,h="",g=[];if(!e)return e;do{t=e.charCodeAt(d++),n=e.charCodeAt(d++),o=e.charCodeAt(d++),i=(u=t<<16|n<<8|o)>>18&63,a=u>>12&63,r=u>>6&63,s=63&u,g[l++]=c.charAt(i)+c.charAt(a)+c.charAt(r)+c.charAt(s)}while(d<e.length);switch(h=g.join(""),e.length%3){case 1:h=h.slice(0,-2)+"==";break;case 2:h=h.slice(0,-1)+"="}return h}(a.auth.username+":"+a.auth.password)),function(o){var i=new e,a=!1,r=function(e){var t,n=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+))?)?/;try{t=location.href}catch(e){(t=document.createElement("a")).href="",t=t.href}var o=n.exec(t.toLowerCase())||[],i=n.exec(e.toLowerCase());return!(!i||i[1]==o[1]&&i[2]==o[2]&&(i[3]||("http:"===i[1]?80:443))==(o[3]||("http:"===o[1]?80:443)))}(o.uri),s="withCredentials"in i;if(n+=1,i.seq_id=n,i.id=n+": "+o.method+" "+o.uri,i._id=i.id,r&&!s){var u=new Error("Browser does not support cross-origin request: "+o.uri);return u.cors="unsupported",o.callback(u,i)}i.timeoutTimer=setTimeout((function(){a=!0;var e=new Error("ETIMEDOUT");return e.code="ETIMEDOUT",e.duration=o.timeout,t.log.error("Timeout",{id:i._id,milliseconds:o.timeout}),o.callback(e,i)}),o.timeout);var c={response:!1,loading:!1,end:!1};return i.onreadystatechange=function(n){if(a)return t.log.debug("Ignoring timed out state change",{state:i.readyState,id:i.id});if(t.log.debug("State change",{state:i.readyState,id:i.id,timed_out:a}),i.readyState===e.OPENED)for(var r in t.log.debug("Request started",{id:i.id}),o.headers)i.setRequestHeader(r,o.headers[r]);else i.readyState===e.HEADERS_RECEIVED?d():i.readyState===e.LOADING?(d(),l()):i.readyState===e.DONE&&(d(),l(),function(){if(!c.end){if(c.end=!0,t.log.debug("Request done",{id:i.id}),i.body=i.responseText,o.json)try{i.body=JSON.parse(i.responseText)}catch(e){return o.callback(e,i)}o.callback(null,i,i.body)}}())},i.open(o.method,o.uri,!0),r&&(i.withCredentials=!!o.withCredentials),i.send(o.body),i;function d(){if(!c.response){if(c.response=!0,t.log.debug("Got response",{id:i.id,status:i.status}),clearTimeout(i.timeoutTimer),i.statusCode=i.status,r&&0==i.statusCode){var e=new Error("CORS request rejected: "+o.uri);return e.cors="rejected",c.loading=!0,c.end=!0,o.callback(e,i)}o.onResponse(null,i)}}function l(){c.loading||(c.loading=!0,t.log.debug("Response body loading",{id:i.id}))}}(a)}t.log={trace:o,debug:o,info:o,warn:o,error:o};var n=0;function o(){}function i(e,t){return function(n,o){return"object"==typeof o&&(n+=" "+JSON.stringify(o)),e[t].call(e,n)}}return t.withCredentials=!1,t.DEFAULT_TIMEOUT=18e4,t.defaults=function(e,n){var o=function(t){return function(n,o){for(var i in n="string"==typeof n?{uri:n}:JSON.parse(JSON.stringify(n)),e)void 0===n[i]&&(n[i]=e[i]);return t(n,o)}},i=o(t);return i.get=o(t.get),i.post=o(t.post),i.put=o(t.put),i.head=o(t.head),i},["get","put","post","head"].forEach((function(e){var n=e.toUpperCase();t[e.toLowerCase()]=function(e){"string"==typeof e?e={method:n,uri:e}:(e=JSON.parse(JSON.stringify(e))).method=n;var o=[e].concat(Array.prototype.slice.apply(arguments,[1]));return t.apply(this,o)}})),t.couch=function(e,n){return"string"==typeof e&&(e={uri:e}),e.json=!0,e.body&&(e.json=e.body),delete e.body,n=n||o,t(e,(function(e,t,o){if(e)return n(e,t,o);if((t.statusCode<200||t.statusCode>299)&&o.error){for(var i in e=new Error("CouchDB error: "+(o.error.reason||o.error.error)),o)e[i]=o[i];return n(e,t,o)}return n(e,t,o)}))},t})?o.apply(t,i):o)||(e.exports=a)},2602:function(e,t,n){var o,i;o=[n(3),n(0),n(1),n(621),n(517)],void 0===(i=function(e,t,n,o,i){"use strict";return o.extend({type:"logo",valueProp:void 0,setContext:function(e){this._context=e},getHrefAsync:function(e,t){t=t||"image/png";var o=this._context,i=this.getData();if(o){var a=o.composite.getChildWithMap("logos."+i.getValue("path")+".!image");if(a)return o.composite.getImageComponentHref(a,e,t)}return n.resolve(null)},load:function(e,t){var o=n.defer();return this.getHrefAsync(e,t).then(function(e){var t=new Image;t.onload=function(){o.resolve(e)},t.onerror=function(e){o.reject(e)},e?t.src=e:(console.warn("href for logo "+this.getId()+" could not be found"),o.resolve(void 0))}.bind(this)).catch((function(e){o.reject(e)})),o.promise}})}.apply(t,o))||(e.exports=i)},366:function(e,t,n){var o,i;o=[n(3),n(0),n(2),n(1),n(48),n(21)],void 0===(i=function(e,t,o,i,a,r){"use strict";return new(a.extend({typeName:"authoring-context",getProjectName:function(e,t){return e.get("name")||this.getSetting("newDocName")},getConfig:function(){return{syncGroup:"adobe-spark-authoring-contexts",scope:"authoring-context",newDocName:"My Authoring Context",doctype:"application/vnd.adobe.authoringcontext.document+dcx",displayName:"Authoring Context"}},isaProjectFormat:function(){return!1},lazyLoad:function(e){n.e("authoring-context").then(function(t){var o=n(431);this.setStorageImpl(o),e.resolve()}.bind(this).bind(null,n)).catch(n.oe)},usesContentModifiedEtags:function(){return!1},resolveConflict:function(e,t,o,i){return n.e("brand-kit-conflict-resolver").then(function(a){var s=n(455);s.muiStorage=r,s.resolveConflict(e,t,o,i)}.bind(null,n)).catch(n.oe),!0}}))}.apply(t,o))||(e.exports=i)},431:function(e,t,n){var o,i;o=[n(0),n(1),n(89)],void 0===(i=function(e,t,n){return new(n.extend({_startingCreateDoc:function(){this.loadDocumentPromise=null}}))}.apply(t,o))||(e.exports=i)},434:function(e,t,n){var o,i;o=[n(3),n(0),n(1),n(2),n(21),n(9),n(7),n(1692),n(366),n(431),n(64)],void 0===(i=function(e,t,n,o,i,a,r,s,u,c,d){"use strict";return new(o.Model.extend({initialize:function(){this._factories=[],this._pendingPromises=[],this.authoringContextFactoryCreate=this.authoringContextFactoryCreate.bind(this)},setGlobalActiveContext:function(e){try{window.localStorage&&(e?window.localStorage.setItem("ac-active-id-"+r.getProfile().userId,e):window.localStorage.removeItem("ac-active-id-"+r.getProfile().userId))}catch(t){this._backupActiveContextId=e}},getGlobalActiveContext:function(){var e;try{window.localStorage&&(e=window.localStorage.getItem("ac-active-id-"+r.getProfile().userId))}catch(t){e=this._backupActiveContextId}return e?this.getContextById(e):this.getDefaultContext()},addAuthoringContextFactory:function(e){this._factories.push(e)},authoringContextFactoryCreate:function(e){var n;return t.each(this._factories,function(t){t.supportsComposite(e)&&(n=t.create())}.bind(this)),n||(n=new s),n.setComposite(e),n},getContextList:function(e){return d.load().then(function(n){return u.load().then(function(){return n.ACPSparkController.listAuthoringContexts(this.authoringContextFactoryCreate).then(function(n){var o=[];t.each(n,(function(t){!t||!t.composite||"INCOMING"===t.composite.getCollaboration()&&e||o.push(t)}));var i=t.filter(o,(function(e){return e.activated()})),r=i&&i.length;return a.trackEvent("brandsLoaded",{numActivatedBrands:r},"organizer"),o}.bind(this))}.bind(this))}.bind(this))},sortContextList:function(e){return e.sort((function(e,t){return e.isDefault()?-1:t.isDefault()?1:e.getName().localeCompare(t.getName())})),e},operationPending:function(e){this._pendingPromises.push(e)},getPendingPromises:function(){return this._pendingPromises},getActivatedContextsByType:function(e,n){return this.getContextList(n).then(function(e){var n=[];return t.each(e,function(e){e.activated()&&n.push(e)}.bind(this)),n}.bind(this))},getContextsByType:function(e,n,o){return this.getContextList(n).then(function(n){var i=[];return t.each(n,function(t){t.getType()===e&&i.push(t)}.bind(this)),o&&this.sortContextList(i),i}.bind(this))},getDefaultContext:function(e){return this.getContextsByType(e,!0).then((function(e){var n=t.find(e,(function(e){return e.isDefault()}));return n?n.upgrade():null}))},setDefaultContext:function(e){var o=e.getType();return this.getContextsByType(o,!0).then((function(o){return n.all(t.map(o,(function(e){return e.composite.getDCXRoot().setValue("ac#default",!1),e.save()}))).then((function(){return e.composite.getDCXRoot().setValue("ac#default",!0),e.save()}))}))},createContext:function(e,t){return window.marvel.logger.debug("[AuthoringContextController] createContext started"),c.createDocument({}).then(function(n){var o,i=n.getDCXRoot();return n.setName(e),i.setValue("ac#type",t),i.setValue("ac#version",s.prototype.getACVersion()),(o=this.authoringContextFactoryCreate(n)).save().then((function(){return window.marvel.logger.debug("[AuthoringContextController] createContext saved"),d.load().then((function(e){return e.SparkStorageLoader.invalidateAuthoringContextCache().then((function(){return window.marvel.logger.debug("[AuthoringContextController] trigger 'authoring-context-added' event"),window.marvel.events.trigger("authoring-context-added",o),o}))}))}))}.bind(this))},deleteContext:function(e){return e.delete().then(function(){return window.marvel.events.trigger("authoring-context-deleted",e),n.resolve()}.bind(this))},getContextById:function(e){return e?this.getContextList().then(function(o){var i;return t.each(o,function(t){t.getId()!==e&&t.getURN()!==e||(i=t)}.bind(this)),i?i.upgrade():n.resolve(null)}.bind(this)):n.resolve(null)},getActiveContext:function(e){if(e){var o=e.getMyApp();if(o){var i=o.getAuthoringContextId(e);return i?this.getContextList().then(function(o){var a=null;return t.each(o,function(e){e.getId()!==i&&e.getURN()!==i||(a=e)}.bind(this)),a||(window.marvel.logger.warn("failed to find active AuthoringContext for "+e.get("id")+" with AC.id == "+i),n.resolve(null))}.bind(this)):n.resolve(null)}return window.marvel.logger.warn("[AuthoringContextController] null app in getActiveContext doc# "+e.get("id")),n.resolve(null)}return window.marvel.logger.warn("[AuthoringContextController] null doc in getActiveContext"),n.resolve(null)},setActiveContext:function(e,t){if(e&&e.belongsToUser()){var o=null;return e&&(o=e.getId()),t.getMyApp().setAuthoringContextId(t,o)}return n.resolve(null)},setLastPublishedContext:function(e,t){var n=null;return e&&(n=e.getId()),t.getMyApp().setLastPublishedAuthoringContextId(t,n)},deleteAllUnactivatedContexts:function(){return this.getContextList(!0).then(function(e){return n.all(t.reduce(e,(function(e,t){return t.activated()||e.push(t.delete()),e}),[]))}.bind(this))}}))}.apply(t,o))||(e.exports=i)},443:function(e,t,n){var o,i;o=[n(3),n(0),n(1),n(2),n(10),n(973),n(40),n(8),n(4),n(1692),n(434),n(38),n(2599),n(596),n(128),n(517),n(93),n(548),n(16),n(2602)],void 0===(i=function(e,t,n,o,i,a,r,s,u,c,d,l,h,g,f,m,p,b,y,v){"use strict";var C,F=new i.default({color:"#0000ff",name:"brand-kit"}),w=u.brandedChromeCommunity,k=h(w),A=["chrome-preloader-logo","chrome-header-logo","chrome-footer-logo"],N=["primary-logo","generated-logo","chrome-header-logo","chrome-footer-logo","chrome-preloader-logo","post-stamp","outro-logo"],S=["headerCTAEnabled","footerCTAEnabled","headerCTA","footerCTA","headerCTAURL","footerCTAURL","headerCTAButtonStyle","footerCTAButtonStyle","facebookURL","twitterURL","instagramURL"],x={page:3,video:3,post:0},R={page:3,video:3,post:23},K={page:3,video:3,post:23};return C=c.extend({initialize:function(){c.prototype.initialize.apply(this,arguments)},getDefaultName:function(){var e=window.adobeIMS.getUserProfile().first_name||"";return e?e+"'s Brand":"My Brand"},getSetupPercentDone:function(){return n.all([this.getLogoWithUniqueRole("primary-logo"),this.getColorWithUniqueRole("base-color"),this.getFontWithUniqueRole("headline-font")]).spread(function(e,t,n){return(!!e+!!t+!!n)/3}.bind(this))},deleteAuthoringContextLogo:function(e){return this.deleteLogo(e.getData())},deleteLogo:function(e){return this.deleteNamedImageAsset(e,l.LOGOS_PARENT)},getLogos:function(){return this.composite.acquireNestedChildren(l.LOGOS_PARENT,!0).then(function(e){return e||[]}.bind(this))},getLogosSync:function(){return this.composite.acquireNestedChildrenSync(l.LOGOS_PARENT)},convertLogoToAuthoringContextLogo:function(e){var t=new v;return t.setContext(this),t.setData(e),t},getAuthoringContextLogos:function(){return this.composite.acquireNestedChildren(l.LOGOS_PARENT,!0).then(function(e){return t.map(e,function(e){return this.convertLogoToAuthoringContextLogo(e)}.bind(this))}.bind(this))},getLogoHref:function(e,t,o){return o=o||"image/png",this.getAssetWithUniqueRole(l.LOGOS_PARENT,t||"primary-logo").then(function(t){return t?this.hrefForImage(l.LOGOS_PARENT,t,e,o||"image/png"):n.resolve(null)}.bind(this))},getThumbnailURL:function(e){return this.getLogoHref(e||200)},_removeLogoWithRole:function(e){var t,n,o=this.getLogoWithRoleSync(e);o&&(t=l.LOGOS_PARENT+"."+o.getValue("path")+".!image",(n=this.composite.getChildWithMap(t))&&(this.composite.getDCXComposite().current.removeComponent(n),this.save(),console.warn("Removed the component with "+e)))},hasLogoWithRole:function(e){var t,n=this.getLogoWithRoleSync(e);return!(!n||(t=l.LOGOS_PARENT+"."+n.getValue("path")+".!image",!this.composite.getChildWithMap(t)))},getLogoWithRoleSync:function(e){var n=this.composite.acquireNestedChildrenSync(l.LOGOS_PARENT);return t.find(n,function(t){return this.hasRole(t,e)}.bind(this))},getLogoWithUniqueRole:function(e){return this.getAssetWithUniqueRole("logos",e).then(function(e){if(e){var t=new v;return t.setContext(this),t.setData(e),t}return null}.bind(this))},getChromeInfo:function(){var e,o=[];return this.composite.getSharedCloudCollectionId().then(function(t){e=t;for(var i=[],a=0,r=A.length;a<r;a++){var s=A[a];i.push(this.getAssetWithUniqueRole(l.LOGOS_PARENT,s))}return o=[this.getColorWithUniqueRole("chrome-text-color"),this.getColorWithUniqueRole("chrome-footer-color"),this.getColorWithUniqueRole("chrome-social-icons-color"),this.getColorWithUniqueRole("chrome-background-color"),this.getColorWithUniqueRole("chrome-header-cta-background-color"),this.getColorWithUniqueRole("chrome-footer-background-color"),this.getColorWithUniqueRole("chrome-header-cta-color")],n.all(o.concat(i))}.bind(this)).then(function(i){for(var a={name:this.getName(),logos:[]},r=this.composite.getDCXComposite().current,s=[],u=o.length,c=function(e,t,n){return t.getImageComponentHref(n,500,"image/png").then((function(t){return a[e+"-href"]=t,t}))},d=0,l=A.length;d<l;d++){var h=i[d+u];if(h){var g=r.getComponentsOf(h)[0],f=t.extend({},h._data.components[0]),m=A[d];f.absolutePath=e+"/"+f.id,f.name=A[d],a.logos.push(f),s.push(c(m,this.composite,g))}}for(d=0,l=S.length;d<l;d++){var p=S[d];a[p]=this.getViewerPageInfo(p)}var b=i[0],y=i[1],v=i[2],C=i[3],F=i[4],w=i[5],k=i[6];return b&&(a["chrome-text-color"]=b.hex()),y&&(a["chrome-footer-color"]=y.hex()),v&&(a["chrome-social-icons-color"]=v.hex()),C&&(a["chrome-background-color"]=C.hex()),F&&(a["chrome-header-cta-background-color"]=F.hex()),w&&(a["chrome-footer-background-color"]=w.hex()),k&&(a["chrome-header-cta-color"]=k.hex()),n.allSettled(s).then((function(){return a}))}.bind(this))},getChromeChecksum:function(){var e,n="",o=function(e,t){t&&(n.length&&(n+="&"),n+=encodeURIComponent(e)+"="+encodeURIComponent(t))},i=function(t){return t.name==e};return this.getChromeInfo().then(function(r){for(var s=0,u=A.length;s<u;s++){e=A[s];var c=t.find(r.logos,i);c&&o(e,c.etag)}for(s=0,u=S.length;s<u;s++){var d=S[s];o(d,r[d])}return o("chrome-text-color",r["chrome-text-color"]),o("chrome-footer-color",r["chrome-footer-color"]),o("chrome-social-icons-color",r["chrome-social-icons-color"]),o("chrome-background-color",r["chrome-background-color"]),o("chrome-header-cta-background-color",r["chrome-header-cta-background-color"]),o("chrome-footer-background-color",r["chrome-footer-background-color"]),(new a).update(n).digest("hex")}.bind(this))},changesSinceLastPublish:function(){var e=this.composite.getDCXRoot().getValue("cp#assetId");return e?n.all([k.getMetadata(e),this.getChromeChecksum()]).spread((function(t,n){var o=t&&t.custom?t.custom.checksum:void 0,i=t.version;if("string"!=typeof i&&void 0!==i)throw new Error("CP did not return a valid version");return{assetId:e,version:i,checksum:n,changes:n!=o}})):n.resolve({changes:!0})},publish:function(e){var o,i,a,r,s=this.composite.getDCXComposite().id,u=s+"/manifest",c=[],d=function(e){return e.name==r};return this.getChromeInfo().then(function(e){a=e;for(var n=0,o=A.length;n<o;n++){r=A[n];var i=t.find(a.logos,d);i&&i.type&&i.absolutePath&&i.id&&c.push({content_type:i.type,source:i.absolutePath,destination:i.id})}return k.serverSideCopy(s,c)}.bind(this)).then(function(e){for(var o,i=[],s=function(e){return e.path==o},c=0,l=A.length;c<l;c++){r=A[c];var h=t.find(a.logos,d);if(h){o=h.id;var g=t.find(e,s);i.push({name:r,id:g.path,path:g.path,version:g.version,type:h.type,state:"unmodified",etag:h.etag})}}delete a.logos;var f={"manifest-format-version":6,name:this.getName(),type:"application/vnd.adobe.sparkchrome.document+dcx",state:"unmodified",id:this.getId(),components:i,"authctx#chromeinfo":a};return n.all([k.checkResource(u).then((function(e){return k.uploadResource(u,"application/json",f,e)})),this.getChromeChecksum()])}.bind(this)).spread(function(t,n){return o=t.version,i=n,k.publishAsset(s,"application/vnd.adobe.sparkchrome.document+dcx",e,{main_resource:{resource_path:"manifest",resource_version:o}})}.bind(this)).then(function(t){return!e&&t&&(e=t),this.composite.pull()}.bind(this)).then(function(){this.composite.getDCXRoot();return this.composite.saveChanges((function(t){t.setValue("cp#assetId",e)})).then((function(){return{assetId:e,checksum:i,version:o}}))}.bind(this))},_generateLogoFromTitle:function(e){var t=document.createElement("canvas"),n=t.getContext("2d"),o=this.getName(),i=g.getTextWidthDOM(o,"333px Lato");t.width=i,t.height=400,n.fillStyle=e?"#ffffff":"#000000",n.font="333px Lato",n.textAlign="center",n.textBaseline="middle",n.fillText(o,i/2,200);var a=t.toDataURL("image/png");return f(a)},generateLogoFromTitle:function(e,t,o){var i=this._generateLogoFromTitle(),a=this._generateLogoFromTitle(!0);return n.all([this.uploadImageAsset("{new}",l.LOGOS_PARENT,i,void 0,e,void 0,o),this.uploadImageAsset("{new}",l.LOGOS_PARENT,a,void 0,t,void 0,o)])},updateLogoFromTitle:function(e,t){var n=this._generateLogoFromTitle(t);return this.uploadImageAsset(e,l.LOGOS_PARENT,n)},updateLogo:function(e,t){return this.getLogoWithUniqueRole(e).then(function(e){var n=e.getData().path;if(!t){var o=this._generateLogoFromTitle();t=o[1]}return this.uploadImageAsset(n,l.LOGOS_PARENT,t,void 0,void 0,l.MAX_LOGO_SIZE)}.bind(this)).then(function(){return this.getLogoWithUniqueRole(e)}.bind(this)).then(function(e){return e}.bind(this))},applyLogoToThemeThumbnail:function(e,t,o,i,a){return this.getLogoWithUniqueRole("primary-logo").then((function(e){var t=e.getValue(i,"image/png"),o=e.getValue(a,"image/png"),r=n.defer(),s=n.defer(),u=new Image,c=new Image;return u.onload=function(){r.resolve(u)},u.src=t,c.onload=function(){s.resolve(c)},c.src=o,n.all([r.promise,s.promise])})).spread((function(n,r){var s,u=n.width,c=n.height;r.width,r.height;s=u<=i&&c<=a?n:r,e.drawImage(s,t,o)}))},generateStamp:function(e,t,o){var i=this;return t=t||"{new}",p.inject().then((function(a){var r=n.defer(),s=function(n){var a=i.getName().toUpperCase(),s=document.createElement("canvas"),u=s.getContext("2d"),c=150,d="700 "+c+"px "+n,h=g.getTextWidthDOM(a,d),m=h+180,p=240,b=1;m>1024&&(b=1024/m,d="700 "+(c=Math.floor(150*b))+"px proxima-nova",m=1024,p=Math.floor(p*b),h=g.getTextWidthDOM(a,d)),s.width=m,s.height=p,u.imageSmoothingEnabled=!1,u.fillStyle="rgba(255, 255, 255, 0.6)",u.fillRect(0,0,m,p),u.globalCompositeOperation="destination-out";var y=(m-h)/2,v=p/2;u.font=d,u.fillStyle="#000",u.textBaseline="middle",u.fillText(a,y,v),u.globalCompositeOperation="source-over",u.font=d,u.textBaseline="middle",u.fillStyle="rgba(0,0,0,0.3)",u.fillText(a,y,v);var C=f(s.toDataURL("image/png"));i.uploadImageAsset(t,l.LOGOS_PARENT,C,"generated-stamp",e,void 0,o).then((function(e){r.resolve(e)})).catch((function(e){console.warn("Error uploading stamp",e),r.reject(e)}))};return-1===document.documentElement.className.search(/wf-proximanova-n7-active/)?(window.marvel.logger.warn("[brand setup] unexpected: Stamp detected that Proxima Nova was not loaded, attempting to load via TypeKitPreview"),a.load([{id:"vcsm",variations:["n7"],css_name:"proxima-nova",name:"Proxima Nova"}],{active:function(){s("proxima-nova")},inactive:function(e,t){window.marvel.logger.error("Error generating stamp inactive",{fontFamily:e,fontDescription:t}),r.reject(new Error("Error generating stamp inactive"))},fontinactive:function(e,t){var n="Error generating stamp fontinactive";window.marvel.logger.error(n,{fontFamily:e,fontDescription:t}),r.reject(new Error(n))}})):s("proxima-nova"),r.promise}))},getClientCommunityPlatform:function(){return h},fullUpdate:function(e){var o=n.defer(),i={},a=[];t.each(this.getCustomFonts(!0),function(n){var o=n.getMetrics();if(!o||!o.version||o.version<this.CURRENT_FONT_METRICS_VERSION){F.warn("Brand font ("+n.friendlyName()+") had an outdated version number ("+o.version+" < "+this.CURRENT_FONT_METRICS_VERSION+"). Recalculating metrics.");var r,s=n.cssName(),u=n.friendlyName();a.push(n.getFileAsBlob().then((function(e){return b.extractFontInfo(e)})).then((function(e){return r=e,n.loadFont()})).then(function(){return b.generateMetricsAsync(u,s,r).then(function(e){e.version=this.CURRENT_FONT_METRICS_VERSION,n.getValue().metrics=e,F.warn("Metrics recalculation for brand font ("+n.friendlyName()+") completed.")}.bind(this)).catch((function(e){var t="Metrics recalculation for brand font ("+n.friendlyName()+") failed: "+e;throw e.message=t,e}))}.bind(this)).then((function(){var o=e.getThemesUsingAssets([n]);t.each(o,(function(e){var t=e.theme;i[t.id]?i[t.id].assets.push(n):i[t.id]={theme:e,assets:[n]}}))})))}}.bind(this));var r=[];return n.all(a).then(function(){return n.all(t.map(i,(function(t){return r.push(t.theme),e.updateThemesWithAssets([t.theme],t.assets)})))}.bind(this)).then(function(){return this.updateThemeThumbnails(r)}.bind(this)).then(function(){return this.save()}.bind(this)).then(function(){o.resolve()}.bind(this)).catch((function(e){F.warn(e),o.reject(e)})),o.promise},isFullUpdateNeeded:function(){var e=!1;return t.each(this.getCustomFonts(!0),function(t){var n=t.getMetrics();if(!n||!n.version||n.version<this.CURRENT_FONT_METRICS_VERSION)return e=!0,!1}.bind(this)),e},validateAndRepair:function(){var e=[];return this.activated()&&(this.hasLogoWithRole("video-watermark")||e.push(this.generateStamp(["video-watermark","generated-stamp"]))),n.allSettled(e).then(function(){return this}.bind(this))},resetBrand:function(){var e=this.getLogoWithRoleSync("generated-stamp");e&&this.composite.removeChild(e);var t=this.getLogoWithRoleSync("generated-logo");t&&this.composite.removeChild(t),(t=this.getLogoWithRoleSync("generated-logo-inverted"))&&this.composite.removeChild(t);var n=this.composite.getChildWithMap("viewerpage");n&&this.composite.removeChild(n);var o=this.composite.getChildWithMap("videooutro");o&&this.composite.removeChild(o);var i=this.composite.getChildWithMap("themes");return i&&this.composite.removeChild(i),this.deactivate(),this.save()},applyWhiteLogoRoleIfNecessary:function(e){this.getLogosSync();return m.colorsFromImage(e.getHrefAsync(600,"image/png"),5,!0).then(function(t){1===t.length&&m.getLuminosity(m.hexToRgb(t[0]))>248?this.addRole(e.getData(),"white-logo"):this.removeRole(e.getData(),"white-logo")}.bind(this))},setup:function(e,n){Date.now();return window.marvel.logger.info("[brand setup] generating stamp"),this.generateStamp(["video-watermark","generated-stamp"],void 0,!0).then(function(){if(e)return window.marvel.logger.info("[brand setup] no logo found - generating logo"),this.generateLogoFromTitle(N,["generated-logo-inverted","chrome-footer-logo"],!0)}.bind(this)).then(function(){var e=this.convertLogoToAuthoringContextLogo(this.getLogoWithRoleSync("primary-logo"));return this.applyWhiteLogoRoleIfNecessary(e)}.bind(this)).then(function(){window.marvel.logger.info("[brand setup] setting viewer page metadata");var e=y.getString("brand-viewer-page-cta-placeholder");return this.setViewerPageInfo({ctaLabel:e,headerCTA:e,footerCTA:e,ctaEnabled:!1,headerCTAEnabled:!1,footerCTAEnabled:!1},void 0,!0)}.bind(this)).then(function(){return window.marvel.logger.info("[brand setup] setting video outro info"),this.setOutroInfo({message:y.getString("brand-outro-message-placeholder")},void 0,!0)}.bind(this)).then(function(){return window.marvel.logger.info("[brand setup] starting theme/template generation"),this.generateThemes(n).catch((function(e){if(e.resetBrand)throw window.marvel.logger.error("[brand setup] found resetBrand error",e),e;return window.marvel.logger.error("[brand setup] error generating themes",e),null}))}.bind(this)).then(function(){t.each(Object.keys(r.apps),function(e,n){var o=r.apps[e].typeName,i="enable-brand-kit-"+o+"-themes";if(s.hasFeature(i)){var a=this.composite.acquireNestedChildrenSync("themes");if((a=t.filter(a,(function(e){return e.getValue("ac#format")==o}))).length<x[o]){var u=new Error("Too few "+o+" themes/templates. Attempted to generate "+K[o]+". Would have been ok to only have "+x[o]+". Only ended up with "+a.length);throw u.resetBrand=!0,u}a.length<K[o]&&window.marvel.logger.warn("[brand setup] There was an error in generating "+(K[o]-a.length)+" "+o+" themes/templates. User was allowed to continue because they were successful in generating at least "+x[o]+" of them.")}}.bind(this))}.bind(this)).then(function(){return this.activate(),window.marvel.events.trigger("brand-activated",this),this.recordEntitlmentIfInterested(),this.save()}.bind(this))},generateThemes:function(e){return n.allSettled(t.map(Object.keys(r.apps),function(o,i){var a=r.apps[o],u=a.typeName,c="enable-brand-kit-"+u+"-themes";if("post"!==u&&s.hasAny("enable-brand-kit-in-progress",c))return a.getThemeController(this).then(function(o){try{var i=o.getNumberOfGeneratedThemes?o.getNumberOfGeneratedThemes():void 0;return i||(i="number"==typeof R[u]?n.resolve(R[u]):n.resolve(-1)),i.then(function(i){return K[u]=i,window.marvel.logger.info("[brand setup] generating "+u+" themes/templates"),o.addGeneratedThemes&&"function"==typeof o.addGeneratedThemes?o.addGeneratedThemes(this):o.getGeneratedThemes&&"function"==typeof o.getGeneratedThemes?o.getGeneratedThemes(this).then(function(i){return n.allSettled(t.map(i,function(t){return this.createTheme(u,(function(e){e.setValue("theme#data",t)}),(function(t,n){return e&&e(),o.generateThemeRendition(t,n)}),!0)}.bind(this)))}.bind(this)):void 0}.bind(this))}catch(e){window.marvel.logger.error("[brand setup] error generating themes/templates: "+e.message,e)}}.bind(this))}.bind(this))).then(function(e){t.each(e,(function(e){var t=e&&e.reason;if("fulfilled"!==e.state&&t&&t.resetBrand)throw t;"fulfilled"!==e.state&&t&&window.marvel.logger.warn("[brand setup] Unexpected error in generating themes/templates: "+t.message,t)}))}.bind(this))}}),d.addAuthoringContextFactory({supportsComposite:function(e){return!0},create:function(){return new C}}),C}.apply(t,o))||(e.exports=i)},48:function(e,t,n){var o,i;o=[n(3),n(0),n(2),n(1),n(4),n(8),n(9),n(38),n(16),n(260),n(30),n(130)],void 0===(i=function(e,t,n,o,i,a,r,s,u,c,d,l){"use strict";return n.Model.extend({defaultCfg:{syncGroup:"",scope:"",newDocName:"Untitled",community:"",doctype:"",legacyName:"",displayName:""},registeredName:null,deferredLoading:null,initialize:function(){},typeName:null,getConfig:function(){},getAppTypeID:function(){return this.getSetting("scope")},isaProjectFormat:function(){return!0},getDisplayName:function(e){var t=this.getSetting("displayName");return e?u.getString("product-name")+" "+t:t},isEnabled:function(){var e=this.getSetting("enabledFlagName");return!e||a.hasFeature(e)},supportsCollaboration:function(){return!0},requiresDocumentLocking:function(e){return this.supportsCollaboration()},supportsDownload:function(){return!0},appSupportsEditorSearch:function(){return!1},supportsDirectDownload:function(){return"post"===this.typeName},supportsAsyncPublish:function(){return!1},getSetting:function(e){var t=this.getConfig()[e];return void 0===t&&(t=this.defaultCfg[e]),t},getCPCommunity:function(){return this.getConfig().community},isDocPublished:function(e){return!!this.getCPAlias(e)},generateCPProjectId:function(e){return e.get("id")},setCPProjectId:function(e,t){e.saveChanges(function(e){e.setValue("cp#projectId",t)}.bind(this))},getCPProjectId:function(e){return e.getDCXRoot().getValue("cp#projectId")},getCPAlias:function(e){return e.getDCXRoot().getValue("cp#shortId")},setCPAlias:function(e,t){return e.saveChanges((function(e){e.setValue("cp#shortId",t)}))},getCPAssetId:function(e){return e.getDCXRoot().getValue("cp#assetId")},setCPAssetId:function(e,t){return e.saveChanges((function(e){e.setValue("cp#assetId",t)}))},getDocContentETag:function(e){return console.error("ERROR: Apps must implement getDocContentETag in appImpl"),""},getPublishedContentETag:function(e){return e.getDCXRoot().getValue("cp#publishedEtag")},setPublishedContentETag:function(e,t){return e.saveChanges(function(n){n.setValue("cp#publishedEtag",t||this.getDocContentETag(e))}.bind(this))},usesContentModifiedEtags:function(){return!0},isBrowserSupported:function(){return!0},getUnsupportedBrowserMessage:function(){return""},hasContentBeenUpdatedSincePublish:function(e,t){o.defer();var n=this.getDocContentETag(e);if(n){var i=this.getPublishedContentETag(e);return!i||n!==i}return e.getContentModifiedDate({preferCpContentModified:!0})-new Date(t)>6e4},setProjectName:function(e,t){console.error("ERROR: Apps must implement setProjectName in appImpl")},getProjectName:function(e,t){return this!==e.getMyPrimaryApp()?e.getMyPrimaryApp().getProjectName(e,t):(console.error("ERROR: Apps must implement getProjectName in appImpl"),"")},checkDocCompatibility:function(e,t){return o.resolve()},getLicensableResources:function(e,n){return n=n||{},this.getImageComponentsInfoForDoc(e).then(function(e){return t.isUndefined(n.licensed)?t.filter(e,this.licensingRelevant.bind(this)):n.licensed?t.filter(e,this._isInfoComponentLicensed.bind(this)):t.filter(e,function(e){return this.licensingRelevant(e)&&this._isInfoComponentUnlicensed(e)}.bind(this))}.bind(this))},batchCheckLicenses:function(e){var t=a.hasFeature("user-flag-image-source-stock");return this.getImageComponentsInfoForDoc(e).then(function(e){var n=e.reduce(function(e,n){var o=n.data.licenseType||n.data.license&&n.data.license.type;if(o&&o.match(/^royalty_free/)){if(!t)throw new Error("User blocked from stock");if(o.match(/^royalty_free_(standard|extended)$/)){var i=n.data.assetID||n.data.license.asset_id||n.data.license.image_id;i&&e.push(i)}}return e}.bind(this),[]);return n.length>0?c.batchGetItemsInfo(n,{params:["is_licensed","id"]}):o.resolve([])}.bind(this)).then((function(e){return window.marvel.logger.traceflow("stock-license-check","batchCheckLicenses:"+JSON.stringify(e)),!e.find((function(e){return""===e.is_licensed}))})).catch((function(e){return window.marvel.logger.warn("batchCheckLicenses - caught exception:",{message:e&&e.message,stack:e&&e.stack}),!1}))},getImageMetadataForAnalytics:function(e){if("post"==this.typeName)return{};var n={google:0,dropbox:0,dooplo:0,facebook:0,stock:0,creativeCloud:0,lightroom:0,uploaded:0};return this.getImageComponentsInfoForDoc(e).then(function(e){var o=!1,i=!1;return t.each(e,function(e){var t,a;e&&e.data&&e.data.srcName&&(t=e.data.srcName,a=n[t],n[t]=a+1),this.licensingRelevant(e)&&(this._isInfoComponentLicensed(e)?i=!0:o=!0)}.bind(this)),{contextualData13:"hasLicensedImages:"+i,contextualData14:"hasUnlicensedImages:"+o,contextualData15:"hasGoogleImages:"+!!n.google,contextualData16:"hasDropboxImages:"+!!n.dropbox,contextualData17:"hasDooploImages:"+!!n.dooplo,contextualData18:"hasFacebookImages:"+!!n.facebook,contextualData19:"hasStockImages:"+!!n.stock,contextualData20:"hasCCImages:"+!!n.creativeCloud,contextualData21:"hasLightroomImages:"+!!n.lightroom,contextualData22:"hasUploadedImages:"+!!n.uploaded}}.bind(this))},licensingRelevant:function(e){return!t.isEmpty(e.data.license)&&"Adobe Stock"===e.data.license.source_name||"Adobe Stock"===e.data.srcName||"stock"===e.data.srcName},_isInfoComponentLicensed:function(e){return!(!e.data||t.isEmpty(e.data.license))&&"royalty_free"!==(t.isObject(e.data.license)?e.data.license.type:e.data.license)},_isInfoComponentUnlicensed:function(e){return!this._isInfoComponentLicensed(e)},getImageComponentsInfoForDoc:function(e){return e.getImageComponents()},lazyLoad:function(e){},load:function(){return this.deferredLoading||(this.deferredLoading=o.defer(),this.lazyLoad(this.deferredLoading)),this.deferredLoading.promise},loadForShare:function(e,t){},loadDesignView:function(e,n){this.load().then(function(){var o,i=this.getStorageImpl();n.showPreview?(o=new this.viewCls,e.renderSubView(o,i,n)):i.createDocument(n).then(function(t){o=new this.viewCls,e.renderSubView(o,i,n)}.bind(this),function(o){if(window.marvel.logger.warn("[AppImpl] Failed to create the document, can't init design view: ",o),"NO_COMPOSITE"!==o.code&&"NOT_COMPATIBLE"!==o.code&&"USER_CANCELED"!==o.code)e.errorState(),t.delay(function(){this.loadDesignView(e,n)}.bind(this),5e3);else{var i=u.getString("organizer-error-not-found");o.msg=o.usermsg||i,window.marvel.events.trigger("mrvl-must-reload",o)}}.bind(this))}.bind(this))},cancelEditingSession:function(e){return o.resolve()},userIsActive:function(){this._onUserActive?this._onUserActive():window.marvel.logger.traceflow("baton-timeout","appImpl.userIsActive is a no op. Project is not shared.")},beginLongUserActivity:function(){this._onBeginLongUserActivity?this._onBeginLongUserActivity():window.marvel.logger.traceflow("baton-timeout","applImpl.beginLongUserActivity is a no op. Project is not shared.")},endLongUserActivity:function(e){this._onEndLongUserActivty?this._onEndLongUserActivty(e):window.marvel.logger.traceflow("baton-timeout","appImpl.endLongUserActivity is a no op. Project is not shared.")},wrapLongUserActivity:function(e,t){window.marvel.logger.traceflow("baton-timeout","wrapLongUserActivity start for "+e),this.beginLongUserActivity(),t.finally(function(){window.marvel.logger.traceflow("baton-timeout","wrapLongUserActivity end for "+e),this.endLongUserActivity()}.bind(this))},isCollaborationEnabled:function(){return!!this._isCollaborationEnabled},onEditorActive:function(e,n,o){this._isCollaborationEnabled=!0,this._onUserActive=t.throttle(e,1e3,{leading:!0,trailing:!1}),this._onBeginLongUserActivity=n,this._onEndLongUserActivty=o,window.addEventListener("touchstart",this._onUserActive,!0),window.addEventListener("mousedown",this._onUserActive,!0),window.addEventListener("pointerdown",this._onUserActive,!0),window.addEventListener("keydown",this._onUserActive,!0),window.addEventListener("scroll",this._onUserActive,!0),window.addEventListener("resize",this._onUserActive,!0)},offEditorActive:function(e){this._onBeginLongUserActivity=null,this._onEndLongUserActivty=null,window.removeEventListener("touchstart",this._onUserActive,!0),window.removeEventListener("mousedown",this._onUserActive,!0),window.removeEventListener("pointerdown",this._onUserActive,!0),window.removeEventListener("keydown",this._onUserActive,!0),window.removeEventListener("scroll",this._onUserActive,!0),window.removeEventListener("resize",this._onUserActive,!0),this._onUserActive=null},setAppViewImplCls:function(e){this.viewCls=e},setPublishImpl:function(e){this.publishImpl=e},getPublishImpl:function(){return this.publishImpl},setStorageImpl:function(e){this.storageImpl=e,e.getSetting=this.getSetting.bind(this),e.initSyncGroup()},getStorageImpl:function(){return this.storageImpl},resetDocPublishData:function(e,n){var i=e.getMyApp(),a=[i.setCPAlias(e,null),i.setCPAssetId(e,null)];o.allSettled(a).then((function(e){var o=[];t.each(e,(function(e){"fulfilled"!==e.state&&o.push(e.reason)})),0===o.length?n.resolve():n.reject(o)}))},clearDataForDocCreatedByDupe:function(e){e.clearRootDataWithPrefix("cp#")},handleBrowserUnsupported:function(t,n){var i=o.defer(),a=e('<div data-auto="browser-unsupported-message"/>').html(this.getUnsupportedBrowserMessage()),s=navigator.userAgent||"N/A";return r.trackEvent("unsupportedBrowserMsgShown",{contextString:t,userAgent:s,projectType:this.getAppTypeID()},n),d.showAlert("Darn, you need to switch browsers",a,{closeDefer:i,okText:"Ok, got it"}).then(function(){i.resolve()}.bind(this)),i.promise},requestAppCreateNew:function(e,t,n){var i=o.defer();return this.isEnabled()?this.isBrowserSupported()?((n=n||{}).contextString=e,n.projectType=this.getAppTypeID(),window.marvel._isInApp?(r.trackEvent("projectCreationBegin",n,t),marvel.events.trigger("show-interstitial",{typeName:this.typeName,afterShowingDefer:i}),i.promise.then(function(){marvel.navigate("design/"+this.typeName+"/new",{trigger:!0})}.bind(this)).done()):r.trackLink("projectCreationBegin",n,t,function(){window.location.href=u.getLocalizedSparkPath("/sp/design/"+this.typeName+"/new")}.bind(this)),!0):(this.handleBrowserUnsupported(),!1):(alert(this.getDisplayName()+" is coming soon."),!1)},hasLicensedResources:function(e){return this.getImageComponentsInfoForDoc(e).then(function(e){return!!t.find(e,function(e){return this._isInfoComponentLicensed(e)}.bind(this))}.bind(this))},updateLicensedResources:function(e,t){return console.warn("TBD: update images in mrvlDoc."),o.resolve()},appSupportsUpdateLicensedResources:function(e){return!1},unlicenseResources:function(e){return console.warn("TBD: unlicese images in mrvlDoc"),o.resolve()},getAuthoringContextId:function(e){return e.getDCXRoot().getValue("authctx#ctxid")},setAuthoringContextId:function(e,t,n){return e.belongsToUser()?(window.marvel.logger.traceflow("authCtx","setAuthoringContextId",{docId:e.id,oldAuthCtxId:this.getAuthoringContextId(e),newAuthCtxId:t,skipSave:n}),n?(e.getDCXRoot().setValue("authctx#ctxid",t),o.resolve()):e.saveChanges(function(e){e.setValue("authctx#ctxid",t)}.bind(this))):(marvel.logger.warn("AuthoringContext.setAuthoringContextId error: attempted to set authctx#ctxid for a project that is an incoming collaboration"),o.resolve())},getAuthoringContextUrn:function(e){return e.getDCXRoot().getValue("authctx#ctxurn")},setAuthoringContextUrn:function(e,t){var n=0,i=function(e,t){return e.belongsToUser()?this.getAuthoringContextUrn(e)!==t?(window.marvel.logger.traceflow("authCtx","setAuthoringContextUrn",{docId:e.id,oldAuthCtxUrn:this.getAuthoringContextUrn(e),newAuthCtxUrn:t,retryCount:n}),n>0?e.pull():o.resolve().then(function(){return e.saveChanges(function(e){e.setValue("authctx#ctxurn",t)}.bind(this))}.bind(this))):o.resolve():(marvel.logger.warn("AuthoringContext.setAuthoringContextUrn error: attempted to set authctx#ctxurn for a project that is an incoming collaboration"),o.resolve())}.bind(this);return window.marvel.logger.traceflow("authCtx","setAuthoringContextUrn",{docId:e.id,oldAuthCtxUrn:this.getAuthoringContextUrn(e),newAuthCtxUrn:t}),l(i.bind(this),{maxAttempts:2,shouldRetry:function(e){return!!(e&&e.message&&e.message.includes("UPDATE_CONFLICT"))||(window.marvel.logger.warn("[appImpl:setAuthoringContextUrn] unexpected error, not retrying",e),!1)},counter_cb:function(){n++},loggerFn:window.marvel.logger.warn.bind(window.marvel.logger),logMessagePrefix:"[appImpl:setAuthoringContextUrn]"})(e,t)},isBranded:function(e){var t=!!e.getDCXRoot().getValue("authctx#uses-branded-elements");return o.resolve(t)},hasPremiumIngredients:function(e){if("post"===this.typeName){var n=e.getDCXRoot().getValue("theo#font-sources");return n&&n.length&&t.includes(n,"typekit-premium")?o.resolve(!0):o.resolve(!1)}return o.resolve(!1)},premiumIsRequired:function(e){return o.all(this.isBranded(e),this.hasPremiumIngredients(e)).spread((function(e,t){return e||t}))},getAuthoringContextThemeId:function(e){return e.getDCXRoot().getValue("authctx#themeid")},setAuthoringContextThemeId:function(e,t,n){return n?(e.getDCXRoot().setValue("authctx#themeid",t),o.resolve()):e.saveChanges(function(e){e.setValue("authctx#themeid",t)}.bind(this))},stripBranding:function(e,t){return(a.hasFeature("enable-multi-brand")?o.resolve():this.setAuthoringContextId(e,null,!0)).then(function(){return this.setAuthoringContextThemeId(e,null,!0).then(function(){return t?(e.getDCXRoot().setValue("authctx#uses-branded-elements",!1),o.resolve()):e.saveChanges(function(e){e.setValue("authctx#uses-branded-elements",!1)}.bind(this))}.bind(this))}.bind(this))},rebrandProject:function(e,t,n){return this.stripBranding(e,n).then(function(){var o=null;return t&&(o=t.getId()),this.setAuthoringContextId(e,o,n)}.bind(this))},beforeCollaboration:function(e){return o.resolve()},hasUploadedFonts:function(e){return this._hasFontSource(e,"user-uploaded")},_hasFontSource:function(e,n){return this.getFontsUsed?this.getFontsUsed(e).then((function(e){return!!t.find(e||[],(function(e){return e&&e.source===n}))})):this.includesUploadedFonts&&"user-uploaded"===n?o.resolve(this.includesUploadedFonts(e)):o.resolve(!1)},getLastPublishedAuthoringContextId:function(e){return e.getDCXRoot().getValue("authctx#lastPublishedAuthctxid")},setLastPublishedAuthoringContextId:function(e,t){return e.saveChanges(function(e){e.setValue("authctx#lastPublishedAuthctxid",t)}.bind(this))},isaThemeEditor:function(){return this.isaProjectFormat()},getThemeController:function(e){return o.resolve({initTheme:function(e,t){},renderCover:function(e,t){},areAssetsUsed:function(e,t){},updateLinkedAssets:function(e,t){},relinkAsset:function(e,t){},getNumberOfGeneratedThemes:function(){return o.resolve(-1)},getGeneratedThemes:function(){return o.resolve([])},generateThemeRendition:function(e,t,n){t.fillStyle="#000000",t.fillRect(0,0,t.canvas.width,t.canvas.height)},canResolveConflict:function(e,t,n,i){return o.resolve(!1)},resolveAuthoringContextConflict:function(e,t,n,i,a){return o.resolve()}})},getThemeEditorView:function(){return o.resolve((function(){return this.render=function(){},this.setElement=function(){},this}))},getGeneratedThemes:function(e){return o.resolve([])},generateThemeRendition:function(e,t,n){t.fillStyle="#000000",t.fillRect(0,0,t.canvas.width,t.canvas.height)}})}.apply(t,o))||(e.exports=i)},550:function(e,t,n){var o,i;o=[n(3),n(0),n(1),n(93)],void 0===(i=function(e,t,o,i){"use strict";var a={},r=0,s=function(){--r<0&&(r=0),r>0?e("html").addClass("ac-wf-loading"):e("html").removeClass("ac-wf-loading")};return{loadFont:function(u,c){var d,l,h,g;return++r>0?e("html").addClass("ac-wf-loading"):e("html").removeClass("ac-wf-loading"),d=t.isString(u)?u:(l=u).lookupKey(),a[d]?a[d]:(g=l?o.resolve(l):i.getFontRegistry().then((function(e){if(e.facesByKey[d]){var t=o.defer();return Promise.resolve().then(function(o){var i=new(n(259));i.setFontDataFromSparkFontDefn(e.facesByKey[d]),t.resolve(i)}.bind(null,n)).catch(n.oe),t.promise}var i="loadFont failed find face defn for "+d;return console.warn(i),o.reject(i)})),h=o.defer(),a[d]=h.promise,g.then(function(e){return"spark-provided"!==e.source()||i.USE_SPARKFONTS_PREVIEW_API&&e.tkPreviewId()?"tk-synced"===e.source()||"spark-provided"===e.source()?i.inject().then((function(){setTimeout((function(){h.resolve(e)}),3e3);var t={id:e.tkPreviewId(),variations:e.tkVariation(),css_name:e.cssName(),name:e.friendlyName()};return window.TypekitPreview.load([t],{active:function(){h.resolve(e)},inactive:function(e,t){var n="error loading typekit preview font "+e+" and "+t;console.warn(n),h.reject(n)},fontinactive:function(e,t){var n="error-inactive loading typekit preview font "+e+" and "+t;console.warn(n),h.reject(n)}}),!0})):"user-uploaded"==e.source()?this._loadUploadedFont(e).then((function(){h.resolve(e)}),(function(e){h.reject(e)})):(console.warn("ATTEMPT TO LOAD FONT FACE WITH UNKNOW SOURCE "+e.source()),void h.reject("Unknown font source")):i.inject().then((function(){h.resolve(e)}))}.bind(this)).done(),h.promise.finally(s),a[d])},_loadUploadedFont:function(n){var i,a="cls-"+n.cssName().replace(" ","-").replace(/\"/g,"")+"-"+n.fontWeight()+"-"+n.fontStyle(),r=document.head.querySelectorAll("style."+a)[0],s="font-css-"+a;if(!r&&(r=this._createStyleBlock(a),window.localStorage)){try{i=window.localStorage.getItem(s)}catch(e){}var u,c;return i?(r.innerHTML=i,u=o.defer(),(c=e("<div class='font-loading-measure'>AbcdeFghijklmnoPqrstuvWxyz</div>")).css({position:"fixed",visibility:"hidden",top:"-1000px",left:"-1000px","font-size":"30px","font-style":n.fontStyle(),"font-weight":n.fontWeight()}),e("body").append(c),n.$css(c),t.delay((function(){c.remove(),u.resolve()}),500),u.promise):this._loadFontAjax(n).then((function(i){return n.getCSSFontFaceAsync(!0,i).then(function(i){r.innerHTML=i;try{window.localStorage.setItem(s,i)}catch(e){}return u=o.defer(),(c=e("<div class='font-loading-measure'>AbcdeFghijklmnoPqrstuvWxyz</div>")).css({position:"fixed",visibility:"hidden",top:"-1000px",left:"-1000px","font-size":"30px","font-style":n.fontStyle(),"font-weight":n.fontWeight()}),e("body").append(c),n.$css(c),t.delay((function(){c.remove(),u.resolve()}),500),u.promise}.bind(this))}),function(e){return n.getCSSFontFaceAsync().then(function(e){r.innerHTML=e}.bind(this))}.bind(this))}return o.resolve()},_loadFontAjax:function(t){var n=o.defer();return t.getHrefAsync(void 0,!0).then(function(t){e.ajax({url:t,type:"GET",mimeType:"text/plain; charset=x-user-defined"}).done(function(e,t,o){var i="data:"+(o.getResponseHeader("content-type")||"application/x-font-opentype")+";base64,"+this._base64Encode(e);n.resolve(i)}.bind(this)).fail((function(e,t,o){console.warn("ERROR loading font file: ",o),n.reject(o)}))}.bind(this)).catch((function(e){n.reject(e)})).done(),n.promise},_base64Encode:function(e){for(var t,n,o,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a="",r=0,s=e.length;r<s;){if(t=255&e.charCodeAt(r++),r==s){a+=i.charAt(t>>2),a+=i.charAt((3&t)<<4),a+="==";break}if(n=e.charCodeAt(r++),r==s){a+=i.charAt(t>>2),a+=i.charAt((3&t)<<4|(240&n)>>4),a+=i.charAt((15&n)<<2),a+="=";break}o=e.charCodeAt(r++),a+=i.charAt(t>>2),a+=i.charAt((3&t)<<4|(240&n)>>4),a+=i.charAt((15&n)<<2|(192&o)>>6),a+=i.charAt(63&o)}return a},_createStyleBlock:function(e){var t=document.createElement("style");return t.type="text/css",t.className=e,document.getElementsByTagName("head")[0].appendChild(t),t}}}.apply(t,o))||(e.exports=i)},596:function(e,t,n){var o,i;o=[n(3),n(128)],void 0===(i=function(e,t){return{getTextWidthDOM:function(t,n){var o=e("<span>"+t.replace(/</g,"&lt;").replace(/>/g,"&gt;")+"</span>").css({font:n,float:"left","white-space":"nowrap"}).css({visibility:"hidden"}).appendTo(e("body")),i=o.width();return o.remove(),i},getContentDimensions:function(e,t,n,o,i){var a=this.getLines(e,t,o,n);return{width:Math.max.apply(void 0,a.map((function(e){return e.width}))),height:a.length*i}},swapFontSize:function(e,t){return t.replace(/([0-9\-\.]*)px/,e+"px")},autoSizeText:function(e,t,n,o,i,a,r,s,u){var c=t,d=r*c,l=a*c,h=1;for(1!=(s=s||1)&&(c*=h=s)<10&&(h=(c=10)/t);c&&c>10;){var g={width:i,height:u||l},f=this.getContentDimensions(n,e,this.swapFontSize(c,o),i,d),m=f.width>0?f.width:1,p=f.height>0?f.height:1,b=g.width,y=g.height,v=Math.min(b/m,y/p)||1;if(v>=1||m-b<=1&&p-y<=1)break;(c*=v)<10&&(v=(c=10)/t),h*=v,d=r*c,l=a*c}return{fontSize:c,scale:h}},getLines:function(e,t,n,o){var i=(t=t.toString()).split(" "),a=[],r=i[0],s=n;if(e.font=o,1==i.length)return[{text:r,width:this.getTextWidthDOM(r,o)}];for(var u=1;u<i.length;u++){var c=i[u];if(this.getTextWidthDOM(r+" "+c,o)<s?r+=" "+c:(a.push({text:r,width:this.getTextWidthDOM(r,o)}),r=c),u===i.length-1){a.push({text:r,width:this.getTextWidthDOM(r,o)});break}}return a},downsampleImage:function(e,n,o){var i=window.URL.createObjectURL(e),a=new Image;a.onload=function(){var i=a.width,r=a.height/i;if(i<=n)return o(e);var s=document.createElement("canvas");s.width=n,s.height=n*r,s.getContext("2d").drawImage(a,0,0,n,n*r);var u=s.toDataURL("image/png"),c=t(u);o(c)},a.onerror=function(){o(e)},a.src=i}}}.apply(t,o))||(e.exports=i)},610:function(e,t,n){var o,i;o=[n(3),n(0),n(1),n(2)],void 0===(i=function(e,t,n,o){"use strict";var i;return i=o.Collection.extend({setAC:function(e){this._ac=e},initialize:function(e,t){var n=o.Collection.prototype.initialize.call(this,e,t);return t&&t.feel&&(this._feel=t.feel),n},getFeel:function(){return this._feel},add:function(e,n){var i=o.Collection.prototype.add.call(this,e,n);return t.isArray(e)||(e=[e]),n&&n.genericRoles&&t.each(e,function(e){e._genericRoles=n.genericRoles}.bind(this)),n&&n.uniqueRoles&&t.each(e,function(e){e._uniqueRoles=n.uniqueRoles}.bind(this)),i},getPropFromFirst:function(e){var t=this.at(0);if(t[e])return"function"==typeof t[e]?t[e]():t.getData().getValue(e)},getCSSFontFaceAsync:function(e){var t="",o=[];return this.each((function(n){o.push(n.getCSSFontFaceAsync(e).then((function(e){t+=e})))})),n.allSettled(o).then((function(){return t}))},loadFonts:function(){var e=new i,n=new i;if(this.each((function(t){t.isSparkFont()?e.add(t):n.add(t)})),e.length&&e.each((function(e){e.loadFont()})),n.length){var o=n.getPropFromFirst("cssName");n.getCSSFontFaceAsync().then((function(e){var n=document.createElement("style");n.type="text/css",n.innerHTML=e,n.className=o;var i=document.head.querySelectorAll("style."+o);i&&t.each(i,(function(e){e.parentNode.removeChild(e)})),document.getElementsByTagName("head")[0].appendChild(n)}))}},getFontWithRole:function(e){return this.find((function(n){return n.hasRole&&"function"==typeof n.hasRole?n.hasRole(e):n._uniqueRoles&&!!t.find(n._uniqueRoles,(function(t){return t==e}))||n._genericRoles&&!!t.find(n._genericRoles,(function(t){return t==e}))}))}})}.apply(t,o))||(e.exports=i)},621:function(e,t,n){var o,i;o=[n(3),n(0),n(1),n(2)],void 0===(i=function(e,t,n,o){"use strict";return o.Model.extend({valueProp:"ac#value",getRoles:function(){return this._data.getValue("ac#roles")||[]},setRoles:function(e){this._data.setValue("ac#roles",e)},hasRole:function(e){var n=this.getRoles();return t.includes(n,e)},hasAnyRole:function(e){var n=this.getRoles();return!!t.find(n,(function(n){return t.includes(e,n)}))},addRole:function(e){var n=this.getRoles();t.includes(n,e)||(n.push(e),this.setRoles(n))},removeRole:function(e){var n=this.getRoles();n=t.without(n,e),this.setRoles(n)},setAC:function(e){this._ac=e},setData:function(e){this._data=e},getData:function(){return this._data},getId:function(){return this._data.id},setValue:function(e){this._data.setValue(this.valueProp,e)},_getValue:function(){return this._data.getValue(this.valueProp)},getValue:function(){return this._getValue()},getValueProp:function(e,t){var n=this.getValue();return n&&n[e]?n[e]:t||""},setName:function(e){this._data.setValue("name",e)},getName:function(){return this._data.getValue("name")}})}.apply(t,o))||(e.exports=i)},690:function(e,t,n){var o;o=function(e){"use strict";var t,n=(t=document.createElement("canvas").getContext("2d"),(window.devicePixelRatio||1)/(t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1)),o=function(e,t,o){o||(o=n);var i=document.createElement("canvas");return i.width=e*o,i.height=t*o,i.style.width=e+"px",i.style.height=t+"px",i.getContext("2d").setTransform(o,0,0,o,0,0),i},i=function(t,n){var o=e("<span>"+t.replace(/</g,"&lt;").replace(/>/g,"&gt;")+"</span>").css({font:n,float:"left","white-space":"nowrap"}).css({visibility:"hidden"}).appendTo(e("body")),i=o.width();return o.remove(),i},a=function(e,t,n){var a=n.size||24,r=n.weight||"400",s=n.style||"normal",u=n.lineHeight||1.5,c=n.padding||0,d=n.color||"#35414C",l=s+" "+r+" "+a+"px "+e,h=s+" "+r+" 8px "+e,g=8*u,f=i(t,h),m=o(f,g,0),p=m.getContext("2d");m.height=g,m.width=f,p.font=h,p.fillStyle=d,p.textBaseline="middle",p.fillText(t,0,g/2),p.fillRect(0,0,10,10);for(var b=p.getImageData(0,0,f,g).data,y=0,v=0,C=b.length/2,F=!1,w=0,k=b.length;w<k;)b[w],b[w+1],b[w+2],0!=b[w+3]&&y++,(w+=4)>=C&&!F&&(F=!0,v=y,y=0);var A=v/y,N=a*u+2*c,S=i(t,l)+2*c,x=N/2;return A>1.8&&A<2?x+=.1*a:A>=2&&(x+=.18*a),p=(m=o(S,N)).getContext("2d"),m.height=N,m.width=S,p.font=l,p.fillStyle=d,p.textBaseline="middle",p.fillText(t,c,x),m.whiteSpaceRatio=A,m};return{generateCanvas:a,generateDataURL:function(){var e=a.apply(this,arguments);return e.toDataURL()}}},e.exports=o(n(3))},692:function(e,t,n){var o,i;o=[n(3),n(0),n(1),n(621),n(259),n(550),n(93),n(693)],void 0===(i=function(e,t,n,o,i,a,r,s){"use strict";var u=["headline-font","body-font","body-font-bold","body-font-italic","body-font-bold-italic"];return o.extend({type:"font",valueProp:"font#data",isDefn:function(){return!1},getHrefAsync:function(e,t){return this._ac._hrefForCustomFontAsync(this.getData(),e)},getFileAsBlob:function(e,t){var o=n.defer();return this.getHrefAsync(e,t).then(function(e){var t=new XMLHttpRequest;t.onreadystatechange=function(){4==this.readyState&&200==this.status&&o.resolve(this.response)},t.onerror=function(e){o.reject(e)},t.open("GET",e),t.responseType="blob",t.send()}.bind(this)).catch((function(e){o.reject(e)})).done(),o.promise},getRenditionHrefAsync:function(e,t,n){var o="face-rendition";return t?o="family-rendition":n&&(o="rendition"),this._ac._hrefForCustomFontRenditionAsync(this.getData(),o).then(function(t){return e&&t&&(t=t.indexOf("/assets/")>0?t.replace(/^https?\:\/\/[^\/]+\/image_assets\/[^\/]+\/[^\/]+\/(.*)$/,"$1"):t.replace(/^https?\:\/\/[^\/]+\/image_assets\/[^\/]+\/(.*)$/,"$1")),t}.bind(this))},friendlyName:function(e){var t;if(this.isSparkFont()){var n=s.faces[this.lookupKey()];t=n.subgroupName+" "+n.name}else t=this._data.getValue("name")||"Undefined";return e?-1!=t.search(/^clarendon/i)||-1!=t.search(/^raleway/i)||-1!=t.search(/^wanderlust/i)?t.split(" ")[0]:t.split(" ").slice(0,2).join(" "):t},setUniqueBodyFontRole:function(e){this._ac.getCustomFontSubgroup(this.subgroupName()).each((function(t){t.removeRole(e)})),this.addRole(e)},subgroupName:function(){return this.isSparkFont()?s.faces[this.lookupKey()].subgroupName:this.getValueProp("subgroupName")},faceName:function(){return this.isSparkFont()?s.faces[this.lookupKey()].name:this.getValueProp("faceName")},setFontFromDefn:function(e,t,n){n=n||this.getData(),t=t||this.getValue(),"tk-synced"==e._fontData.source?(t.source=e.source(),t.lookupKey=e.lookupKey(),t.subgroupName=e.subgroupName(),t.cssName=e.cssName(),t.weight=e.fontWeight(),t.style=e.fontStyle(),t.tkPreviewId=e.tkPreviewId(),t.tkVariation=e.tkVariation(),t.tkSubgroupKitId=e.tkSubgroupKitId(),n.setValue("name",e.friendlyName())):(t.source=e.source(),t.lookupKey=e.lookupKey())},setLookupKey:function(e){var t=this._getValue();"object"==typeof e&&"tk-synced"===e.type?this._setTypekitSyncedFont(e,t):t.lookupKey=e,this.setValue(t)},createFont:function(e,t){var n=this._ac.composite.acquireNestedMapSync("all-fonts"),o=this._ac.composite.addChildPath(void 0,void 0,n),i={};return o.setValue("type","application/vnd.adobe.element.custom-font+dcx"),o.setValue("ac#application","spark-web"),o.setValue("ac#roles",t),this.setFontFromDefn(e,i,o),this._data=o,o.setValue("font#data",i),o.setValue(this.valueProp,i),o},createFromElement:function(e,t){var n=e.getValue(this.valueProp).lookupKey,o=new i;o.setFontDataFromSparkFontDefn(t.facesByKey[n]),this._data=this.createFont(o,e.getValue("ac#roles"))},source:function(){return this.getValueProp("source")},isCustomFont:function(){return"user-uploaded"==this.source()},isSparkFont:function(){return"spark-provided"==this.source()},isFauxFont:function(){return"faux-font"==this.source()},isBodyFont:function(){return this.hasAnyRole(["body-font-italic","body-font-bold-italic","is-body-font-italic","is-body-font-bold-italic","body-font","body-font-bold","is-body-font","is-body-font-bold"])},getMetricsAsync:function(){return this.isCustomFont()?n.resolve(this.getMetrics()):this.getMetricsFromRegistry()},getMetrics:function(){return this.getValueProp("metrics")},getMetricsFromRegistry:function(){return r.getFontRegistry().then(function(e){return e.facesByKey[this.lookupKey()].face.metrics}.bind(this))},lookupKey:function(){return this.isCustomFont()&&this._data?"custom-"+this._data.path:this.getValueProp("lookupKey")},uiKey:function(){return"custom-"+this.getId()},tkPreviewId:function(){var e=this.getValueProp("tkPreviewId");if(!e&&this.isSparkFont()){var t=s.faces[this.lookupKey()];e=s.subgroups[t.subgroupName].typekitPreviewId}return e},tkVariation:function(){var e=this.getValueProp("tkVariation");!e&&this.isSparkFont()&&(e=s.faces[this.lookupKey()].typekitKey);return e},tkSubgroupKitId:function(){var e=this.getValueProp("tkSubgroupKitId");if(!e&&this.isSparkFont()){var t=s.faces[this.lookupKey()];e=s.subgroups[t.subgroupName].typekitSubgroupKitId}return e},cssName:function(){if(this.isSparkFont()){var e=s.faces[this.lookupKey()];return s.subgroups[e.subgroupName].cssName}return this.getValueProp("cssName")||'"'+this.friendlyName()+'"'},cssNameForPreview:function(){var e=this.cssName();return"tk-synced"===this.source()&&(e=this.tkPreviewId()),e},fontStyle:function(){if(this.isSparkFont()){if(!this.getValueProp("fontStyle")){return{n:"normal",i:"italic"}[this.tkVariation().split("")[0]]}}else if(this.isCustomFont()||this.isFauxFont()){if(this.hasRole("body-font-italic")||this.hasRole("body-font-bold-italic")||this.hasRole("is-body-font-italic")||this.hasRole("is-body-font-bold-italic"))return"italic";if(this.hasRole("body-font")||this.hasRole("body-font-bold")||this.hasRole("is-body-font")||this.hasRole("is-body-font-bold"))return"normal";var e=this.getMetrics();if(e&&e.style)return e.style}return this.getValueProp("fontStyle","normal")},fontWeight:function(){if(this.isSparkFont()){if(!this.getValueProp("fontWeight")){var e=this.tkVariation().split(""),t=parseInt(e[1]);return t<1&&(t=1),t>9&&(t=9),100*t}}else if(this.isCustomFont()||this.isFauxFont()){if(this.hasRole("body-font")||this.hasRole("body-font-italic")||this.hasRole("is-body-font")||this.hasRole("is-body-font-italic"))return 400;if(this.hasRole("body-font-bold")||this.hasRole("body-font-bold-italic")||this.hasRole("is-body-font-bold")||this.hasRole("is-body-font-bold-italic"))return 700;var n=this.getMetrics();if(n&&n.weight)return n.weight}return this.getValueProp("fontWeight","normal")},getCSSFontFaceAsync:function(e,t){var n=this.cssName();return n||(n=this.friendlyName().toLowerCase()),this.getHrefAsync().then(function(o){return(t=t||o)?(e&&(t=t.indexOf("/assets/")>0?t.replace(/https?\:\/\/[^\/]*\/image_assets\/[^\/]*\/[^\/]*\/(.*)$/,"$1"):t.replace(/https?\:\/\/[^\/]*\/image_assets\/[^\/]*\/(.*)$/,"$1")),"@font-face { font-family: "+n+";font-weight:"+this.fontWeight()+";font-style:"+this.fontStyle()+';src: url("'+t+'"); }'):void 0}.bind(this))},loadFont:function(){var e=this.source();return"user-uploaded"==e?a.loadFont(this,this._ac):"spark-provided"==e?a.loadFont(this.lookupKey(),this._ac):n.resolve()},$loadFontCSS:function(e,n,o,i){var a=!1;n=n||18,t.delay((function(){a||e.addClass("font-loading")}),50),this.loadFont().finally(function(){a=!0;var t=r.getFontNormalized(n,this.getMetrics());e.css("font-size",t.size+"px"),o&&e.css("line-height",1.94*n+t.vshift+"px"),i&&e.css("height",1.94*n+t.vshift+"px"),this.$css(e,",adobe-clean,sans-serif"),e.removeClass("font-loading")}.bind(this)).done()},$cssRendition:function(e,t,n,o){i.prototype.$cssRendition.call(this,e,t,n,o)},$css:function(t,n){var o=this.cssName();n=n||"","tk-synced"!==this.source()&&"spark-provided"!==this.source()||(o=o||this.tkPreviewId()),(t=e(t)).css({"font-family":o+n,"font-style":this.fontStyle(),"font-weight":this.fontWeight()})},createOrUpdateFontFiles:function(e){return this._ac.createOrUpdateFontFiles(this.getData(),e)},generateRenditions:function(){return this._ac.generateFontRenditions(this)},getUniqueRole:function(){return this.getUniqueRoles()[0]},getUniqueRoles:function(){var e=this.getRoles();return t.intersection(e,u)},getTOUAName:function(){return this.subgroupName()+" "+this.faceName()},isInstallable:function(){var e=this.getMetrics().fsType,t=this.getTOUAName();try{var n=Number.parseInt(e),o=15&n;if(0===o)return window.marvel.logger.traceflow("brand-kit","verifyFonts fsType="+n+"  licenseType=0 so no upload is required"),!0;window.marvel.logger.traceflow("brand-kit","verifyFonts fsType="+o+" so font upload is required for "+t)}catch(e){window.marvel.logger.warn("BrandKitWrapper failed verifying font license",e)}return!1}})}.apply(t,o))||(e.exports=i)},693:function(e){e.exports=JSON.parse('{"subgroups":{"Acumin Pro Semi Condensed":{"subgroupName":"Acumin Pro Semi Condensed","cssName":"acumin-pro-semi-condensed","typekitPreviewId":"zhgz","typekitSubgroupKitId":"oed0yfm","paragraphRecommended":true,"faces":[{"typekitKey":"n3","name":"Light","lookupKey":"258dc19d287f38402246a43ef7ee15db90408ab0d5e9ce6170e4797f99816d","weight":"300","style":"","subgroupName":"Acumin Pro Semi Condensed"},{"typekitKey":"i3","name":"Light Italic","lookupKey":"258dc19d287f38402246a43ef7ee15db90408ab0d5e9ce6170e4797f99816d23b74c91cf9a8b","weight":"300","style":"italic","subgroupName":"Acumin Pro Semi Condensed"},{"typekitKey":"n6","name":"Semibold","lookupKey":"258dc19d287f38402246a43ef7ee15db90408ab0d5e9ce6170e4667393807b6c925c","weight":"600","style":"","subgroupName":"Acumin Pro Semi Condensed"},{"typekitKey":"i6","name":"Semibold Italic","lookupKey":"258dc19d287f38402246a43ef7ee15db90408ab0d5e9ce6170e4667393807b6c925cd0ea87899a41d2","weight":"600","style":"italic","subgroupName":"Acumin Pro Semi Condensed"}]},"Adobe Caslon Pro":{"subgroupName":"Adobe Caslon Pro","cssName":"adobe-caslon-pro","typekitPreviewId":"hmqz","typekitSubgroupKitId":"qhv3iqj","paragraphRecommended":true,"faces":[{"typekitKey":"n4","name":"Regular","lookupKey":"258adb9224315b712345eb03b2d30e94fe7d81b3c5ebdc76","weight":"400","style":"","subgroupName":"Adobe Caslon Pro"},{"typekitKey":"i4","name":"Italic","lookupKey":"258adb9224315b712345eb03b2d30e94fe6690b5dceede","weight":"400","style":"italic","subgroupName":"Adobe Caslon Pro"},{"typekitKey":"n6","name":"Semibold","lookupKey":"258adb9224315b712345eb03b2d30e94fe7c81b9d9e5d26870","weight":"600","style":"","subgroupName":"Adobe Caslon Pro"},{"typekitKey":"i6","name":"Semibold Italic","lookupKey":"258adb9224315b712345eb03b2d30e94fe7c81b9d9e5d26870e97c629f857060","weight":"600","style":"italic","subgroupName":"Adobe Caslon Pro"},{"typekitKey":"n7","name":"Bold","lookupKey":"258adb9224315b712345eb03b2d30e94fe6d8bb8d4","weight":"700","style":"","subgroupName":"Adobe Caslon Pro"},{"typekitKey":"i7","name":"Bold Italic","lookupKey":"258adb9224315b712345eb03b2d30e94fe6d8bb8d4a7f47075a55c75","weight":"700","style":"italic","subgroupName":"Adobe Caslon Pro"}]},"Azo Sans":{"subgroupName":"Azo Sans","cssName":"azo-sans-web","typekitPreviewId":"lyqy","typekitSubgroupKitId":"ppn2tqp","paragraphRecommended":false,"faces":[{"typekitKey":"n3","name":"Light","lookupKey":"2594dbd0127076637d65ed0afaf7","weight":"300","style":"","subgroupName":"Azo Sans"},{"typekitKey":"i3","name":"Light Italic","lookupKey":"2594dbd0127076637d65ed0afaf75cb2a74e88bdd3","weight":"300","style":"italic","subgroupName":"Azo Sans"},{"typekitKey":"n7","name":"Bold","lookupKey":"2594dbd0127076637d6beb01f6","weight":"700","style":"","subgroupName":"Azo Sans"},{"typekitKey":"i7","name":"Bold Italic","lookupKey":"2594dbd0127076637d6beb01f6a3358fb2438db7","weight":"700","style":"italic","subgroupName":"Azo Sans"}]},"Bellfort Script":{"subgroupName":"Bellfort Script","cssName":"spark-bellfort-script","typekitPreviewId":false,"typekitSubgroupKitId":"vpr2ezi","paragraphRecommended":false,"faces":[{"typekitKey":"n3","name":"Light","lookupKey":"268bd89c277e6a64707ae71ffbf308d69f4683bcc4","weight":"300","style":"","subgroupName":"Bellfort Script"},{"typekitKey":"n4","name":"Regular","lookupKey":"268bd89c277e6a64707ae71ffbf308d6814a83a1dce6cf","weight":"400","style":"","subgroupName":"Bellfort Script"}]},"Calluna":{"subgroupName":"Calluna","cssName":"calluna","typekitPreviewId":"vybr","typekitSubgroupKitId":"pwy8yyx","paragraphRecommended":true,"faces":[{"typekitKey":"n4","name":"Regular","lookupKey":"278fd89c347f793d024ce318fee20e","weight":"400","style":"","subgroupName":"Calluna"},{"typekitKey":"i4","name":"Italic","lookupKey":"278fd89c347f793d195de501fbe0","weight":"400","style":"italic","subgroupName":"Calluna"},{"typekitKey":"n7","name":"Bold","lookupKey":"278fd89c347f793d1246e809","weight":"700","style":"","subgroupName":"Calluna"},{"typekitKey":"i7","name":"Bold Italic","lookupKey":"278fd89c347f793d1246e809b2ca089abf4687","weight":"700","style":"italic","subgroupName":"Calluna"}]},"Clarendon Text Pro":{"subgroupName":"Clarendon Text Pro","cssName":"clarendon-text-pro","typekitPreviewId":"kctd","typekitSubgroupKitId":"tes3lrh","paragraphRecommended":false,"faces":[{"typekitKey":"n4","name":"Regular","lookupKey":"2782d582247f7c7f3e09d008eaf75caba140c986d5e0c86875bb","weight":"400","style":"","subgroupName":"Clarendon Text Pro"},{"typekitKey":"i4","name":"Italic","lookupKey":"2782d582247f7c7f3e09d008eaf75caba140c99dc4e6d16d77","weight":"400","style":"italic","subgroupName":"Clarendon Text Pro"},{"typekitKey":"n7","name":"Bold","lookupKey":"2782d582247f7c7f3e09d008eaf75caba140c996dfebd9","weight":"700","style":"","subgroupName":"Clarendon Text Pro"},{"typekitKey":"i7","name":"Bold Italic","lookupKey":"2782d582247f7c7f3e09d008eaf75caba140c996dfebd9245dbd547a978a","weight":"700","style":"italic","subgroupName":"Clarendon Text Pro"}]},"Courier Std":{"subgroupName":"Courier Std","cssName":"courier-std","typekitPreviewId":"jxcp","typekitSubgroupKitId":"oeu5sen","paragraphRecommended":false,"faces":[{"typekitKey":"n4","name":"Regular","lookupKey":"2781c18228746a30035de040c0e61b8ebf4e96","weight":"400","style":"","subgroupName":"Courier Std"},{"typekitKey":"n7","name":"Bold","lookupKey":"2781c18228746a30035de040d0ec109f","weight":"700","style":"","subgroupName":"Courier Std"}]},"Didot Headline":{"subgroupName":"Didot Headline","cssName":"spark-didot-headline","typekitPreviewId":false,"typekitSubgroupKitId":"gkw8jcv","paragraphRecommended":false,"faces":[{"typekitKey":"n4","name":"Regular","lookupKey":"2087d09f35315075314de804fce651a9b64891b8d1f5","weight":"400","style":"","subgroupName":"Didot Headline"},{"typekitKey":"n6","name":"Demi","lookupKey":"2087d09f35315075314de804fce651bfb6428d","weight":"600","style":"","subgroupName":"Didot Headline"},{"typekitKey":"n7","name":"Bold","lookupKey":"2087d09f35315075314de804fce651b9bc4380","weight":"700","style":"","subgroupName":"Didot Headline"}]},"Futura PT":{"subgroupName":"Futura PT","cssName":"futura-pt","typekitPreviewId":"ftnk","typekitSubgroupKitId":"icc1sfj","paragraphRecommended":false,"faces":[{"typekitKey":"n5","name":"Medium","lookupKey":"229bc085337038400404c908f6ea0996","weight":"500","subgroupName":"Futura PT"},{"typekitKey":"n7","name":"Heavy","lookupKey":"229bc085337038400404cc08f3f505","weight":"700","style":"","subgroupName":"Futura PT"}]},"Lato":{"subgroupName":"Lato","cssName":"lato","typekitPreviewId":"jxfv","typekitSubgroupKitId":"oea2wtv","paragraphRecommended":true,"faces":[{"typekitKey":"n3","name":"Light","lookupKey":"288fc09f6c5d7177385d","weight":"300","subgroupName":"Lato"},{"typekitKey":"n4","name":"Regular","lookupKey":"288fc09f6c437d772545e51f","weight":"400","subgroupName":"Lato"},{"typekitKey":"i4","name":"Italic","lookupKey":"288fc09f6c586c713c40e7","weight":"400","style":"italic","subgroupName":"Lato"},{"typekitKey":"n7","name":"Bold","lookupKey":"288fc09f6c53777c34","weight":"700","subgroupName":"Lato"},{"typekitKey":"i9","name":"Black Italic","lookupKey":"288fc09f6c5374713342a424e6e21092b0","weight":"900","style":"italic","subgroupName":"Lato"}]},"Local Brewery":{"subgroupName":"Local Brewery","cssName":"spark-local-brewery","typekitPreviewId":false,"typekitSubgroupKitId":"vfd3hup","paragraphRecommended":false,"faces":[{"typekitKey":"n7","name":"Bold","lookupKey":"2881d7912d315a62355ee11febae3e94bf4b","weight":"700","style":"","subgroupName":"Local Brewery"}]},"Local Brewery Four":{"subgroupName":"Local Brewery Four","cssName":"spark-local-brewery-four","typekitPreviewId":false,"typekitSubgroupKitId":"txs8zsv","paragraphRecommended":false,"faces":[{"typekitKey":"n4","name":"Regular","lookupKey":"2881d7912d315a62355ee11feba33a94a65dc986d5e0c86875bb","weight":"400","subgroupName":"Local Brewery Four"}]},"LTC Bodoni 175":{"subgroupName":"LTC Bodoni 175","cssName":"ltc-bodoni-175","typekitPreviewId":"mrnw","typekitSubgroupKitId":"meq2xke","paragraphRecommended":false,"faces":[{"typekitKey":"n4","name":"Regular","lookupKey":"28baf7d0037e7c7f3e40a45ca5b651a9b64891b8d1f5","weight":"400","style":"","subgroupName":"LTC Bodoni 175"},{"typekitKey":"i4","name":"Italic","lookupKey":"28baf7d0037e7c7f3e40a45ca5b651b2a74e88bdd3","weight":"400","style":"italic","subgroupName":"LTC Bodoni 175"}]},"Museo Sans Rounded":{"subgroupName":"Museo Sans Rounded","cssName":"museo-sans-rounded","typekitPreviewId":"dtgx","typekitSubgroupKitId":"iuk5brd","paragraphRecommended":false,"faces":[{"typekitKey":"n5","name":"500","lookupKey":"299bc7952e314b713e5aa43ffdf6129fb64bc9e180b7","weight":"500","style":"","subgroupName":"Museo Sans Rounded"},{"typekitKey":"n7","name":"700","lookupKey":"299bc7952e314b713e5aa43ffdf6129fb64bc9e380b7","weight":"700","style":"","subgroupName":"Museo Sans Rounded"}]},"Museo Slab":{"subgroupName":"Museo Slab","cssName":"museo-slab","typekitPreviewId":"llxb","typekitSubgroupKitId":"gom8xuo","paragraphRecommended":true,"faces":[{"typekitKey":"n3","name":"300","lookupKey":"299bc7952e314b7c314ba95ea2b3","weight":"300","style":"","subgroupName":"Museo Slab"},{"typekitKey":"i3","name":"300 Italic","lookupKey":"299bc7952e314b7c314ba95ea2b35cb2a74e88bdd3","weight":"300","style":"italic","subgroupName":"Museo Slab"},{"typekitKey":"n7","name":"700","lookupKey":"299bc7952e314b7c314ba95aa2b3","weight":"700","style":"","subgroupName":"Museo Slab"},{"typekitKey":"i7","name":"700 Italic","lookupKey":"299bc7952e314b7c314ba95aa2b35cb2a74e88bdd3","weight":"700","style":"italic","subgroupName":"Museo Slab"},{"typekitKey":"n9","name":"1000","lookupKey":"299bc7952e314b7c314ba95ca2b34c","weight":"900","style":"","subgroupName":"Museo Slab"}]},"Proxima Nova":{"subgroupName":"Proxima Nova","cssName":"proxima-nova","typekitPreviewId":"vcsm","typekitSubgroupKitId":"yfs6lii","paragraphRecommended":true,"faces":[{"typekitKey":"n1","name":"Thin","lookupKey":"349cdb88287c79301e46f20cbfd71492bd","weight":"100","style":"","subgroupName":"Proxima Nova"},{"typekitKey":"i1","name":"Thin Italic","lookupKey":"349cdb88287c79301e46f20cbfd71492bd0fada0d1ebd467","weight":"100","style":"italic","subgroupName":"Proxima Nova"},{"typekitKey":"n3","name":"Light","lookupKey":"349cdb88287c79301e46f20cbfcf159cbb5b","weight":"300","style":"","subgroupName":"Proxima Nova"},{"typekitKey":"i3","name":"Light Italic","lookupKey":"349cdb88287c79301e46f20cbfcf159cbb5bc49dc4e6d16d77","weight":"300","style":"italic","subgroupName":"Proxima Nova"},{"typekitKey":"n4","name":"Regular","lookupKey":"349cdb88287c79301e46f20cbfd1199ca64385a6","weight":"400","style":"","subgroupName":"Proxima Nova"},{"typekitKey":"i4","name":"Regular Italic","lookupKey":"349cdb88287c79301e46f20cbfd1199ca64385a690cec96578a056","weight":"400","style":"italic","subgroupName":"Proxima Nova"},{"typekitKey":"n5","name":"Medium","lookupKey":"349cdb88287c79301e46f20cbfce199fba5a89","weight":"500","style":"","subgroupName":"Proxima Nova"},{"typekitKey":"i5","name":"Medium Italic","lookupKey":"349cdb88287c79301e46f20cbfce199fba5a89f4f9f3dc687daa","weight":"500","style":"italic","subgroupName":"Proxima Nova"},{"typekitKey":"n6","name":"Semibold","lookupKey":"349cdb88287c79301e46f20cbfd01996ba4d8bb8d4","weight":"600","style":"","subgroupName":"Proxima Nova"},{"typekitKey":"i6","name":"Semibold Italic","lookupKey":"349cdb88287c79301e46f20cbfd01996ba4d8bb8d4a7f47075a55c75","weight":"600","style":"italic","subgroupName":"Proxima Nova"},{"typekitKey":"n7","name":"Bold","lookupKey":"349cdb88287c79301e46f20cbfc11397b7","weight":"700","style":"","subgroupName":"Proxima Nova"},{"typekitKey":"i7","name":"Bold Italic","lookupKey":"349cdb88287c79301e46f20cbfc11397b70fada0d1ebd467","weight":"700","style":"italic","subgroupName":"Proxima Nova"},{"typekitKey":"n8","name":"Extrabold","lookupKey":"349cdb88287c79301e46f20cbfc6048fa14e86bbdce3","weight":"800","style":"","subgroupName":"Proxima Nova"},{"typekitKey":"i8","name":"Extrabold Italic","lookupKey":"349cdb88287c79301e46f20cbfc6048fa14e86bbdce39d4d60a8597f9d","weight":"800","style":"italic","subgroupName":"Proxima Nova"},{"typekitKey":"n9","name":"Black","lookupKey":"349cdb88287c79301e46f20cbfc1109ab044","weight":"900","style":"","subgroupName":"Proxima Nova"},{"typekitKey":"i9","name":"Black Italic","lookupKey":"349cdb88287c79301e46f20cbfc1109ab044c49dc4e6d16d77","weight":"900","style":"italic","subgroupName":"Proxima Nova"}]},"PT Sans":{"subgroupName":"PT Sans","cssName":"pt-sans","typekitPreviewId":"lllr","typekitSubgroupKitId":"sys1rxz","paragraphRecommended":true,"faces":[{"typekitKey":"n4","name":"Regular","lookupKey":"34ba94a3207f6b3d024ce318fee20e","weight":"400","style":"","subgroupName":"PT Sans"},{"typekitKey":"i4","name":"Italic","lookupKey":"34ba94a3207f6b3d195de501fbe0","weight":"400","style":"italic","subgroupName":"PT Sans"},{"typekitKey":"n7","name":"Bold","lookupKey":"34ba94a3207f6b3d1246e809","weight":"700","style":"","subgroupName":"PT Sans"},{"typekitKey":"i7","name":"Bold Italic","lookupKey":"34ba94a3207f6b3d1246e809b2ca089abf4687","weight":"700","style":"italic","subgroupName":"PT Sans"}]},"PT Sans Narrow":{"subgroupName":"PT Sans Narrow","cssName":"pt-sans-narrow","typekitPreviewId":"rmcr","typekitSubgroupKitId":"xfq6xbo","paragraphRecommended":false,"faces":[{"typekitKey":"n4","name":"Regular","lookupKey":"34ba94a3207f6b301e48f61ffdf451a9b64891b8d1f5","weight":"400","style":"","subgroupName":"PT Sans Narrow"},{"typekitKey":"n7","name":"Bold","lookupKey":"34ba94a3207f6b301e48f61ffdf451b9bc4380","weight":"700","style":"","subgroupName":"PT Sans Narrow"}]},"PT Serif":{"subgroupName":"PT Serif","cssName":"pt-serif","typekitPreviewId":"xcqq","typekitSubgroupKitId":"lyd0hdu","paragraphRecommended":true,"faces":[{"typekitKey":"n4","name":"Regular","lookupKey":"34ba94a3246371767d7be10ae7ef1d89","weight":"400","style":"","subgroupName":"PT Serif"},{"typekitKey":"i4","name":"Italic","lookupKey":"34ba94a3246371767d60f00cfeea1f","weight":"400","style":"italic","subgroupName":"PT Serif"},{"typekitKey":"n7","name":"Bold","lookupKey":"34ba94a3246371767d6beb01f6","weight":"700","style":"","subgroupName":"PT Serif"},{"typekitKey":"i7","name":"Bold Italic","lookupKey":"34ba94a3246371767d6beb01f6a3358fb2438db7","weight":"700","style":"italic","subgroupName":"PT Serif"}]},"Voltage":{"subgroupName":"Voltage","cssName":"spark-voltage","typekitPreviewId":false,"typekitSubgroupKitId":"cjx2klj","paragraphRecommended":false,"faces":[{"typekitKey":"n3","name":"Light","lookupKey":"3281d88420767d3d1c40e305e6","weight":"300","style":"","subgroupName":"Voltage"},{"typekitKey":"n4","name":"Regular","lookupKey":"3281d88420767d3d024ce318fee20e","weight":"400","style":"","subgroupName":"Voltage"},{"typekitKey":"n7","name":"Bold","lookupKey":"3281d88420767d3d1246e809","weight":"700","style":"","subgroupName":"Voltage"}]},"Wanderlust Shine":{"subgroupName":"Wanderlust Shine","cssName":"spark-wanderlust-shine","typekitPreviewId":false,"typekitSubgroupKitId":"etu6mud","paragraphRecommended":false,"faces":[{"typekitKey":"n4","name":"Regular","lookupKey":"338fda9424637465235da43efaea129efe7d81b3c5ebdc76","weight":"400","subgroupName":"Wanderlust Shine"}]},"Raleway":{"subgroupName":"Raleway","cssName":"raleway","typekitPreviewId":"nqdy","typekitSubgroupKitId":"mce7zxv","paragraphRecommended":false,"faces":[{"typekitKey":"n4","name":"Regular","lookupKey":"368fd8953670613d024ce318fee20e","weight":"400","subgroupName":"Raleway"},{"typekitKey":"n9","name":"Heavy","lookupKey":"368fd8953670613d184ce51beb","weight":"900","subgroupName":"Raleway"}]}},"faces":{"258dc19d287f38402246a43ef7ee15db90408ab0d5e9ce6170e4797f99816d":{"typekitKey":"n3","name":"Light","lookupKey":"258dc19d287f38402246a43ef7ee15db90408ab0d5e9ce6170e4797f99816d","weight":"300","style":"","subgroupName":"Acumin Pro Semi Condensed"},"258dc19d287f38402246a43ef7ee15db90408ab0d5e9ce6170e4797f99816d23b74c91cf9a8b":{"typekitKey":"i3","name":"Light Italic","lookupKey":"258dc19d287f38402246a43ef7ee15db90408ab0d5e9ce6170e4797f99816d23b74c91cf9a8b","weight":"300","style":"italic","subgroupName":"Acumin Pro Semi Condensed"},"258dc19d287f38402246a43ef7ee15db90408ab0d5e9ce6170e4667393807b6c925c":{"typekitKey":"n6","name":"Semibold","lookupKey":"258dc19d287f38402246a43ef7ee15db90408ab0d5e9ce6170e4667393807b6c925c","weight":"600","style":"","subgroupName":"Acumin Pro Semi Condensed"},"258dc19d287f38402246a43ef7ee15db90408ab0d5e9ce6170e4667393807b6c925cd0ea87899a41d2":{"typekitKey":"i6","name":"Semibold Italic","lookupKey":"258dc19d287f38402246a43ef7ee15db90408ab0d5e9ce6170e4667393807b6c925cd0ea87899a41d2","weight":"600","style":"italic","subgroupName":"Acumin Pro Semi Condensed"},"258adb9224315b712345eb03b2d30e94fe7d81b3c5ebdc76":{"typekitKey":"n4","name":"Regular","lookupKey":"258adb9224315b712345eb03b2d30e94fe7d81b3c5ebdc76","weight":"400","style":"","subgroupName":"Adobe Caslon Pro"},"258adb9224315b712345eb03b2d30e94fe6690b5dceede":{"typekitKey":"i4","name":"Italic","lookupKey":"258adb9224315b712345eb03b2d30e94fe6690b5dceede","weight":"400","style":"italic","subgroupName":"Adobe Caslon Pro"},"258adb9224315b712345eb03b2d30e94fe7c81b9d9e5d26870":{"typekitKey":"n6","name":"Semibold","lookupKey":"258adb9224315b712345eb03b2d30e94fe7c81b9d9e5d26870","weight":"600","style":"","subgroupName":"Adobe Caslon Pro"},"258adb9224315b712345eb03b2d30e94fe7c81b9d9e5d26870e97c629f857060":{"typekitKey":"i6","name":"Semibold Italic","lookupKey":"258adb9224315b712345eb03b2d30e94fe7c81b9d9e5d26870e97c629f857060","weight":"600","style":"italic","subgroupName":"Adobe Caslon Pro"},"258adb9224315b712345eb03b2d30e94fe6d8bb8d4":{"typekitKey":"n7","name":"Bold","lookupKey":"258adb9224315b712345eb03b2d30e94fe6d8bb8d4","weight":"700","style":"","subgroupName":"Adobe Caslon Pro"},"258adb9224315b712345eb03b2d30e94fe6d8bb8d4a7f47075a55c75":{"typekitKey":"i7","name":"Bold Italic","lookupKey":"258adb9224315b712345eb03b2d30e94fe6d8bb8d4a7f47075a55c75","weight":"700","style":"italic","subgroupName":"Adobe Caslon Pro"},"2594dbd0127076637d65ed0afaf7":{"typekitKey":"n3","name":"Light","lookupKey":"2594dbd0127076637d65ed0afaf7","weight":"300","style":"","subgroupName":"Azo Sans"},"2594dbd0127076637d65ed0afaf75cb2a74e88bdd3":{"typekitKey":"i3","name":"Light Italic","lookupKey":"2594dbd0127076637d65ed0afaf75cb2a74e88bdd3","weight":"300","style":"italic","subgroupName":"Azo Sans"},"2594dbd0127076637d6beb01f6":{"typekitKey":"n7","name":"Bold","lookupKey":"2594dbd0127076637d6beb01f6","weight":"700","style":"","subgroupName":"Azo Sans"},"2594dbd0127076637d6beb01f6a3358fb2438db7":{"typekitKey":"i7","name":"Bold Italic","lookupKey":"2594dbd0127076637d6beb01f6a3358fb2438db7","weight":"700","style":"italic","subgroupName":"Azo Sans"},"268bd89c277e6a64707ae71ffbf308d69f4683bcc4":{"typekitKey":"n3","name":"Light","lookupKey":"268bd89c277e6a64707ae71ffbf308d69f4683bcc4","weight":"300","style":"","subgroupName":"Bellfort Script"},"268bd89c277e6a64707ae71ffbf308d6814a83a1dce6cf":{"typekitKey":"n4","name":"Regular","lookupKey":"268bd89c277e6a64707ae71ffbf308d6814a83a1dce6cf","weight":"400","style":"","subgroupName":"Bellfort Script"},"278fd89c347f793d024ce318fee20e":{"typekitKey":"n4","name":"Regular","lookupKey":"278fd89c347f793d024ce318fee20e","weight":"400","style":"","subgroupName":"Calluna"},"278fd89c347f793d195de501fbe0":{"typekitKey":"i4","name":"Italic","lookupKey":"278fd89c347f793d195de501fbe0","weight":"400","style":"italic","subgroupName":"Calluna"},"278fd89c347f793d1246e809":{"typekitKey":"n7","name":"Bold","lookupKey":"278fd89c347f793d1246e809","weight":"700","style":"","subgroupName":"Calluna"},"278fd89c347f793d1246e809b2ca089abf4687":{"typekitKey":"i7","name":"Bold Italic","lookupKey":"278fd89c347f793d1246e809b2ca089abf4687","weight":"700","style":"italic","subgroupName":"Calluna"},"2782d582247f7c7f3e09d008eaf75caba140c986d5e0c86875bb":{"typekitKey":"n4","name":"Regular","lookupKey":"2782d582247f7c7f3e09d008eaf75caba140c986d5e0c86875bb","weight":"400","style":"","subgroupName":"Clarendon Text Pro"},"2782d582247f7c7f3e09d008eaf75caba140c99dc4e6d16d77":{"typekitKey":"i4","name":"Italic","lookupKey":"2782d582247f7c7f3e09d008eaf75caba140c99dc4e6d16d77","weight":"400","style":"italic","subgroupName":"Clarendon Text Pro"},"2782d582247f7c7f3e09d008eaf75caba140c996dfebd9":{"typekitKey":"n7","name":"Bold","lookupKey":"2782d582247f7c7f3e09d008eaf75caba140c996dfebd9","weight":"700","style":"","subgroupName":"Clarendon Text Pro"},"2782d582247f7c7f3e09d008eaf75caba140c996dfebd9245dbd547a978a":{"typekitKey":"i7","name":"Bold Italic","lookupKey":"2782d582247f7c7f3e09d008eaf75caba140c996dfebd9245dbd547a978a","weight":"700","style":"italic","subgroupName":"Clarendon Text Pro"},"2781c18228746a30035de040c0e61b8ebf4e96":{"typekitKey":"n4","name":"Regular","lookupKey":"2781c18228746a30035de040c0e61b8ebf4e96","weight":"400","style":"","subgroupName":"Courier Std"},"2781c18228746a30035de040d0ec109f":{"typekitKey":"n7","name":"Bold","lookupKey":"2781c18228746a30035de040d0ec109f","weight":"700","style":"","subgroupName":"Courier Std"},"2087d09f35315075314de804fce651a9b64891b8d1f5":{"typekitKey":"n4","name":"Regular","lookupKey":"2087d09f35315075314de804fce651a9b64891b8d1f5","weight":"400","style":"","subgroupName":"Didot Headline"},"2087d09f35315075314de804fce651bfb6428d":{"typekitKey":"n6","name":"Demi","lookupKey":"2087d09f35315075314de804fce651bfb6428d","weight":"600","style":"","subgroupName":"Didot Headline"},"2087d09f35315075314de804fce651b9bc4380":{"typekitKey":"n7","name":"Bold","lookupKey":"2087d09f35315075314de804fce651b9bc4380","weight":"700","style":"","subgroupName":"Didot Headline"},"229bc085337038400404c908f6ea0996":{"typekitKey":"n5","name":"Medium","lookupKey":"229bc085337038400404c908f6ea0996","weight":"500","subgroupName":"Futura PT"},"229bc085337038400404cc08f3f505":{"typekitKey":"n7","name":"Heavy","lookupKey":"229bc085337038400404cc08f3f505","weight":"700","style":"","subgroupName":"Futura PT"},"288fc09f6c5d7177385d":{"typekitKey":"n3","name":"Light","lookupKey":"288fc09f6c5d7177385d","weight":"300","subgroupName":"Lato"},"288fc09f6c437d772545e51f":{"typekitKey":"n4","name":"Regular","lookupKey":"288fc09f6c437d772545e51f","weight":"400","subgroupName":"Lato"},"288fc09f6c586c713c40e7":{"typekitKey":"i4","name":"Italic","lookupKey":"288fc09f6c586c713c40e7","weight":"400","style":"italic","subgroupName":"Lato"},"288fc09f6c53777c34":{"typekitKey":"n7","name":"Bold","lookupKey":"288fc09f6c53777c34","weight":"700","subgroupName":"Lato"},"288fc09f6c5374713342a424e6e21092b0":{"typekitKey":"i9","name":"Black Italic","lookupKey":"288fc09f6c5374713342a424e6e21092b0","weight":"900","style":"italic","subgroupName":"Lato"},"2881d7912d315a62355ee11febae3e94bf4b":{"typekitKey":"n7","name":"Bold","lookupKey":"2881d7912d315a62355ee11febae3e94bf4b","weight":"700","style":"","subgroupName":"Local Brewery"},"2881d7912d315a62355ee11feba33a94a65dc986d5e0c86875bb":{"typekitKey":"n4","name":"Regular","lookupKey":"2881d7912d315a62355ee11feba33a94a65dc986d5e0c86875bb","weight":"400","subgroupName":"Local Brewery Four"},"28baf7d0037e7c7f3e40a45ca5b651a9b64891b8d1f5":{"typekitKey":"n4","name":"Regular","lookupKey":"28baf7d0037e7c7f3e40a45ca5b651a9b64891b8d1f5","weight":"400","style":"","subgroupName":"LTC Bodoni 175"},"28baf7d0037e7c7f3e40a45ca5b651b2a74e88bdd3":{"typekitKey":"i4","name":"Italic","lookupKey":"28baf7d0037e7c7f3e40a45ca5b651b2a74e88bdd3","weight":"400","style":"italic","subgroupName":"LTC Bodoni 175"},"299bc7952e314b713e5aa43ffdf6129fb64bc9e180b7":{"typekitKey":"n5","name":"500","lookupKey":"299bc7952e314b713e5aa43ffdf6129fb64bc9e180b7","weight":"500","style":"","subgroupName":"Museo Sans Rounded"},"299bc7952e314b713e5aa43ffdf6129fb64bc9e380b7":{"typekitKey":"n7","name":"700","lookupKey":"299bc7952e314b713e5aa43ffdf6129fb64bc9e380b7","weight":"700","style":"","subgroupName":"Museo Sans Rounded"},"299bc7952e314b7c314ba95ea2b3":{"typekitKey":"n3","name":"300","lookupKey":"299bc7952e314b7c314ba95ea2b3","weight":"300","style":"","subgroupName":"Museo Slab"},"299bc7952e314b7c314ba95ea2b35cb2a74e88bdd3":{"typekitKey":"i3","name":"300 Italic","lookupKey":"299bc7952e314b7c314ba95ea2b35cb2a74e88bdd3","weight":"300","style":"italic","subgroupName":"Museo Slab"},"299bc7952e314b7c314ba95aa2b3":{"typekitKey":"n7","name":"700","lookupKey":"299bc7952e314b7c314ba95aa2b3","weight":"700","style":"","subgroupName":"Museo Slab"},"299bc7952e314b7c314ba95aa2b35cb2a74e88bdd3":{"typekitKey":"i7","name":"700 Italic","lookupKey":"299bc7952e314b7c314ba95aa2b35cb2a74e88bdd3","weight":"700","style":"italic","subgroupName":"Museo Slab"},"299bc7952e314b7c314ba95ca2b34c":{"typekitKey":"n9","name":"1000","lookupKey":"299bc7952e314b7c314ba95ca2b34c","weight":"900","style":"","subgroupName":"Museo Slab"},"349cdb88287c79301e46f20cbfd71492bd":{"typekitKey":"n1","name":"Thin","lookupKey":"349cdb88287c79301e46f20cbfd71492bd","weight":"100","style":"","subgroupName":"Proxima Nova"},"349cdb88287c79301e46f20cbfd71492bd0fada0d1ebd467":{"typekitKey":"i1","name":"Thin Italic","lookupKey":"349cdb88287c79301e46f20cbfd71492bd0fada0d1ebd467","weight":"100","style":"italic","subgroupName":"Proxima Nova"},"349cdb88287c79301e46f20cbfcf159cbb5b":{"typekitKey":"n3","name":"Light","lookupKey":"349cdb88287c79301e46f20cbfcf159cbb5b","weight":"300","style":"","subgroupName":"Proxima Nova"},"349cdb88287c79301e46f20cbfcf159cbb5bc49dc4e6d16d77":{"typekitKey":"i3","name":"Light Italic","lookupKey":"349cdb88287c79301e46f20cbfcf159cbb5bc49dc4e6d16d77","weight":"300","style":"italic","subgroupName":"Proxima Nova"},"349cdb88287c79301e46f20cbfd1199ca64385a6":{"typekitKey":"n4","name":"Regular","lookupKey":"349cdb88287c79301e46f20cbfd1199ca64385a6","weight":"400","style":"","subgroupName":"Proxima Nova"},"349cdb88287c79301e46f20cbfd1199ca64385a690cec96578a056":{"typekitKey":"i4","name":"Regular Italic","lookupKey":"349cdb88287c79301e46f20cbfd1199ca64385a690cec96578a056","weight":"400","style":"italic","subgroupName":"Proxima Nova"},"349cdb88287c79301e46f20cbfce199fba5a89":{"typekitKey":"n5","name":"Medium","lookupKey":"349cdb88287c79301e46f20cbfce199fba5a89","weight":"500","style":"","subgroupName":"Proxima Nova"},"349cdb88287c79301e46f20cbfce199fba5a89f4f9f3dc687daa":{"typekitKey":"i5","name":"Medium Italic","lookupKey":"349cdb88287c79301e46f20cbfce199fba5a89f4f9f3dc687daa","weight":"500","style":"italic","subgroupName":"Proxima Nova"},"349cdb88287c79301e46f20cbfd01996ba4d8bb8d4":{"typekitKey":"n6","name":"Semibold","lookupKey":"349cdb88287c79301e46f20cbfd01996ba4d8bb8d4","weight":"600","style":"","subgroupName":"Proxima Nova"},"349cdb88287c79301e46f20cbfd01996ba4d8bb8d4a7f47075a55c75":{"typekitKey":"i6","name":"Semibold Italic","lookupKey":"349cdb88287c79301e46f20cbfd01996ba4d8bb8d4a7f47075a55c75","weight":"600","style":"italic","subgroupName":"Proxima Nova"},"349cdb88287c79301e46f20cbfc11397b7":{"typekitKey":"n7","name":"Bold","lookupKey":"349cdb88287c79301e46f20cbfc11397b7","weight":"700","style":"","subgroupName":"Proxima Nova"},"349cdb88287c79301e46f20cbfc11397b70fada0d1ebd467":{"typekitKey":"i7","name":"Bold Italic","lookupKey":"349cdb88287c79301e46f20cbfc11397b70fada0d1ebd467","weight":"700","style":"italic","subgroupName":"Proxima Nova"},"349cdb88287c79301e46f20cbfc6048fa14e86bbdce3":{"typekitKey":"n8","name":"Extrabold","lookupKey":"349cdb88287c79301e46f20cbfc6048fa14e86bbdce3","weight":"800","style":"","subgroupName":"Proxima Nova"},"349cdb88287c79301e46f20cbfc6048fa14e86bbdce39d4d60a8597f9d":{"typekitKey":"i8","name":"Extrabold Italic","lookupKey":"349cdb88287c79301e46f20cbfc6048fa14e86bbdce39d4d60a8597f9d","weight":"800","style":"italic","subgroupName":"Proxima Nova"},"349cdb88287c79301e46f20cbfc1109ab044":{"typekitKey":"n9","name":"Black","lookupKey":"349cdb88287c79301e46f20cbfc1109ab044","weight":"900","style":"","subgroupName":"Proxima Nova"},"349cdb88287c79301e46f20cbfc1109ab044c49dc4e6d16d77":{"typekitKey":"i9","name":"Black Italic","lookupKey":"349cdb88287c79301e46f20cbfc1109ab044c49dc4e6d16d77","weight":"900","style":"italic","subgroupName":"Proxima Nova"},"34ba94a3207f6b3d024ce318fee20e":{"typekitKey":"n4","name":"Regular","lookupKey":"34ba94a3207f6b3d024ce318fee20e","weight":"400","style":"","subgroupName":"PT Sans"},"34ba94a3207f6b3d195de501fbe0":{"typekitKey":"i4","name":"Italic","lookupKey":"34ba94a3207f6b3d195de501fbe0","weight":"400","style":"italic","subgroupName":"PT Sans"},"34ba94a3207f6b3d1246e809":{"typekitKey":"n7","name":"Bold","lookupKey":"34ba94a3207f6b3d1246e809","weight":"700","style":"","subgroupName":"PT Sans"},"34ba94a3207f6b3d1246e809b2ca089abf4687":{"typekitKey":"i7","name":"Bold Italic","lookupKey":"34ba94a3207f6b3d1246e809b2ca089abf4687","weight":"700","style":"italic","subgroupName":"PT Sans"},"34ba94a3207f6b301e48f61ffdf451a9b64891b8d1f5":{"typekitKey":"n4","name":"Regular","lookupKey":"34ba94a3207f6b301e48f61ffdf451a9b64891b8d1f5","weight":"400","style":"","subgroupName":"PT Sans Narrow"},"34ba94a3207f6b301e48f61ffdf451b9bc4380":{"typekitKey":"n7","name":"Bold","lookupKey":"34ba94a3207f6b301e48f61ffdf451b9bc4380","weight":"700","style":"","subgroupName":"PT Sans Narrow"},"34ba94a3246371767d7be10ae7ef1d89":{"typekitKey":"n4","name":"Regular","lookupKey":"34ba94a3246371767d7be10ae7ef1d89","weight":"400","style":"","subgroupName":"PT Serif"},"34ba94a3246371767d60f00cfeea1f":{"typekitKey":"i4","name":"Italic","lookupKey":"34ba94a3246371767d60f00cfeea1f","weight":"400","style":"italic","subgroupName":"PT Serif"},"34ba94a3246371767d6beb01f6":{"typekitKey":"n7","name":"Bold","lookupKey":"34ba94a3246371767d6beb01f6","weight":"700","style":"","subgroupName":"PT Serif"},"34ba94a3246371767d6beb01f6a3358fb2438db7":{"typekitKey":"i7","name":"Bold Italic","lookupKey":"34ba94a3246371767d6beb01f6a3358fb2438db7","weight":"700","style":"italic","subgroupName":"PT Serif"},"3281d88420767d3d1c40e305e6":{"typekitKey":"n3","name":"Light","lookupKey":"3281d88420767d3d1c40e305e6","weight":"300","style":"","subgroupName":"Voltage"},"3281d88420767d3d024ce318fee20e":{"typekitKey":"n4","name":"Regular","lookupKey":"3281d88420767d3d024ce318fee20e","weight":"400","style":"","subgroupName":"Voltage"},"3281d88420767d3d1246e809":{"typekitKey":"n7","name":"Bold","lookupKey":"3281d88420767d3d1246e809","weight":"700","style":"","subgroupName":"Voltage"},"338fda9424637465235da43efaea129efe7d81b3c5ebdc76":{"typekitKey":"n4","name":"Regular","lookupKey":"338fda9424637465235da43efaea129efe7d81b3c5ebdc76","weight":"400","subgroupName":"Wanderlust Shine"},"368fd8953670613d024ce318fee20e":{"typekitKey":"n4","name":"Regular","lookupKey":"368fd8953670613d024ce318fee20e","weight":"400","subgroupName":"Raleway"},"368fd8953670613d184ce51beb":{"typekitKey":"n9","name":"Heavy","lookupKey":"368fd8953670613d184ce51beb","weight":"900","subgroupName":"Raleway"}}}')},89:function(e,t,n){var o,i;o=[n(3),n(0),n(2),n(1),n(21),n(9),n(38),n(4),n(10),n(256),n(7),n(263),n(64)],void 0===(i=function(e,t,n,o,i,a,r,s,u,c,d,l,h){"use strict";var g=new u.default({color:"firebrick",name:"App Storage"});return n.Model.extend({seedNewDoc:function(e){},initialize:function(){this.initPromise=i.storageReady()},initSyncGroup:function(){this.initPromise=i.storageReady()},setSaveThumbOnLoad:function(){this._saveThumbOnLoad=!0},saveThumbOnLoad:function(){var e=this._saveThumbOnLoad;return this._saveThumbOnLoad=!1,e},_startingCreateDoc:function(){},releaseBatonLock:function(){return l.releaseBatonAndCloseSession(this.currentDoc)},_createDoc:function(e){this.currentDoc=null,this._startingCreateDoc(),this.initPromise.then(function(t){this.createDocFromConfig(t,e,this.creationDefer),e.assetId&&(this.rootObjectId=e.assetId)}.bind(this),function(e){this.creationDefer.reject(e)}.bind(this)).catch(function(e){this.creationDefer.reject(e)}.bind(this)).done()},createDocFromConfig:function(e,t,n){t.assetUrn?this._createDocLoad(t,n):this._createDocNewACP(t,n)},_createDocLoad:function(e,t){i.syncEnter();var n=this.getSetting("syncGroup");h.load().then(function(t){return t.ACPSparkController.getCompositeDoc(e.assetUrn).then(function(t){if(!t){var n=new Error("_createDocLoad failed to get composite doc with urn: "+e.assetUrn);throw n.code="NO_COMPOSITE",n}return t.getMyApp().checkDocCompatibility(t,"opening").then(function(){return this.currentDoc=t,o.resolve()}.bind(this))}.bind(this))}.bind(this)).then(function(){a.setCurrentProjectId(e.assetId);var o=a.getProductName()||n;a.trackEvent("editor:loadedProject",{contextData:["projectId"]},o+":editor"),i.setSyncMode(i.MODE_EDITOR,this.currentDoc),i.syncLeave(),marvel.events.trigger("loaded-composite-doc",this.currentDoc),r.augmentLoadDoc(this.currentDoc,e),t.resolve(this.currentDoc)}.bind(this)).catch(function(e){this.currentDoc=null,t.reject(e)}.bind(this)).done()},_createDocNew:function(e,t,n){return this._createDocNewACP(t,n)},_createDocNewACP:function(e,t){var n=this.getSetting("syncGroup"),o=i.dcx.newEmptyComposite(this.getSetting("newDocName"),this.getSetting("doctype"));return this.currentDoc=new c({name:o.current.name,id:o.id,syncGroupName:n,compositeObj:o}),i.setSyncMode(i.MODE_EDITOR,this.currentDoc),this._setProjectContexts(this.currentDoc,e),r.augmentLoadDoc(this.currentDoc,e),r.augmentNewDoc(this.currentDoc,e).then(function(){return this.seedNewDoc(this.currentDoc),t.resolve(this.currentDoc),!0}.bind(this))},_setProjectContexts:function(e,n){if(n&&n.hasOwnProperty("projectContext")&&t.isObject(n.projectContext)){var o=e.getDCXRoot();t.each(n.projectContext,function(e,t){o.setValue("projectContext#"+t,e),"useCaseId"===t&&this._saveLastUsedUseCaseSession(e)}.bind(this))}},getProjectContexts:function(e,n){if(!(e=e||this.currentDoc))return{};var o,i=e.getDCXRoot();return n?o=t.reduce(n,(function(e,n){var o=i.getValue("projectContext#"+n);return t.isUndefined(o)||(e[n]=o),e}),{}):(o={},t.each(i._data,(function(e,t){0===t.indexOf("projectContext#")&&(o[t.split("projectContext#")[1]]=e)}))),t.each(o,(function(e,t){if("string"==typeof e&&0===e.indexOf("object:"))try{e=JSON.parse(e.substring(7)),o[t]=e}catch(e){g.warn("could not parse projectContext subobject:"+t,e)}})),o},_saveLaunchConfigSession:function(e){if(window.sessionStorage)try{sessionStorage.setItem("launch_config_tmp",JSON.stringify(e))}catch(e){g.error("error while saving launch config",e)}},_getAndClearLaunchConfigFromSession:function(){var e;try{if(!window.sessionStorage)return null;var t=sessionStorage.getItem("launch_config_tmp")||void 0;t&&(e=JSON.parse(t),sessionStorage.removeItem("launch_config_tmp"))}catch(e){g.error("error while getting launch config",e)}return e},_saveLastUsedUseCaseSession:function(e){if(window.sessionStorage)try{sessionStorage.setItem("last_used_usecase",JSON.stringify(e))}catch(e){g.error("error while saving launch config",e)}},createDocument:function(e){return this.creationDefer=o.defer(),i.setSyncMode(i.MODE_DISABLED),this.currentDoc?i.waitForQuiet(this.currentDoc).then(function(){this._createDoc(e)}.bind(this)):this._createDoc(e),this.creationDefer.promise},waitForQuiet:function(e){return(e=e||this.currentDoc)?i.waitForQuiet(e):o.resolve()},loadDocument:function(){return this.creationDefer.promise},storageManager:function(){return i},editorUnloadFinished:function(){this.currentDoc=null},getImage:function(t,n,i,a){if(!(a=a||this.currentDoc))return console.error("no doc for getImage",{pathOrComponent:t,query:n,buster:i}),o.reject(new Error("no doc for getImage:"+t));var r,s=a.getDCXComposite();if(!(r="string"==typeof t?s.current.getComponentWithAbsolutePath(t):t))return o.resolve(null);var u=new o.defer;return a.getImageComponentHref(r,n.size).then(function(t){var n=0;!function o(){var i=document.createElement("img"),a=function(e,t,i){n<2?o():r(i,t,"Image not accepting URL")},r=function(e,t,n){var o=n,i=1;"Image not accepting URL"!==n&&(i=e.status),u.reject({message:o,status:i})};i.onload=function(){var e=t.replace(new RegExp("^.*image_assets/[^/]*/"+s.id+"/"),"");u.resolve({path:e,size:{width:i.width,height:i.height},img:this})},i.onerror=function(){e.get(t).success(a).error(r)},n++,i.src=t}()}.bind(this)).catch(function(e){window.marvel.logger.error("app-storage-base caught error loading an image",e),u.reject(e)}.bind(this)).done(),u.promise},getPreviewHrefAsync:function(e){var t=(e=e||this.currentDoc).getMyApp().getPreviewComponent(e);return t?e.getImageComponentHref(t):o.resolve("")}})}.apply(t,o))||(e.exports=i)},974:function(e,t){},975:function(e,t){}}]);
//# sourceMappingURL=brand-kit-controller-fd4a554b.js.map